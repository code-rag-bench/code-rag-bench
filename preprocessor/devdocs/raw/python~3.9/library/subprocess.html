<h1 id="subprocess-subprocess-management">subprocess — Subprocess management</h1> <p id="module-subprocess"><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.9/Lib/subprocess.py">Lib/subprocess.py</a></p>  <p>The <a class="reference internal" href="#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module allows you to spawn new processes, connect to their input/output/error pipes, and obtain their return codes. This module intends to replace several older modules and functions:</p> <pre data-language="python">os.system
os.spawn*
</pre> <p>Information about how the <a class="reference internal" href="#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module can be used to replace these modules and functions can be found in the following sections.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <p><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0324" id="index-0"><strong>PEP 324</strong></a> – PEP proposing the subprocess module</p> </div>  <h2 id="using-the-subprocess-module">Using the subprocess Module</h2> <p>The recommended approach to invoking subprocesses is to use the <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> function for all use cases it can handle. For more advanced use cases, the underlying <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> interface can be used directly.</p> <p>The <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> function was added in Python 3.5; if you need to retain compatibility with older versions, see the <a class="reference internal" href="#call-function-trio"><span class="std std-ref">Older high-level API</span></a> section.</p> <dl class="function"> <dt id="subprocess.run">
<code>subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs)</code> </dt> <dd>
<p>Run the command described by <em>args</em>. Wait for command to complete, then return a <a class="reference internal" href="#subprocess.CompletedProcess" title="subprocess.CompletedProcess"><code>CompletedProcess</code></a> instance.</p> <p>The arguments shown above are merely the most common ones, described below in <a class="reference internal" href="#frequently-used-arguments"><span class="std std-ref">Frequently Used Arguments</span></a> (hence the use of keyword-only notation in the abbreviated signature). The full function signature is largely the same as that of the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor - most of the arguments to this function are passed through to that interface. (<em>timeout</em>, <em>input</em>, <em>check</em>, and <em>capture_output</em> are not.)</p> <p>If <em>capture_output</em> is true, stdout and stderr will be captured. When used, the internal <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> object is automatically created with <code>stdout=PIPE</code> and <code>stderr=PIPE</code>. The <em>stdout</em> and <em>stderr</em> arguments may not be supplied at the same time as <em>capture_output</em>. If you wish to capture and combine both streams into one, use <code>stdout=PIPE</code> and <code>stderr=STDOUT</code> instead of <em>capture_output</em>.</p> <p>The <em>timeout</em> argument is passed to <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a>. If the timeout expires, the child process will be killed and waited for. The <a class="reference internal" href="#subprocess.TimeoutExpired" title="subprocess.TimeoutExpired"><code>TimeoutExpired</code></a> exception will be re-raised after the child process has terminated.</p> <p>The <em>input</em> argument is passed to <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a> and thus to the subprocess’s stdin. If used it must be a byte sequence, or a string if <em>encoding</em> or <em>errors</em> is specified or <em>text</em> is true. When used, the internal <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> object is automatically created with <code>stdin=PIPE</code>, and the <em>stdin</em> argument may not be used as well.</p> <p>If <em>check</em> is true, and the process exits with a non-zero exit code, a <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a> exception will be raised. Attributes of that exception hold the arguments, the exit code, and stdout and stderr if they were captured.</p> <p>If <em>encoding</em> or <em>errors</em> are specified, or <em>text</em> is true, file objects for stdin, stdout and stderr are opened in text mode using the specified <em>encoding</em> and <em>errors</em> or the <a class="reference internal" href="io#io.TextIOWrapper" title="io.TextIOWrapper"><code>io.TextIOWrapper</code></a> default. The <em>universal_newlines</em> argument is equivalent to <em>text</em> and is provided for backwards compatibility. By default, file objects are opened in binary mode.</p> <p>If <em>env</em> is not <code>None</code>, it must be a mapping that defines the environment variables for the new process; these are used instead of the default behavior of inheriting the current process’ environment. It is passed directly to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a>.</p> <p>Examples:</p> <pre data-language="python">&gt;&gt;&gt; subprocess.run(["ls", "-l"])  # doesn't capture output
CompletedProcess(args=['ls', '-l'], returncode=0)

&gt;&gt;&gt; subprocess.run("exit 1", shell=True, check=True)
Traceback (most recent call last):
  ...
subprocess.CalledProcessError: Command 'exit 1' returned non-zero exit status 1

&gt;&gt;&gt; subprocess.run(["ls", "-l", "/dev/null"], capture_output=True)
CompletedProcess(args=['ls', '-l', '/dev/null'], returncode=0,
stdout=b'crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\n', stderr=b'')
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.5.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span>Added <em>encoding</em> and <em>errors</em> parameters</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.7: </span>Added the <em>text</em> parameter, as a more understandable alias of <em>universal_newlines</em>. Added the <em>capture_output</em> parameter.</p> </div> </dd>
</dl> <dl class="class"> <dt id="subprocess.CompletedProcess">
<code>class subprocess.CompletedProcess</code> </dt> <dd>
<p>The return value from <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a>, representing a process that has finished.</p> <dl class="attribute"> <dt id="subprocess.CompletedProcess.args">
<code>args</code> </dt> <dd>
<p>The arguments used to launch the process. This may be a list or a string.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CompletedProcess.returncode">
<code>returncode</code> </dt> <dd>
<p>Exit status of the child process. Typically, an exit status of 0 indicates that it ran successfully.</p> <p>A negative value <code>-N</code> indicates that the child was terminated by signal <code>N</code> (POSIX only).</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CompletedProcess.stdout">
<code>stdout</code> </dt> <dd>
<p>Captured stdout from the child process. A bytes sequence, or a string if <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> was called with an encoding, errors, or text=True. <code>None</code> if stdout was not captured.</p> <p>If you ran the process with <code>stderr=subprocess.STDOUT</code>, stdout and stderr will be combined in this attribute, and <a class="reference internal" href="#subprocess.CompletedProcess.stderr" title="subprocess.CompletedProcess.stderr"><code>stderr</code></a> will be <code>None</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CompletedProcess.stderr">
<code>stderr</code> </dt> <dd>
<p>Captured stderr from the child process. A bytes sequence, or a string if <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> was called with an encoding, errors, or text=True. <code>None</code> if stderr was not captured.</p> </dd>
</dl> <dl class="method"> <dt id="subprocess.CompletedProcess.check_returncode">
<code>check_returncode()</code> </dt> <dd>
<p>If <a class="reference internal" href="#subprocess.CompletedProcess.returncode" title="subprocess.CompletedProcess.returncode"><code>returncode</code></a> is non-zero, raise a <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a>.</p> </dd>
</dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.5.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.DEVNULL">
<code>subprocess.DEVNULL</code> </dt> <dd>
<p>Special value that can be used as the <em>stdin</em>, <em>stdout</em> or <em>stderr</em> argument to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> and indicates that the special file <a class="reference internal" href="os#os.devnull" title="os.devnull"><code>os.devnull</code></a> will be used.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.PIPE">
<code>subprocess.PIPE</code> </dt> <dd>
<p>Special value that can be used as the <em>stdin</em>, <em>stdout</em> or <em>stderr</em> argument to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> and indicates that a pipe to the standard stream should be opened. Most useful with <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a>.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.STDOUT">
<code>subprocess.STDOUT</code> </dt> <dd>
<p>Special value that can be used as the <em>stderr</em> argument to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> and indicates that standard error should go into the same handle as standard output.</p> </dd>
</dl> <dl class="exception"> <dt id="subprocess.SubprocessError">
<code>exception subprocess.SubprocessError</code> </dt> <dd>
<p>Base class for all other exceptions from this module.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3.</span></p> </div> </dd>
</dl> <dl class="exception"> <dt id="subprocess.TimeoutExpired">
<code>exception subprocess.TimeoutExpired</code> </dt> <dd>
<p>Subclass of <a class="reference internal" href="#subprocess.SubprocessError" title="subprocess.SubprocessError"><code>SubprocessError</code></a>, raised when a timeout expires while waiting for a child process.</p> <dl class="attribute"> <dt id="subprocess.TimeoutExpired.cmd">
<code>cmd</code> </dt> <dd>
<p>Command that was used to spawn the child process.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.TimeoutExpired.timeout">
<code>timeout</code> </dt> <dd>
<p>Timeout in seconds.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.TimeoutExpired.output">
<code>output</code> </dt> <dd>
<p>Output of the child process if it was captured by <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> or <a class="reference internal" href="#subprocess.check_output" title="subprocess.check_output"><code>check_output()</code></a>. Otherwise, <code>None</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.TimeoutExpired.stdout">
<code>stdout</code> </dt> <dd>
<p>Alias for output, for symmetry with <a class="reference internal" href="#subprocess.TimeoutExpired.stderr" title="subprocess.TimeoutExpired.stderr"><code>stderr</code></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.TimeoutExpired.stderr">
<code>stderr</code> </dt> <dd>
<p>Stderr output of the child process if it was captured by <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a>. Otherwise, <code>None</code>.</p> </dd>
</dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.5: </span><em>stdout</em> and <em>stderr</em> attributes added</p> </div> </dd>
</dl> <dl class="exception"> <dt id="subprocess.CalledProcessError">
<code>exception subprocess.CalledProcessError</code> </dt> <dd>
<p>Subclass of <a class="reference internal" href="#subprocess.SubprocessError" title="subprocess.SubprocessError"><code>SubprocessError</code></a>, raised when a process run by <a class="reference internal" href="#subprocess.check_call" title="subprocess.check_call"><code>check_call()</code></a> or <a class="reference internal" href="#subprocess.check_output" title="subprocess.check_output"><code>check_output()</code></a> returns a non-zero exit status.</p> <dl class="attribute"> <dt id="subprocess.CalledProcessError.returncode">
<code>returncode</code> </dt> <dd>
<p>Exit status of the child process. If the process exited due to a signal, this will be the negative signal number.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CalledProcessError.cmd">
<code>cmd</code> </dt> <dd>
<p>Command that was used to spawn the child process.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CalledProcessError.output">
<code>output</code> </dt> <dd>
<p>Output of the child process if it was captured by <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> or <a class="reference internal" href="#subprocess.check_output" title="subprocess.check_output"><code>check_output()</code></a>. Otherwise, <code>None</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CalledProcessError.stdout">
<code>stdout</code> </dt> <dd>
<p>Alias for output, for symmetry with <a class="reference internal" href="#subprocess.CalledProcessError.stderr" title="subprocess.CalledProcessError.stderr"><code>stderr</code></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.CalledProcessError.stderr">
<code>stderr</code> </dt> <dd>
<p>Stderr output of the child process if it was captured by <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a>. Otherwise, <code>None</code>.</p> </dd>
</dl> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.5: </span><em>stdout</em> and <em>stderr</em> attributes added</p> </div> </dd>
</dl>  <h3 id="id1">Frequently Used Arguments</h3> <p id="frequently-used-arguments">To support a wide variety of use cases, the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor (and the convenience functions) accept a large number of optional arguments. For most typical use cases, many of these arguments can be safely left at their default values. The arguments that are most commonly needed are:</p>  <p><em>args</em> is required for all calls and should be a string, or a sequence of program arguments. Providing a sequence of arguments is generally preferred, as it allows the module to take care of any required escaping and quoting of arguments (e.g. to permit spaces in file names). If passing a single string, either <em>shell</em> must be <a class="reference internal" href="constants#True" title="True"><code>True</code></a> (see below) or else the string must simply name the program to be executed without specifying any arguments.</p> <p><em>stdin</em>, <em>stdout</em> and <em>stderr</em> specify the executed program’s standard input, standard output and standard error file handles, respectively. Valid values are <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a>, an existing file descriptor (a positive integer), an existing file object, and <code>None</code>. <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a> indicates that a new pipe to the child should be created. <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a> indicates that the special file <a class="reference internal" href="os#os.devnull" title="os.devnull"><code>os.devnull</code></a> will be used. With the default settings of <code>None</code>, no redirection will occur; the child’s file handles will be inherited from the parent. Additionally, <em>stderr</em> can be <a class="reference internal" href="#subprocess.STDOUT" title="subprocess.STDOUT"><code>STDOUT</code></a>, which indicates that the stderr data from the child process should be captured into the same file handle as for <em>stdout</em>.</p> <p id="index-1">If <em>encoding</em> or <em>errors</em> are specified, or <em>text</em> (also known as <em>universal_newlines</em>) is true, the file objects <em>stdin</em>, <em>stdout</em> and <em>stderr</em> will be opened in text mode using the <em>encoding</em> and <em>errors</em> specified in the call or the defaults for <a class="reference internal" href="io#io.TextIOWrapper" title="io.TextIOWrapper"><code>io.TextIOWrapper</code></a>.</p> <p>For <em>stdin</em>, line ending characters <code>'\n'</code> in the input will be converted to the default line separator <a class="reference internal" href="os#os.linesep" title="os.linesep"><code>os.linesep</code></a>. For <em>stdout</em> and <em>stderr</em>, all line endings in the output will be converted to <code>'\n'</code>. For more information see the documentation of the <a class="reference internal" href="io#io.TextIOWrapper" title="io.TextIOWrapper"><code>io.TextIOWrapper</code></a> class when the <em>newline</em> argument to its constructor is <code>None</code>.</p> <p>If text mode is not used, <em>stdin</em>, <em>stdout</em> and <em>stderr</em> will be opened as binary streams. No encoding or line ending conversion is performed.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6: </span>Added <em>encoding</em> and <em>errors</em> parameters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7: </span>Added the <em>text</em> parameter as an alias for <em>universal_newlines</em>.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The newlines attribute of the file objects <a class="reference internal" href="#subprocess.Popen.stdin" title="subprocess.Popen.stdin"><code>Popen.stdin</code></a>, <a class="reference internal" href="#subprocess.Popen.stdout" title="subprocess.Popen.stdout"><code>Popen.stdout</code></a> and <a class="reference internal" href="#subprocess.Popen.stderr" title="subprocess.Popen.stderr"><code>Popen.stderr</code></a> are not updated by the <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a> method.</p> </div> <p>If <em>shell</em> is <code>True</code>, the specified command will be executed through the shell. This can be useful if you are using Python primarily for the enhanced control flow it offers over most system shells and still want convenient access to other shell features such as shell pipes, filename wildcards, environment variable expansion, and expansion of <code>~</code> to a user’s home directory. However, note that Python itself offers implementations of many shell-like features (in particular, <a class="reference internal" href="glob#module-glob" title="glob: Unix shell style pathname pattern expansion."><code>glob</code></a>, <a class="reference internal" href="fnmatch#module-fnmatch" title="fnmatch: Unix shell style filename pattern matching."><code>fnmatch</code></a>, <a class="reference internal" href="os#os.walk" title="os.walk"><code>os.walk()</code></a>, <a class="reference internal" href="os.path#os.path.expandvars" title="os.path.expandvars"><code>os.path.expandvars()</code></a>, <a class="reference internal" href="os.path#os.path.expanduser" title="os.path.expanduser"><code>os.path.expanduser()</code></a>, and <a class="reference internal" href="shutil#module-shutil" title="shutil: High-level file operations, including copying."><code>shutil</code></a>).</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span>When <em>universal_newlines</em> is <code>True</code>, the class uses the encoding <a class="reference internal" href="locale#locale.getpreferredencoding" title="locale.getpreferredencoding"><code>locale.getpreferredencoding(False)</code></a> instead of <code>locale.getpreferredencoding()</code>. See the <a class="reference internal" href="io#io.TextIOWrapper" title="io.TextIOWrapper"><code>io.TextIOWrapper</code></a> class for more information on this change.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Read the <a class="reference internal" href="#security-considerations">Security Considerations</a> section before using <code>shell=True</code>.</p> </div>  <p>These options, along with all of the other options, are described in more detail in the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor documentation.</p>   <h3 id="popen-constructor">Popen Constructor</h3> <p>The underlying process creation and management in this module is handled by the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> class. It offers a lot of flexibility so that developers are able to handle the less common cases not covered by the convenience functions.</p> <dl class="class"> <dt id="subprocess.Popen">
<code>class subprocess.Popen(args, bufsize=-1, executable=None, stdin=None, stdout=None, stderr=None, preexec_fn=None, close_fds=True, shell=False, cwd=None, env=None, universal_newlines=None, startupinfo=None, creationflags=0, restore_signals=True, start_new_session=False, pass_fds=(), *, group=None, extra_groups=None, user=None, umask=-1, encoding=None, errors=None, text=None)</code> </dt> <dd>
<p>Execute a child program in a new process. On POSIX, the class uses <a class="reference internal" href="os#os.execvp" title="os.execvp"><code>os.execvp()</code></a>-like behavior to execute the child program. On Windows, the class uses the Windows <code>CreateProcess()</code> function. The arguments to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> are as follows.</p> <p><em>args</em> should be a sequence of program arguments or else a single string or <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a>. By default, the program to execute is the first item in <em>args</em> if <em>args</em> is a sequence. If <em>args</em> is a string, the interpretation is platform-dependent and described below. See the <em>shell</em> and <em>executable</em> arguments for additional differences from the default behavior. Unless otherwise stated, it is recommended to pass <em>args</em> as a sequence.</p> <p>An example of passing some arguments to an external program as a sequence is:</p> <pre data-language="python">Popen(["/usr/bin/git", "commit", "-m", "Fixes a bug."])
</pre> <p>On POSIX, if <em>args</em> is a string, the string is interpreted as the name or path of the program to execute. However, this can only be done if not passing arguments to the program.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>It may not be obvious how to break a shell command into a sequence of arguments, especially in complex cases. <a class="reference internal" href="shlex#shlex.split" title="shlex.split"><code>shlex.split()</code></a> can illustrate how to determine the correct tokenization for <em>args</em>:</p> <pre data-language="python">&gt;&gt;&gt; import shlex, subprocess
&gt;&gt;&gt; command_line = input()
/bin/vikings -input eggs.txt -output "spam spam.txt" -cmd "echo '$MONEY'"
&gt;&gt;&gt; args = shlex.split(command_line)
&gt;&gt;&gt; print(args)
['/bin/vikings', '-input', 'eggs.txt', '-output', 'spam spam.txt', '-cmd', "echo '$MONEY'"]
&gt;&gt;&gt; p = subprocess.Popen(args) # Success!
</pre> <p>Note in particular that options (such as <em>-input</em>) and arguments (such as <em>eggs.txt</em>) that are separated by whitespace in the shell go in separate list elements, while arguments that need quoting or backslash escaping when used in the shell (such as filenames containing spaces or the <em>echo</em> command shown above) are single list elements.</p> </div> <p>On Windows, if <em>args</em> is a sequence, it will be converted to a string in a manner described in <a class="reference internal" href="#converting-argument-sequence"><span class="std std-ref">Converting an argument sequence to a string on Windows</span></a>. This is because the underlying <code>CreateProcess()</code> operates on strings.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span><em>args</em> parameter accepts a <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> if <em>shell</em> is <code>False</code> and a sequence containing path-like objects on POSIX.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span><em>args</em> parameter accepts a <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> if <em>shell</em> is <code>False</code> and a sequence containing bytes and path-like objects on Windows.</p> </div> <p>The <em>shell</em> argument (which defaults to <code>False</code>) specifies whether to use the shell as the program to execute. If <em>shell</em> is <code>True</code>, it is recommended to pass <em>args</em> as a string rather than as a sequence.</p> <p>On POSIX with <code>shell=True</code>, the shell defaults to <code>/bin/sh</code>. If <em>args</em> is a string, the string specifies the command to execute through the shell. This means that the string must be formatted exactly as it would be when typed at the shell prompt. This includes, for example, quoting or backslash escaping filenames with spaces in them. If <em>args</em> is a sequence, the first item specifies the command string, and any additional items will be treated as additional arguments to the shell itself. That is to say, <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> does the equivalent of:</p> <pre data-language="python">Popen(['/bin/sh', '-c', args[0], args[1], ...])
</pre> <p>On Windows with <code>shell=True</code>, the <code id="index-2">COMSPEC</code> environment variable specifies the default shell. The only time you need to specify <code>shell=True</code> on Windows is when the command you wish to execute is built into the shell (e.g. <strong class="command">dir</strong> or <strong class="command">copy</strong>). You do not need <code>shell=True</code> to run a batch file or console-based executable.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Read the <a class="reference internal" href="#security-considerations">Security Considerations</a> section before using <code>shell=True</code>.</p> </div> <p><em>bufsize</em> will be supplied as the corresponding argument to the <a class="reference internal" href="functions#open" title="open"><code>open()</code></a> function when creating the stdin/stdout/stderr pipe file objects:</p> <ul class="simple"> <li>
<code>0</code> means unbuffered (read and write are one system call and can return short)</li> <li>
<code>1</code> means line buffered (only usable if <code>universal_newlines=True</code> i.e., in a text mode)</li> <li>any other positive value means use a buffer of approximately that size</li> <li>negative bufsize (the default) means the system default of io.DEFAULT_BUFFER_SIZE will be used.</li> </ul> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3.1: </span><em>bufsize</em> now defaults to -1 to enable buffering by default to match the behavior that most code expects. In versions prior to Python 3.2.4 and 3.3.1 it incorrectly defaulted to <code>0</code> which was unbuffered and allowed short reads. This was unintentional and did not match the behavior of Python 2 as most code expected.</p> </div> <p>The <em>executable</em> argument specifies a replacement program to execute. It is very seldom needed. When <code>shell=False</code>, <em>executable</em> replaces the program to execute specified by <em>args</em>. However, the original <em>args</em> is still passed to the program. Most programs treat the program specified by <em>args</em> as the command name, which can then be different from the program actually executed. On POSIX, the <em>args</em> name becomes the display name for the executable in utilities such as <strong class="program">ps</strong>. If <code>shell=True</code>, on POSIX the <em>executable</em> argument specifies a replacement shell for the default <code>/bin/sh</code>.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span><em>executable</em> parameter accepts a <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> on POSIX.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span><em>executable</em> parameter accepts a bytes and <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> on Windows.</p> </div> <p><em>stdin</em>, <em>stdout</em> and <em>stderr</em> specify the executed program’s standard input, standard output and standard error file handles, respectively. Valid values are <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a>, an existing file descriptor (a positive integer), an existing <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-file-object"><span class="xref std std-term">file object</span></a>, and <code>None</code>. <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a> indicates that a new pipe to the child should be created. <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a> indicates that the special file <a class="reference internal" href="os#os.devnull" title="os.devnull"><code>os.devnull</code></a> will be used. With the default settings of <code>None</code>, no redirection will occur; the child’s file handles will be inherited from the parent. Additionally, <em>stderr</em> can be <a class="reference internal" href="#subprocess.STDOUT" title="subprocess.STDOUT"><code>STDOUT</code></a>, which indicates that the stderr data from the applications should be captured into the same file handle as for stdout.</p> <p>If <em>preexec_fn</em> is set to a callable object, this object will be called in the child process just before the child is executed. (POSIX only)</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>The <em>preexec_fn</em> parameter is not safe to use in the presence of threads in your application. The child process could deadlock before exec is called. If you must use it, keep it trivial! Minimize the number of libraries you call into.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you need to modify the environment for the child use the <em>env</em> parameter rather than doing it in a <em>preexec_fn</em>. The <em>start_new_session</em> parameter can take the place of a previously common use of <em>preexec_fn</em> to call os.setsid() in the child.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span>The <em>preexec_fn</em> parameter is no longer supported in subinterpreters. The use of the parameter in a subinterpreter raises <a class="reference internal" href="exceptions#RuntimeError" title="RuntimeError"><code>RuntimeError</code></a>. The new restriction may affect applications that are deployed in mod_wsgi, uWSGI, and other embedded environments.</p> </div> <p>If <em>close_fds</em> is true, all file descriptors except <code>0</code>, <code>1</code> and <code>2</code> will be closed before the child process is executed. Otherwise when <em>close_fds</em> is false, file descriptors obey their inheritable flag as described in <a class="reference internal" href="os#fd-inheritance"><span class="std std-ref">Inheritance of File Descriptors</span></a>.</p> <p>On Windows, if <em>close_fds</em> is true then no handles will be inherited by the child process unless explicitly passed in the <code>handle_list</code> element of <a class="reference internal" href="#subprocess.STARTUPINFO.lpAttributeList" title="subprocess.STARTUPINFO.lpAttributeList"><code>STARTUPINFO.lpAttributeList</code></a>, or by standard handle redirection.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.2: </span>The default for <em>close_fds</em> was changed from <a class="reference internal" href="constants#False" title="False"><code>False</code></a> to what is described above.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.7: </span>On Windows the default for <em>close_fds</em> was changed from <a class="reference internal" href="constants#False" title="False"><code>False</code></a> to <a class="reference internal" href="constants#True" title="True"><code>True</code></a> when redirecting the standard handles. It’s now possible to set <em>close_fds</em> to <a class="reference internal" href="constants#True" title="True"><code>True</code></a> when redirecting the standard handles.</p> </div> <p><em>pass_fds</em> is an optional sequence of file descriptors to keep open between the parent and child. Providing any <em>pass_fds</em> forces <em>close_fds</em> to be <a class="reference internal" href="constants#True" title="True"><code>True</code></a>. (POSIX only)</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.2: </span>The <em>pass_fds</em> parameter was added.</p> </div> <p>If <em>cwd</em> is not <code>None</code>, the function changes the working directory to <em>cwd</em> before executing the child. <em>cwd</em> can be a string, bytes or <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like</span></a> object. In particular, the function looks for <em>executable</em> (or for the first item in <em>args</em>) relative to <em>cwd</em> if the executable path is a relative path.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span><em>cwd</em> parameter accepts a <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> on POSIX.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.7: </span><em>cwd</em> parameter accepts a <a class="reference internal" href="https://docs.python.org/3.9/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> on Windows.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span><em>cwd</em> parameter accepts a bytes object on Windows.</p> </div> <p>If <em>restore_signals</em> is true (the default) all signals that Python has set to SIG_IGN are restored to SIG_DFL in the child process before the exec. Currently this includes the SIGPIPE, SIGXFZ and SIGXFSZ signals. (POSIX only)</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.2: </span><em>restore_signals</em> was added.</p> </div> <p>If <em>start_new_session</em> is true the setsid() system call will be made in the child process prior to the execution of the subprocess. (POSIX only)</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.2: </span><em>start_new_session</em> was added.</p> </div> <p>If <em>group</em> is not <code>None</code>, the setregid() system call will be made in the child process prior to the execution of the subprocess. If the provided value is a string, it will be looked up via <a class="reference internal" href="grp#grp.getgrnam" title="grp.getgrnam"><code>grp.getgrnam()</code></a> and the value in <code>gr_gid</code> will be used. If the value is an integer, it will be passed verbatim. (POSIX only)</p> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> <p>If <em>extra_groups</em> is not <code>None</code>, the setgroups() system call will be made in the child process prior to the execution of the subprocess. Strings provided in <em>extra_groups</em> will be looked up via <a class="reference internal" href="grp#grp.getgrnam" title="grp.getgrnam"><code>grp.getgrnam()</code></a> and the values in <code>gr_gid</code> will be used. Integer values will be passed verbatim. (POSIX only)</p> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> <p>If <em>user</em> is not <code>None</code>, the setreuid() system call will be made in the child process prior to the execution of the subprocess. If the provided value is a string, it will be looked up via <a class="reference internal" href="pwd#pwd.getpwnam" title="pwd.getpwnam"><code>pwd.getpwnam()</code></a> and the value in <code>pw_uid</code> will be used. If the value is an integer, it will be passed verbatim. (POSIX only)</p> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> <p>If <em>umask</em> is not negative, the umask() system call will be made in the child process prior to the execution of the subprocess.</p> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.9.</span></p> </div> <p>If <em>env</em> is not <code>None</code>, it must be a mapping that defines the environment variables for the new process; these are used instead of the default behavior of inheriting the current process’ environment.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If specified, <em>env</em> must provide any variables required for the program to execute. On Windows, in order to run a <a class="reference external" href="https://en.wikipedia.org/wiki/Side-by-Side_Assembly">side-by-side assembly</a> the specified <em>env</em> <strong>must</strong> include a valid <code id="index-3">SystemRoot</code>.</p> </div> <p>If <em>encoding</em> or <em>errors</em> are specified, or <em>text</em> is true, the file objects <em>stdin</em>, <em>stdout</em> and <em>stderr</em> are opened in text mode with the specified encoding and <em>errors</em>, as described above in <a class="reference internal" href="#frequently-used-arguments"><span class="std std-ref">Frequently Used Arguments</span></a>. The <em>universal_newlines</em> argument is equivalent to <em>text</em> and is provided for backwards compatibility. By default, file objects are opened in binary mode.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.6: </span><em>encoding</em> and <em>errors</em> were added.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7: </span><em>text</em> was added as a more readable alias for <em>universal_newlines</em>.</p> </div> <p>If given, <em>startupinfo</em> will be a <a class="reference internal" href="#subprocess.STARTUPINFO" title="subprocess.STARTUPINFO"><code>STARTUPINFO</code></a> object, which is passed to the underlying <code>CreateProcess</code> function. <em>creationflags</em>, if given, can be one or more of the following flags:</p>  <ul class="simple"> <li><a class="reference internal" href="#subprocess.CREATE_NEW_CONSOLE" title="subprocess.CREATE_NEW_CONSOLE"><code>CREATE_NEW_CONSOLE</code></a></li> <li><a class="reference internal" href="#subprocess.CREATE_NEW_PROCESS_GROUP" title="subprocess.CREATE_NEW_PROCESS_GROUP"><code>CREATE_NEW_PROCESS_GROUP</code></a></li> <li><a class="reference internal" href="#subprocess.ABOVE_NORMAL_PRIORITY_CLASS" title="subprocess.ABOVE_NORMAL_PRIORITY_CLASS"><code>ABOVE_NORMAL_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.BELOW_NORMAL_PRIORITY_CLASS" title="subprocess.BELOW_NORMAL_PRIORITY_CLASS"><code>BELOW_NORMAL_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.HIGH_PRIORITY_CLASS" title="subprocess.HIGH_PRIORITY_CLASS"><code>HIGH_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.IDLE_PRIORITY_CLASS" title="subprocess.IDLE_PRIORITY_CLASS"><code>IDLE_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.NORMAL_PRIORITY_CLASS" title="subprocess.NORMAL_PRIORITY_CLASS"><code>NORMAL_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.REALTIME_PRIORITY_CLASS" title="subprocess.REALTIME_PRIORITY_CLASS"><code>REALTIME_PRIORITY_CLASS</code></a></li> <li><a class="reference internal" href="#subprocess.CREATE_NO_WINDOW" title="subprocess.CREATE_NO_WINDOW"><code>CREATE_NO_WINDOW</code></a></li> <li><a class="reference internal" href="#subprocess.DETACHED_PROCESS" title="subprocess.DETACHED_PROCESS"><code>DETACHED_PROCESS</code></a></li> <li><a class="reference internal" href="#subprocess.CREATE_DEFAULT_ERROR_MODE" title="subprocess.CREATE_DEFAULT_ERROR_MODE"><code>CREATE_DEFAULT_ERROR_MODE</code></a></li> <li><a class="reference internal" href="#subprocess.CREATE_BREAKAWAY_FROM_JOB" title="subprocess.CREATE_BREAKAWAY_FROM_JOB"><code>CREATE_BREAKAWAY_FROM_JOB</code></a></li> </ul>  <p>Popen objects are supported as context managers via the <a class="reference internal" href="https://docs.python.org/3.9/reference/compound_stmts.html#with"><code>with</code></a> statement: on exit, standard file descriptors are closed, and the process is waited for.</p> <pre data-language="python">with Popen(["ifconfig"], stdout=PIPE) as proc:
    log.write(proc.stdout.read())
</pre> 
<p>Popen and the other functions in this module that use it raise an <a class="reference internal" href="sys#auditing"><span class="std std-ref">auditing event</span></a> <code>subprocess.Popen</code> with arguments <code>executable</code>, <code>args</code>, <code>cwd</code>, and <code>env</code>. The value for <code>args</code> may be a single string or a list of strings, depending on platform.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.2: </span>Added context manager support.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span>Popen destructor now emits a <a class="reference internal" href="exceptions#ResourceWarning" title="ResourceWarning"><code>ResourceWarning</code></a> warning if the child process is still running.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.8: </span>Popen can use <a class="reference internal" href="os#os.posix_spawn" title="os.posix_spawn"><code>os.posix_spawn()</code></a> in some cases for better performance. On Windows Subsystem for Linux and QEMU User Emulation, Popen constructor using <a class="reference internal" href="os#os.posix_spawn" title="os.posix_spawn"><code>os.posix_spawn()</code></a> no longer raise an exception on errors like missing program, but the child process fails with a non-zero <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a>.</p> </div> </dd>
</dl>   <h3 id="exceptions">Exceptions</h3> <p>Exceptions raised in the child process, before the new program has started to execute, will be re-raised in the parent.</p> <p>The most common exception raised is <a class="reference internal" href="exceptions#OSError" title="OSError"><code>OSError</code></a>. This occurs, for example, when trying to execute a non-existent file. Applications should prepare for <a class="reference internal" href="exceptions#OSError" title="OSError"><code>OSError</code></a> exceptions.</p> <p>A <a class="reference internal" href="exceptions#ValueError" title="ValueError"><code>ValueError</code></a> will be raised if <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> is called with invalid arguments.</p> <p><a class="reference internal" href="#subprocess.check_call" title="subprocess.check_call"><code>check_call()</code></a> and <a class="reference internal" href="#subprocess.check_output" title="subprocess.check_output"><code>check_output()</code></a> will raise <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a> if the called process returns a non-zero return code.</p> <p>All of the functions and methods that accept a <em>timeout</em> parameter, such as <a class="reference internal" href="#subprocess.call" title="subprocess.call"><code>call()</code></a> and <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a> will raise <a class="reference internal" href="#subprocess.TimeoutExpired" title="subprocess.TimeoutExpired"><code>TimeoutExpired</code></a> if the timeout expires before the process exits.</p> <p>Exceptions defined in this module all inherit from <a class="reference internal" href="#subprocess.SubprocessError" title="subprocess.SubprocessError"><code>SubprocessError</code></a>.</p>  <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3: </span>The <a class="reference internal" href="#subprocess.SubprocessError" title="subprocess.SubprocessError"><code>SubprocessError</code></a> base class was added.</p> </div>     <h2 id="security-considerations">Security Considerations</h2> <p>Unlike some other popen functions, this implementation will never implicitly call a system shell. This means that all characters, including shell metacharacters, can safely be passed to child processes. If the shell is invoked explicitly, via <code>shell=True</code>, it is the application’s responsibility to ensure that all whitespace and metacharacters are quoted appropriately to avoid <a class="reference external" href="https://en.wikipedia.org/wiki/Shell_injection#Shell_injection">shell injection</a> vulnerabilities.</p> <p>When using <code>shell=True</code>, the <a class="reference internal" href="shlex#shlex.quote" title="shlex.quote"><code>shlex.quote()</code></a> function can be used to properly escape whitespace and shell metacharacters in strings that are going to be used to construct shell commands.</p>   <h2 id="popen-objects">Popen Objects</h2> <p>Instances of the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> class have the following methods:</p> <dl class="method"> <dt id="subprocess.Popen.poll">
<code>Popen.poll()</code> </dt> <dd>
<p>Check if child process has terminated. Set and return <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a> attribute. Otherwise, returns <code>None</code>.</p> </dd>
</dl> <dl class="method"> <dt id="subprocess.Popen.wait">
<code>Popen.wait(timeout=None)</code> </dt> <dd>
<p>Wait for child process to terminate. Set and return <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a> attribute.</p> <p>If the process does not terminate after <em>timeout</em> seconds, raise a <a class="reference internal" href="#subprocess.TimeoutExpired" title="subprocess.TimeoutExpired"><code>TimeoutExpired</code></a> exception. It is safe to catch this exception and retry the wait.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This will deadlock when using <code>stdout=PIPE</code> or <code>stderr=PIPE</code> and the child process generates enough output to a pipe such that it blocks waiting for the OS pipe buffer to accept more data. Use <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>Popen.communicate()</code></a> when using pipes to avoid that.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The function is implemented using a busy loop (non-blocking call and short sleeps). Use the <a class="reference internal" href="asyncio#module-asyncio" title="asyncio: Asynchronous I/O."><code>asyncio</code></a> module for an asynchronous wait: see <a class="reference internal" href="asyncio-subprocess#asyncio.create_subprocess_exec" title="asyncio.create_subprocess_exec"><code>asyncio.create_subprocess_exec</code></a>.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span><em>timeout</em> was added.</p> </div> </dd>
</dl> <dl class="method"> <dt id="subprocess.Popen.communicate">
<code>Popen.communicate(input=None, timeout=None)</code> </dt> <dd>
<p>Interact with process: Send data to stdin. Read data from stdout and stderr, until end-of-file is reached. Wait for process to terminate and set the <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a> attribute. The optional <em>input</em> argument should be data to be sent to the child process, or <code>None</code>, if no data should be sent to the child. If streams were opened in text mode, <em>input</em> must be a string. Otherwise, it must be bytes.</p> <p><a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>communicate()</code></a> returns a tuple <code>(stdout_data, stderr_data)</code>. The data will be strings if streams were opened in text mode; otherwise, bytes.</p> <p>Note that if you want to send data to the process’s stdin, you need to create the Popen object with <code>stdin=PIPE</code>. Similarly, to get anything other than <code>None</code> in the result tuple, you need to give <code>stdout=PIPE</code> and/or <code>stderr=PIPE</code> too.</p> <p>If the process does not terminate after <em>timeout</em> seconds, a <a class="reference internal" href="#subprocess.TimeoutExpired" title="subprocess.TimeoutExpired"><code>TimeoutExpired</code></a> exception will be raised. Catching this exception and retrying communication will not lose any output.</p> <p>The child process is not killed if the timeout expires, so in order to cleanup properly a well-behaved application should kill the child process and finish communication:</p> <pre data-language="python">proc = subprocess.Popen(...)
try:
    outs, errs = proc.communicate(timeout=15)
except TimeoutExpired:
    proc.kill()
    outs, errs = proc.communicate()
</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The data read is buffered in memory, so do not use this method if the data size is large or unlimited.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span><em>timeout</em> was added.</p> </div> </dd>
</dl> <dl class="method"> <dt id="subprocess.Popen.send_signal">
<code>Popen.send_signal(signal)</code> </dt> <dd>
<p>Sends the signal <em>signal</em> to the child.</p> <p>Do nothing if the process completed.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On Windows, SIGTERM is an alias for <a class="reference internal" href="#subprocess.Popen.terminate" title="subprocess.Popen.terminate"><code>terminate()</code></a>. CTRL_C_EVENT and CTRL_BREAK_EVENT can be sent to processes started with a <em>creationflags</em> parameter which includes <code>CREATE_NEW_PROCESS_GROUP</code>.</p> </div> </dd>
</dl> <dl class="method"> <dt id="subprocess.Popen.terminate">
<code>Popen.terminate()</code> </dt> <dd>
<p>Stop the child. On POSIX OSs the method sends SIGTERM to the child. On Windows the Win32 API function <code>TerminateProcess()</code> is called to stop the child.</p> </dd>
</dl> <dl class="method"> <dt id="subprocess.Popen.kill">
<code>Popen.kill()</code> </dt> <dd>
<p>Kills the child. On POSIX OSs the function sends SIGKILL to the child. On Windows <a class="reference internal" href="#subprocess.Popen.kill" title="subprocess.Popen.kill"><code>kill()</code></a> is an alias for <a class="reference internal" href="#subprocess.Popen.terminate" title="subprocess.Popen.terminate"><code>terminate()</code></a>.</p> </dd>
</dl> <p>The following attributes are also available:</p> <dl class="attribute"> <dt id="subprocess.Popen.args">
<code>Popen.args</code> </dt> <dd>
<p>The <em>args</em> argument as it was passed to <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> – a sequence of program arguments or else a single string.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3.</span></p> </div> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.Popen.stdin">
<code>Popen.stdin</code> </dt> <dd>
<p>If the <em>stdin</em> argument was <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is a writeable stream object as returned by <a class="reference internal" href="functions#open" title="open"><code>open()</code></a>. If the <em>encoding</em> or <em>errors</em> arguments were specified or the <em>universal_newlines</em> argument was <code>True</code>, the stream is a text stream, otherwise it is a byte stream. If the <em>stdin</em> argument was not <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is <code>None</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.Popen.stdout">
<code>Popen.stdout</code> </dt> <dd>
<p>If the <em>stdout</em> argument was <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is a readable stream object as returned by <a class="reference internal" href="functions#open" title="open"><code>open()</code></a>. Reading from the stream provides output from the child process. If the <em>encoding</em> or <em>errors</em> arguments were specified or the <em>universal_newlines</em> argument was <code>True</code>, the stream is a text stream, otherwise it is a byte stream. If the <em>stdout</em> argument was not <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is <code>None</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.Popen.stderr">
<code>Popen.stderr</code> </dt> <dd>
<p>If the <em>stderr</em> argument was <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is a readable stream object as returned by <a class="reference internal" href="functions#open" title="open"><code>open()</code></a>. Reading from the stream provides error output from the child process. If the <em>encoding</em> or <em>errors</em> arguments were specified or the <em>universal_newlines</em> argument was <code>True</code>, the stream is a text stream, otherwise it is a byte stream. If the <em>stderr</em> argument was not <a class="reference internal" href="#subprocess.PIPE" title="subprocess.PIPE"><code>PIPE</code></a>, this attribute is <code>None</code>.</p> </dd>
</dl> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Use <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>communicate()</code></a> rather than <a class="reference internal" href="#subprocess.Popen.stdin" title="subprocess.Popen.stdin"><code>.stdin.write</code></a>, <a class="reference internal" href="#subprocess.Popen.stdout" title="subprocess.Popen.stdout"><code>.stdout.read</code></a> or <a class="reference internal" href="#subprocess.Popen.stderr" title="subprocess.Popen.stderr"><code>.stderr.read</code></a> to avoid deadlocks due to any of the other OS pipe buffers filling up and blocking the child process.</p> </div> <dl class="attribute"> <dt id="subprocess.Popen.pid">
<code>Popen.pid</code> </dt> <dd>
<p>The process ID of the child process.</p> <p>Note that if you set the <em>shell</em> argument to <code>True</code>, this is the process ID of the spawned shell.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.Popen.returncode">
<code>Popen.returncode</code> </dt> <dd>
<p>The child return code, set by <a class="reference internal" href="#subprocess.Popen.poll" title="subprocess.Popen.poll"><code>poll()</code></a> and <a class="reference internal" href="#subprocess.Popen.wait" title="subprocess.Popen.wait"><code>wait()</code></a> (and indirectly by <a class="reference internal" href="#subprocess.Popen.communicate" title="subprocess.Popen.communicate"><code>communicate()</code></a>). A <code>None</code> value indicates that the process hasn’t terminated yet.</p> <p>A negative value <code>-N</code> indicates that the child was terminated by signal <code>N</code> (POSIX only).</p> </dd>
</dl>   <h2 id="windows-popen-helpers">Windows Popen Helpers</h2> <p>The <a class="reference internal" href="#subprocess.STARTUPINFO" title="subprocess.STARTUPINFO"><code>STARTUPINFO</code></a> class and following constants are only available on Windows.</p> <dl class="class"> <dt id="subprocess.STARTUPINFO">
<code>class subprocess.STARTUPINFO(*, dwFlags=0, hStdInput=None, hStdOutput=None, hStdError=None, wShowWindow=0, lpAttributeList=None)</code> </dt> <dd>
<p>Partial support of the Windows <a class="reference external" href="https://msdn.microsoft.com/en-us/library/ms686331(v=vs.85).aspx">STARTUPINFO</a> structure is used for <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> creation. The following attributes can be set by passing them as keyword-only arguments.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.7: </span>Keyword-only argument support was added.</p> </div> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.dwFlags">
<code>dwFlags</code> </dt> <dd>
<p>A bit field that determines whether certain <a class="reference internal" href="#subprocess.STARTUPINFO" title="subprocess.STARTUPINFO"><code>STARTUPINFO</code></a> attributes are used when the process creates a window.</p> <pre data-language="python">si = subprocess.STARTUPINFO()
si.dwFlags = subprocess.STARTF_USESTDHANDLES | subprocess.STARTF_USESHOWWINDOW
</pre> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.hStdInput">
<code>hStdInput</code> </dt> <dd>
<p>If <a class="reference internal" href="#subprocess.STARTUPINFO.dwFlags" title="subprocess.STARTUPINFO.dwFlags"><code>dwFlags</code></a> specifies <a class="reference internal" href="#subprocess.STARTF_USESTDHANDLES" title="subprocess.STARTF_USESTDHANDLES"><code>STARTF_USESTDHANDLES</code></a>, this attribute is the standard input handle for the process. If <a class="reference internal" href="#subprocess.STARTF_USESTDHANDLES" title="subprocess.STARTF_USESTDHANDLES"><code>STARTF_USESTDHANDLES</code></a> is not specified, the default for standard input is the keyboard buffer.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.hStdOutput">
<code>hStdOutput</code> </dt> <dd>
<p>If <a class="reference internal" href="#subprocess.STARTUPINFO.dwFlags" title="subprocess.STARTUPINFO.dwFlags"><code>dwFlags</code></a> specifies <a class="reference internal" href="#subprocess.STARTF_USESTDHANDLES" title="subprocess.STARTF_USESTDHANDLES"><code>STARTF_USESTDHANDLES</code></a>, this attribute is the standard output handle for the process. Otherwise, this attribute is ignored and the default for standard output is the console window’s buffer.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.hStdError">
<code>hStdError</code> </dt> <dd>
<p>If <a class="reference internal" href="#subprocess.STARTUPINFO.dwFlags" title="subprocess.STARTUPINFO.dwFlags"><code>dwFlags</code></a> specifies <a class="reference internal" href="#subprocess.STARTF_USESTDHANDLES" title="subprocess.STARTF_USESTDHANDLES"><code>STARTF_USESTDHANDLES</code></a>, this attribute is the standard error handle for the process. Otherwise, this attribute is ignored and the default for standard error is the console window’s buffer.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.wShowWindow">
<code>wShowWindow</code> </dt> <dd>
<p>If <a class="reference internal" href="#subprocess.STARTUPINFO.dwFlags" title="subprocess.STARTUPINFO.dwFlags"><code>dwFlags</code></a> specifies <a class="reference internal" href="#subprocess.STARTF_USESHOWWINDOW" title="subprocess.STARTF_USESHOWWINDOW"><code>STARTF_USESHOWWINDOW</code></a>, this attribute can be any of the values that can be specified in the <code>nCmdShow</code> parameter for the <a class="reference external" href="https://msdn.microsoft.com/en-us/library/ms633548(v=vs.85).aspx">ShowWindow</a> function, except for <code>SW_SHOWDEFAULT</code>. Otherwise, this attribute is ignored.</p> <p><a class="reference internal" href="#subprocess.SW_HIDE" title="subprocess.SW_HIDE"><code>SW_HIDE</code></a> is provided for this attribute. It is used when <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> is called with <code>shell=True</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="subprocess.STARTUPINFO.lpAttributeList">
<code>lpAttributeList</code> </dt> <dd>
<p>A dictionary of additional attributes for process creation as given in <code>STARTUPINFOEX</code>, see <a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms686880(v=vs.85).aspx">UpdateProcThreadAttribute</a>.</p> <p>Supported attributes:</p> <dl> <dt><strong>handle_list</strong></dt>
<dd>
<p>Sequence of handles that will be inherited. <em>close_fds</em> must be true if non-empty.</p> <p>The handles must be temporarily made inheritable by <a class="reference internal" href="os#os.set_handle_inheritable" title="os.set_handle_inheritable"><code>os.set_handle_inheritable()</code></a> when passed to the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor, else <a class="reference internal" href="exceptions#OSError" title="OSError"><code>OSError</code></a> will be raised with Windows error <code>ERROR_INVALID_PARAMETER</code> (87).</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>In a multithreaded process, use caution to avoid leaking handles that are marked inheritable when combining this feature with concurrent calls to other process creation functions that inherit all handles such as <a class="reference internal" href="os#os.system" title="os.system"><code>os.system()</code></a>. This also applies to standard handle redirection, which temporarily creates inheritable handles.</p> </div> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> </dd>
</dl>  <h3 id="windows-constants">Windows Constants</h3> <p>The <a class="reference internal" href="#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module exposes the following constants.</p> <dl class="data"> <dt id="subprocess.STD_INPUT_HANDLE">
<code>subprocess.STD_INPUT_HANDLE</code> </dt> <dd>
<p>The standard input device. Initially, this is the console input buffer, <code>CONIN$</code>.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.STD_OUTPUT_HANDLE">
<code>subprocess.STD_OUTPUT_HANDLE</code> </dt> <dd>
<p>The standard output device. Initially, this is the active console screen buffer, <code>CONOUT$</code>.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.STD_ERROR_HANDLE">
<code>subprocess.STD_ERROR_HANDLE</code> </dt> <dd>
<p>The standard error device. Initially, this is the active console screen buffer, <code>CONOUT$</code>.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.SW_HIDE">
<code>subprocess.SW_HIDE</code> </dt> <dd>
<p>Hides the window. Another window will be activated.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.STARTF_USESTDHANDLES">
<code>subprocess.STARTF_USESTDHANDLES</code> </dt> <dd>
<p>Specifies that the <a class="reference internal" href="#subprocess.STARTUPINFO.hStdInput" title="subprocess.STARTUPINFO.hStdInput"><code>STARTUPINFO.hStdInput</code></a>, <a class="reference internal" href="#subprocess.STARTUPINFO.hStdOutput" title="subprocess.STARTUPINFO.hStdOutput"><code>STARTUPINFO.hStdOutput</code></a>, and <a class="reference internal" href="#subprocess.STARTUPINFO.hStdError" title="subprocess.STARTUPINFO.hStdError"><code>STARTUPINFO.hStdError</code></a> attributes contain additional information.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.STARTF_USESHOWWINDOW">
<code>subprocess.STARTF_USESHOWWINDOW</code> </dt> <dd>
<p>Specifies that the <a class="reference internal" href="#subprocess.STARTUPINFO.wShowWindow" title="subprocess.STARTUPINFO.wShowWindow"><code>STARTUPINFO.wShowWindow</code></a> attribute contains additional information.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.CREATE_NEW_CONSOLE">
<code>subprocess.CREATE_NEW_CONSOLE</code> </dt> <dd>
<p>The new process has a new console, instead of inheriting its parent’s console (the default).</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.CREATE_NEW_PROCESS_GROUP">
<code>subprocess.CREATE_NEW_PROCESS_GROUP</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process group will be created. This flag is necessary for using <a class="reference internal" href="os#os.kill" title="os.kill"><code>os.kill()</code></a> on the subprocess.</p> <p>This flag is ignored if <a class="reference internal" href="#subprocess.CREATE_NEW_CONSOLE" title="subprocess.CREATE_NEW_CONSOLE"><code>CREATE_NEW_CONSOLE</code></a> is specified.</p> </dd>
</dl> <dl class="data"> <dt id="subprocess.ABOVE_NORMAL_PRIORITY_CLASS">
<code>subprocess.ABOVE_NORMAL_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have an above average priority.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.BELOW_NORMAL_PRIORITY_CLASS">
<code>subprocess.BELOW_NORMAL_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have a below average priority.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.HIGH_PRIORITY_CLASS">
<code>subprocess.HIGH_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have a high priority.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.IDLE_PRIORITY_CLASS">
<code>subprocess.IDLE_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have an idle (lowest) priority.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.NORMAL_PRIORITY_CLASS">
<code>subprocess.NORMAL_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have an normal priority. (default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.REALTIME_PRIORITY_CLASS">
<code>subprocess.REALTIME_PRIORITY_CLASS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will have realtime priority. You should almost never use REALTIME_PRIORITY_CLASS, because this interrupts system threads that manage mouse input, keyboard input, and background disk flushing. This class can be appropriate for applications that “talk” directly to hardware or that perform brief tasks that should have limited interruptions.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.CREATE_NO_WINDOW">
<code>subprocess.CREATE_NO_WINDOW</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will not create a window.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.DETACHED_PROCESS">
<code>subprocess.DETACHED_PROCESS</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process will not inherit its parent’s console. This value cannot be used with CREATE_NEW_CONSOLE.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.CREATE_DEFAULT_ERROR_MODE">
<code>subprocess.CREATE_DEFAULT_ERROR_MODE</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process does not inherit the error mode of the calling process. Instead, the new process gets the default error mode. This feature is particularly useful for multithreaded shell applications that run with hard errors disabled.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl> <dl class="data"> <dt id="subprocess.CREATE_BREAKAWAY_FROM_JOB">
<code>subprocess.CREATE_BREAKAWAY_FROM_JOB</code> </dt> <dd>
<p>A <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> <code>creationflags</code> parameter to specify that a new process is not associated with the job.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> </dd>
</dl>    <h2 id="call-function-trio">Older high-level API</h2> <p id="older-high-level-api">Prior to Python 3.5, these three functions comprised the high level API to subprocess. You can now use <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> in many cases, but lots of existing code calls these functions.</p> <dl class="function"> <dt id="subprocess.call">
<code>subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False, cwd=None, timeout=None, **other_popen_kwargs)</code> </dt> <dd>
<p>Run the command described by <em>args</em>. Wait for command to complete, then return the <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a> attribute.</p> <p>Code needing to capture stdout or stderr should use <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> instead:</p> <pre data-language="python">run(...).returncode
</pre> <p>To suppress stdout or stderr, supply a value of <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a>.</p> <p>The arguments shown above are merely some common ones. The full function signature is the same as that of the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor - this function passes all supplied arguments other than <em>timeout</em> directly through to that interface.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Do not use <code>stdout=PIPE</code> or <code>stderr=PIPE</code> with this function. The child process will block if it generates enough output to a pipe to fill up the OS pipe buffer as the pipes are not being read from.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span><em>timeout</em> was added.</p> </div> </dd>
</dl> <dl class="function"> <dt id="subprocess.check_call">
<code>subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False, cwd=None, timeout=None, **other_popen_kwargs)</code> </dt> <dd>
<p>Run command with arguments. Wait for command to complete. If the return code was zero then return, otherwise raise <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a>. The <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a> object will have the return code in the <a class="reference internal" href="#subprocess.CalledProcessError.returncode" title="subprocess.CalledProcessError.returncode"><code>returncode</code></a> attribute.</p> <p>Code needing to capture stdout or stderr should use <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> instead:</p> <pre data-language="python">run(..., check=True)
</pre> <p>To suppress stdout or stderr, supply a value of <a class="reference internal" href="#subprocess.DEVNULL" title="subprocess.DEVNULL"><code>DEVNULL</code></a>.</p> <p>The arguments shown above are merely some common ones. The full function signature is the same as that of the <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> constructor - this function passes all supplied arguments other than <em>timeout</em> directly through to that interface.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Do not use <code>stdout=PIPE</code> or <code>stderr=PIPE</code> with this function. The child process will block if it generates enough output to a pipe to fill up the OS pipe buffer as the pipes are not being read from.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span><em>timeout</em> was added.</p> </div> </dd>
</dl> <dl class="function"> <dt id="subprocess.check_output">
<code>subprocess.check_output(args, *, stdin=None, stderr=None, shell=False, cwd=None, encoding=None, errors=None, universal_newlines=None, timeout=None, text=None, **other_popen_kwargs)</code> </dt> <dd>
<p>Run command with arguments and return its output.</p> <p>If the return code was non-zero it raises a <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a>. The <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a> object will have the return code in the <a class="reference internal" href="#subprocess.CalledProcessError.returncode" title="subprocess.CalledProcessError.returncode"><code>returncode</code></a> attribute and any output in the <a class="reference internal" href="#subprocess.CalledProcessError.output" title="subprocess.CalledProcessError.output"><code>output</code></a> attribute.</p> <p>This is equivalent to:</p> <pre data-language="python">run(..., check=True, stdout=PIPE).stdout
</pre> <p>The arguments shown above are merely some common ones. The full function signature is largely the same as that of <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> - most arguments are passed directly through to that interface. One API deviation from <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> behavior exists: passing <code>input=None</code> will behave the same as <code>input=b''</code> (or <code>input=''</code>, depending on other arguments) rather than using the parent’s standard input file handle.</p> <p>By default, this function will return the data as encoded bytes. The actual encoding of the output data may depend on the command being invoked, so the decoding to text will often need to be handled at the application level.</p> <p>This behaviour may be overridden by setting <em>text</em>, <em>encoding</em>, <em>errors</em>, or <em>universal_newlines</em> to <code>True</code> as described in <a class="reference internal" href="#frequently-used-arguments"><span class="std std-ref">Frequently Used Arguments</span></a> and <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a>.</p> <p>To also capture standard error in the result, use <code>stderr=subprocess.STDOUT</code>:</p> <pre data-language="python">&gt;&gt;&gt; subprocess.check_output(
...     "ls non_existent_file; exit 0",
...     stderr=subprocess.STDOUT,
...     shell=True)
'ls: non_existent_file: No such file or directory\n'
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.1.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3: </span><em>timeout</em> was added.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.4: </span>Support for the <em>input</em> keyword argument was added.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span><em>encoding</em> and <em>errors</em> were added. See <a class="reference internal" href="#subprocess.run" title="subprocess.run"><code>run()</code></a> for details.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.7: </span><em>text</em> was added as a more readable alias for <em>universal_newlines</em>.</p> </div> </dd>
</dl>   <h2 id="subprocess-replacements">Replacing Older Functions with the subprocess Module</h2> <p id="replacing-older-functions-with-the-subprocess-module">In this section, “a becomes b” means that b can be used as a replacement for a.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>All “a” functions in this section fail (more or less) silently if the executed program cannot be found; the “b” replacements raise <a class="reference internal" href="exceptions#OSError" title="OSError"><code>OSError</code></a> instead.</p> <p>In addition, the replacements using <a class="reference internal" href="#subprocess.check_output" title="subprocess.check_output"><code>check_output()</code></a> will fail with a <a class="reference internal" href="#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code>CalledProcessError</code></a> if the requested operation produces a non-zero return code. The output is still available as the <a class="reference internal" href="#subprocess.CalledProcessError.output" title="subprocess.CalledProcessError.output"><code>output</code></a> attribute of the raised exception.</p> </div> <p>In the following examples, we assume that the relevant functions have already been imported from the <a class="reference internal" href="#module-subprocess" title="subprocess: Subprocess management."><code>subprocess</code></a> module.</p>  <h3 id="replacing-bin-sh-shell-command-substitution">Replacing <strong class="program">/bin/sh</strong> shell command substitution</h3> <pre data-language="bash">output=$(mycmd myarg)
</pre> <p>becomes:</p> <pre data-language="python">output = check_output(["mycmd", "myarg"])
</pre>   <h3 id="replacing-shell-pipeline">Replacing shell pipeline</h3> <pre data-language="bash">output=$(dmesg | grep hda)
</pre> <p>becomes:</p> <pre data-language="python">p1 = Popen(["dmesg"], stdout=PIPE)
p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0]
</pre> <p>The <code>p1.stdout.close()</code> call after starting the p2 is important in order for p1 to receive a SIGPIPE if p2 exits before p1.</p> <p>Alternatively, for trusted input, the shell’s own pipeline support may still be used directly:</p> <pre data-language="bash">output=$(dmesg | grep hda)
</pre> <p>becomes:</p> <pre data-language="python">output=check_output("dmesg | grep hda", shell=True)
</pre>   <h3 id="replacing-os-system">Replacing <a class="reference internal" href="os#os.system" title="os.system"><code>os.system()</code></a>
</h3> <pre data-language="python">sts = os.system("mycmd" + " myarg")
# becomes
sts = call("mycmd" + " myarg", shell=True)
</pre> <p>Notes:</p> <ul class="simple"> <li>Calling the program through the shell is usually not required.</li> </ul> <p>A more realistic example would look like this:</p> <pre data-language="python">try:
    retcode = call("mycmd" + " myarg", shell=True)
    if retcode &lt; 0:
        print("Child was terminated by signal", -retcode, file=sys.stderr)
    else:
        print("Child returned", retcode, file=sys.stderr)
except OSError as e:
    print("Execution failed:", e, file=sys.stderr)
</pre>   <h3 id="replacing-the-os-spawn-family">Replacing the <a class="reference internal" href="os#os.spawnl" title="os.spawnl"><code>os.spawn</code></a> family</h3> <p>P_NOWAIT example:</p> <pre data-language="python">pid = os.spawnlp(os.P_NOWAIT, "/bin/mycmd", "mycmd", "myarg")
==&gt;
pid = Popen(["/bin/mycmd", "myarg"]).pid
</pre> <p>P_WAIT example:</p> <pre data-language="python">retcode = os.spawnlp(os.P_WAIT, "/bin/mycmd", "mycmd", "myarg")
==&gt;
retcode = call(["/bin/mycmd", "myarg"])
</pre> <p>Vector example:</p> <pre data-language="python">os.spawnvp(os.P_NOWAIT, path, args)
==&gt;
Popen([path] + args[1:])
</pre> <p>Environment example:</p> <pre data-language="python">os.spawnlpe(os.P_NOWAIT, "/bin/mycmd", "mycmd", "myarg", env)
==&gt;
Popen(["/bin/mycmd", "myarg"], env={"PATH": "/usr/bin"})
</pre>   <h3 id="replacing-os-popen-os-popen2-os-popen3">Replacing <a class="reference internal" href="os#os.popen" title="os.popen"><code>os.popen()</code></a>, <code>os.popen2()</code>, <code>os.popen3()</code>
</h3> <pre data-language="python">(child_stdin, child_stdout) = os.popen2(cmd, mode, bufsize)
==&gt;
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdin, child_stdout) = (p.stdin, p.stdout)
</pre> <pre data-language="python">(child_stdin,
 child_stdout,
 child_stderr) = os.popen3(cmd, mode, bufsize)
==&gt;
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True)
(child_stdin,
 child_stdout,
 child_stderr) = (p.stdin, p.stdout, p.stderr)
</pre> <pre data-language="python">(child_stdin, child_stdout_and_stderr) = os.popen4(cmd, mode, bufsize)
==&gt;
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, stderr=STDOUT, close_fds=True)
(child_stdin, child_stdout_and_stderr) = (p.stdin, p.stdout)
</pre> <p>Return code handling translates as follows:</p> <pre data-language="python">pipe = os.popen(cmd, 'w')
...
rc = pipe.close()
if rc is not None and rc &gt;&gt; 8:
    print("There were some errors")
==&gt;
process = Popen(cmd, stdin=PIPE)
...
process.stdin.close()
if process.wait() != 0:
    print("There were some errors")
</pre>   <h3 id="replacing-functions-from-the-popen2-module">Replacing functions from the <code>popen2</code> module</h3> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If the cmd argument to popen2 functions is a string, the command is executed through /bin/sh. If it is a list, the command is directly executed.</p> </div> <pre data-language="python">(child_stdout, child_stdin) = popen2.popen2("somestring", bufsize, mode)
==&gt;
p = Popen("somestring", shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdout, child_stdin) = (p.stdout, p.stdin)
</pre> <pre data-language="python">(child_stdout, child_stdin) = popen2.popen2(["mycmd", "myarg"], bufsize, mode)
==&gt;
p = Popen(["mycmd", "myarg"], bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdout, child_stdin) = (p.stdout, p.stdin)
</pre> <p><code>popen2.Popen3</code> and <code>popen2.Popen4</code> basically work as <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>subprocess.Popen</code></a>, except that:</p> <ul class="simple"> <li>
<a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> raises an exception if the execution fails.</li> <li>The <em>capturestderr</em> argument is replaced with the <em>stderr</em> argument.</li> <li>
<code>stdin=PIPE</code> and <code>stdout=PIPE</code> must be specified.</li> <li>popen2 closes all file descriptors by default, but you have to specify <code>close_fds=True</code> with <a class="reference internal" href="#subprocess.Popen" title="subprocess.Popen"><code>Popen</code></a> to guarantee this behavior on all platforms or past Python versions.</li> </ul>    <h2 id="legacy-shell-invocation-functions">Legacy Shell Invocation Functions</h2> <p>This module also provides the following legacy functions from the 2.x <code>commands</code> module. These operations implicitly invoke the system shell and none of the guarantees described above regarding security and exception handling consistency are valid for these functions.</p> <dl class="function"> <dt id="subprocess.getstatusoutput">
<code>subprocess.getstatusoutput(cmd)</code> </dt> <dd>
<p>Return <code>(exitcode, output)</code> of executing <em>cmd</em> in a shell.</p> <p>Execute the string <em>cmd</em> in a shell with <code>Popen.check_output()</code> and return a 2-tuple <code>(exitcode, output)</code>. The locale encoding is used; see the notes on <a class="reference internal" href="#frequently-used-arguments"><span class="std std-ref">Frequently Used Arguments</span></a> for more details.</p> <p>A trailing newline is stripped from the output. The exit code for the command can be interpreted as the return code of subprocess. Example:</p> <pre data-language="python">&gt;&gt;&gt; subprocess.getstatusoutput('ls /bin/ls')
(0, '/bin/ls')
&gt;&gt;&gt; subprocess.getstatusoutput('cat /bin/junk')
(1, 'cat: /bin/junk: No such file or directory')
&gt;&gt;&gt; subprocess.getstatusoutput('/bin/junk')
(127, 'sh: /bin/junk: not found')
&gt;&gt;&gt; subprocess.getstatusoutput('/bin/kill $$')
(-15, '')
</pre> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX &amp; Windows.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3.4: </span>Windows support was added.</p> <p>The function now returns (exitcode, output) instead of (status, output) as it did in Python 3.3.3 and earlier. exitcode has the same value as <a class="reference internal" href="#subprocess.Popen.returncode" title="subprocess.Popen.returncode"><code>returncode</code></a>.</p> </div> </dd>
</dl> <dl class="function"> <dt id="subprocess.getoutput">
<code>subprocess.getoutput(cmd)</code> </dt> <dd>
<p>Return output (stdout and stderr) of executing <em>cmd</em> in a shell.</p> <p>Like <a class="reference internal" href="#subprocess.getstatusoutput" title="subprocess.getstatusoutput"><code>getstatusoutput()</code></a>, except the exit code is ignored and the return value is a string containing the command’s output. Example:</p> <pre data-language="python">&gt;&gt;&gt; subprocess.getoutput('ls /bin/ls')
'/bin/ls'
</pre> <p class="availability"><a class="reference internal" href="https://docs.python.org/3.9/library/intro.html#availability"><span class="std std-ref">Availability</span></a>: POSIX &amp; Windows.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.3.4: </span>Windows support added</p> </div> </dd>
</dl>   <h2 id="notes">Notes</h2>  <h3 id="converting-argument-sequence">Converting an argument sequence to a string on Windows</h3> <p id="converting-an-argument-sequence-to-a-string-on-windows">On Windows, an <em>args</em> sequence is converted to a string that can be parsed using the following rules (which correspond to the rules used by the MS C runtime):</p> <ol class="arabic simple"> <li>Arguments are delimited by white space, which is either a space or a tab.</li> <li>A string surrounded by double quotation marks is interpreted as a single argument, regardless of white space contained within. A quoted string can be embedded in an argument.</li> <li>A double quotation mark preceded by a backslash is interpreted as a literal double quotation mark.</li> <li>Backslashes are interpreted literally, unless they immediately precede a double quotation mark.</li> <li>If backslashes immediately precede a double quotation mark, every pair of backslashes is interpreted as a literal backslash. If the number of backslashes is odd, the last backslash escapes the next double quotation mark as described in rule 3.</li> </ol> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt>
 <a class="reference internal" href="shlex#module-shlex" title="shlex: Simple lexical analysis for Unix shell-like languages."><code>shlex</code></a>
</dt>
<dd>
<p>Module which provides function to parse and escape command lines.</p> </dd> </dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2021 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/3.9/library/subprocess.html" class="_attribution-link">https://docs.python.org/3.9/library/subprocess.html</a>
  </p>
</div>
