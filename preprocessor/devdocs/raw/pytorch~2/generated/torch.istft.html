<h1 id="torch-istft">torch.istft</h1> <dl class="py function"> <dt class="sig sig-object py" id="torch.istft">
<code>torch.istft(input, n_fft, hop_length=None, win_length=None, window=None, center=True, normalized=False, onesided=None, length=None, return_complex=False) → Tensor:</code> </dt> <dd>
<p>Inverse short time Fourier Transform. This is expected to be the inverse of <a class="reference internal" href="torch.stft#torch.stft" title="torch.stft"><code>stft()</code></a>.</p> <p>It has the same parameters (+ additional optional parameter of <code>length</code>) and it should return the least squares estimation of the original signal. The algorithm will check using the NOLA condition ( nonzero overlap).</p> <p>Important consideration in the parameters <code>window</code> and <code>center</code> so that the envelop created by the summation of all the windows is never zero at certain point in time. Specifically, <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>t</mi><mo>=</mo><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><mi mathvariant="normal">∞</mi></msubsup><mi mathvariant="normal">∣</mi><mi>w</mi><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup><mo stretchy="false">[</mo><mi>n</mi><mo>−</mo><mi>t</mi><mo>×</mo><mi>h</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">_</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mo stretchy="false">]</mo><menclose notation="updiagonalstrike"><mo lspace="0em" rspace="0em">=</mo></menclose><mn>0</mn></mrow><annotation encoding="application/x-tex">\sum_{t=-\infty}^{\infty} |w|^2[n-t\times hop\_length] \cancel{=} 0</annotation></semantics></math></span></span></span>.</p> <p>Since <a class="reference internal" href="torch.stft#torch.stft" title="torch.stft"><code>stft()</code></a> discards elements at the end of the signal if they do not fit in a frame, <code>istft</code> may return a shorter signal than the original signal (can occur if <code>center</code> is False since the signal isn’t padded). If <code>length</code> is given in the arguments and is longer than expected, <code>istft</code> will pad zeros to the end of the returned signal.</p> <p>If <code>center</code> is <code>True</code>, then there will be padding e.g. <code>'constant'</code>, <code>'reflect'</code>, etc. Left padding can be trimmed off exactly because they can be calculated but right padding cannot be calculated without additional information.</p> <p>Example: Suppose the last window is: <code>[17, 18, 0, 0, 0]</code> vs <code>[18, 0, 0, 0, 0]</code></p> <p>The <code>n_fft</code>, <code>hop_length</code>, <code>win_length</code> are all the same which prevents the calculation of right padding. These additional values could be zeros or a reflection of the signal so providing <code>length</code> could be useful. If <code>length</code> is <code>None</code> then padding will be aggressively removed (some loss of signal).</p> <p>[1] D. W. Griffin and J. S. Lim, “Signal estimation from modified short-time Fourier transform,” IEEE Trans. ASSP, vol.32, no.2, pp.236-243, Apr. 1984.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li>
<p><strong>input</strong> (<a class="reference internal" href="../tensors#torch.Tensor" title="torch.Tensor">Tensor</a>) – </p>
<p>The input tensor. Expected to be in the format of <a class="reference internal" href="torch.stft#torch.stft" title="torch.stft"><code>stft()</code></a>, output. That is a complex tensor of shape <code>(B?, N, T)</code> where</p> <ul> <li>
<code>B?</code> is an optional batch dimension</li> <li>
<code>N</code> is the number of frequency samples, <code>(n_fft // 2) + 1</code> for onesided input, or otherwise <code>n_fft</code>.</li> <li>
<code>T</code> is the number of frames, <code>1 + length // hop_length</code> for centered stft, or <code>1 + (length - n_fft) // hop_length</code> otherwise.</li> </ul> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.0: </span>Real datatype inputs are no longer supported. Input must now have a complex datatype, as returned by <code>stft(..., return_complex=True)</code>.</p> </div> </li> <li>
<strong>n_fft</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a>) – Size of Fourier transform</li> <li>
<strong>hop_length</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a><em>]</em>) – The distance between neighboring sliding window frames. (Default: <code>n_fft // 4</code>)</li> <li>
<strong>win_length</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a><em>]</em>) – The size of window frame and STFT filter. (Default: <code>n_fft</code>)</li> <li>
<strong>window</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="../tensors#torch.Tensor" title="torch.Tensor">torch.Tensor</a><em>]</em>) – The optional window function. Shape must be 1d and <code>&lt;= n_fft</code> (Default: <code>torch.ones(win_length)</code>)</li> <li>
<strong>center</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a>) – Whether <code>input</code> was padded on both sides so that the <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span></span></span>-th frame is centered at time <span class="math"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>×</mo><mtext>hop_length</mtext></mrow><annotation encoding="application/x-tex">t \times \text{hop\_length}</annotation></semantics></math></span></span></span>. (Default: <code>True</code>)</li> <li>
<strong>normalized</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a>) – Whether the STFT was normalized. (Default: <code>False</code>)</li> <li>
<strong>onesided</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a><em>]</em>) – Whether the STFT was onesided. (Default: <code>True</code> if <code>n_fft != fft_size</code> in the input size)</li> <li>
<strong>length</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)">int</a><em>]</em>) – The amount to trim the signal by (i.e. the original signal length). Defaults to <code>(T - 1) * hop_length</code> for centered stft, or <code>n_fft + (T - 1) * hop_length</code> otherwise, where <code>T</code> is the number of input frames.</li> <li>
<strong>return_complex</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a><em>]</em>) – Whether the output should be complex, or if the input should be assumed to derive from a real signal and window. Note that this is incompatible with <code>onesided=True</code>. (Default: <code>False</code>)</li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">

<dl class="simple"> <dt>
<code>Least squares estimation of the original signal of shape (B?, length) where</code> </dt>
<dd>
<p><code>B?</code> is an optional batch dimension from the input tensor.</p> </dd> </dl> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference internal" href="../tensors#torch.Tensor" title="torch.Tensor">Tensor</a></p> </dd> </dl> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024, PyTorch Contributors<br>PyTorch has a BSD-style license, as found in the <a href="https://github.com/pytorch/pytorch/blob/main/LICENSE">LICENSE</a> file.<br>
    <a href="https://pytorch.org/docs/2.1/generated/torch.istft.html" class="_attribution-link">https://pytorch.org/docs/2.1/generated/torch.istft.html</a>
  </p>
</div>
