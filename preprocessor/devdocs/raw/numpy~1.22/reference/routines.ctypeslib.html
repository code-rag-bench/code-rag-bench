<h1>C-Types Foreign Function Interface (numpy.ctypeslib)</h1> <dl class="py function"> <dt class="sig sig-object py" id="numpy.ctypeslib.as_array"> <span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">as_array</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">shape</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.22.0/numpy/ctypeslib.py#L509-L527"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Create a numpy array from a ctypes array or POINTER.</p> <p>The numpy array shares the memory with the ctypes object.</p> <p>The shape parameter must be given if converting from a ctypes POINTER. The shape parameter is ignored if converting from a ctypes array</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="numpy.ctypeslib.as_ctypes"> <span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">as_ctypes</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.22.0/numpy/ctypeslib.py#L530-L548"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Create and return a ctypes object from a numpy array. Actually anything that exposes the __array_interface__ is accepted.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="numpy.ctypeslib.as_ctypes_type"> <span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">as_ctypes_type</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">dtype</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.22.0/numpy/ctypeslib.py#L468-L506"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Convert a dtype into a ctypes type.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>dtype</strong><span class="classifier">dtype</span>
</dt>
<dd>
<p>The dtype to convert</p> </dd> </dl> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<dl class="simple"> <dt>ctype</dt>
<dd>
<p>A ctype scalar, union, array, or struct</p> </dd> </dl> </dd> <dt class="field-odd">Raises</dt> <dd class="field-odd">
<dl class="simple"> <dt>NotImplementedError</dt>
<dd>
<p>If the conversion is not possible</p> </dd> </dl> </dd> </dl> <h4 class="rubric">Notes</h4> <p>This function does not losslessly round-trip in either direction.</p> <p><code>np.dtype(as_ctypes_type(dt))</code> will:</p>  <ul class="simple"> <li>insert padding fields</li> <li>reorder fields to be sorted by offset</li> <li>discard field titles</li> </ul>  <p><code>as_ctypes_type(np.dtype(ctype))</code> will:</p>  <ul class="simple"> <li>discard the class names of <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.Structure" title="(in Python v3.11)"><code>ctypes.Structure</code></a>s and <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.Union" title="(in Python v3.11)"><code>ctypes.Union</code></a>s</li> <li>convert single-element <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.Union" title="(in Python v3.11)"><code>ctypes.Union</code></a>s into single-element <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.Structure" title="(in Python v3.11)"><code>ctypes.Structure</code></a>s</li> <li>insert padding fields</li> </ul>  </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="numpy.ctypeslib.load_library"> <span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">load_library</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">libname</span></em>, <em class="sig-param"><span class="n">loader_path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.22.0/numpy/ctypeslib.py#L90-L163"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>It is possible to load a library using</p> <pre data-language="python">&gt;&gt;&gt; lib = ctypes.cdll[&lt;full_path_name&gt;] 
</pre> <p>But there are cross-platform considerations, such as library file extensions, plus the fact Windows will just load the first library it finds with that name. NumPy supplies the load_library function as a convenience.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 1.20.0: </span>Allow libname and loader_path to take any <a class="reference external" href="https://docs.python.org/dev/glossary.html#term-path-like-object" title="(in Python v3.11)"><span>path-like object</span></a>.</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>libname</strong><span class="classifier">path-like</span>
</dt>
<dd>
<p>Name of the library, which can have ‘lib’ as a prefix, but without an extension.</p> </dd> <dt>
<strong>loader_path</strong><span class="classifier">path-like</span>
</dt>
<dd>
<p>Where the library can be found.</p> </dd> </dl> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<dl class="simple"> <dt>
<strong>ctypes.cdll[libpath]</strong><span class="classifier">library object</span>
</dt>
<dd>
<p>A ctypes library object</p> </dd> </dl> </dd> <dt class="field-odd">Raises</dt> <dd class="field-odd">
<dl class="simple"> <dt>OSError</dt>
<dd>
<p>If there is no library with the expected extension, or the library is defective and cannot be loaded.</p> </dd> </dl> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="numpy.ctypeslib.ndpointer"> <span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">ndpointer</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ndim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">shape</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.22.0/numpy/ctypeslib.py#L235-L350"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Array-checking restype/argtypes.</p> <p>An ndpointer instance is used to describe an ndarray in restypes and argtypes specifications. This approach is more flexible than using, for example, <code>POINTER(c_double)</code>, since several restrictions can be specified, which are verified upon calling the ctypes function. These include data type, number of dimensions, shape and flags. If a given array does not satisfy the specified restrictions, a <code>TypeError</code> is raised.</p> <dl class="field-list"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<dl> <dt>
<strong>dtype</strong><span class="classifier">data-type, optional</span>
</dt>
<dd>
<p>Array data-type.</p> </dd> <dt>
<strong>ndim</strong><span class="classifier">int, optional</span>
</dt>
<dd>
<p>Number of array dimensions.</p> </dd> <dt>
<strong>shape</strong><span class="classifier">tuple of ints, optional</span>
</dt>
<dd>
<p>Array shape.</p> </dd> <dt>
<strong>flags</strong><span class="classifier">str or tuple of str</span>
</dt>
<dd>
<p>Array flags; may be one or more of:</p>  <ul class="simple"> <li>C_CONTIGUOUS / C / CONTIGUOUS</li> <li>F_CONTIGUOUS / F / FORTRAN</li> <li>OWNDATA / O</li> <li>WRITEABLE / W</li> <li>ALIGNED / A</li> <li>WRITEBACKIFCOPY / X</li> <li>UPDATEIFCOPY / U</li> </ul>  </dd> </dl> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<dl class="simple"> <dt>
<strong>klass</strong><span class="classifier">ndpointer type object</span>
</dt>
<dd>
<p>A type object, which is an <code>_ndtpr</code> instance containing dtype, ndim, shape and flags information.</p> </dd> </dl> </dd> <dt class="field-odd">Raises</dt> <dd class="field-odd">
<dl class="simple"> <dt>TypeError</dt>
<dd>
<p>If a given array does not satisfy the specified restrictions.</p> </dd> </dl> </dd> </dl> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; clib.somefunc.argtypes = [np.ctypeslib.ndpointer(dtype=np.float64,
...                                                  ndim=1,
...                                                  flags='C_CONTIGUOUS')]
... 
&gt;&gt;&gt; clib.somefunc(np.array([1, 2, 3], dtype=np.float64))
... 
</pre> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="numpy.ctypeslib.c_intp"> <em class="property">class </em><span class="sig-prename descclassname">numpy.ctypeslib.</span><span class="sig-name descname">c_intp</span>
</dt> <dd>
<p>A <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#module-ctypes" title="(in Python v3.11)"><code>ctypes</code></a> signed integer type of the same size as <a class="reference internal" href="arrays.scalars#numpy.intp" title="numpy.intp"><code>numpy.intp</code></a>.</p> <p>Depending on the platform, it can be an alias for either <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.c_int" title="(in Python v3.11)"><code>c_int</code></a>, <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.c_long" title="(in Python v3.11)"><code>c_long</code></a> or <a class="reference external" href="https://docs.python.org/dev/library/ctypes.html#ctypes.c_longlong" title="(in Python v3.11)"><code>c_longlong</code></a>.</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2021 NumPy Developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://numpy.org/doc/1.22/reference/routines.ctypeslib.html" class="_attribution-link">https://numpy.org/doc/1.22/reference/routines.ctypeslib.html</a>
  </p>
</div>
