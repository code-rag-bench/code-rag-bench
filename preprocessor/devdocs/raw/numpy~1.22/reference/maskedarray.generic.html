<h1>The numpy.ma module</h1> <section id="rationale"> <h2>Rationale</h2> <p>Masked arrays are arrays that may have missing or invalid entries. The <a class="reference internal" href="#module-numpy.ma" title="numpy.ma"><code>numpy.ma</code></a> module provides a nearly work-alike replacement for numpy that supports data arrays with masks.</p> </section> <section id="what-is-a-masked-array"> <h2>What is a masked array?</h2> <p>In many circumstances, datasets can be incomplete or tainted by the presence of invalid data. For example, a sensor may have failed to record a data, or recorded an invalid value. The <a class="reference internal" href="#module-numpy.ma" title="numpy.ma"><code>numpy.ma</code></a> module provides a convenient way to address this issue, by introducing masked arrays.</p> <p>A masked array is the combination of a standard <a class="reference internal" href="generated/numpy.ndarray#numpy.ndarray" title="numpy.ndarray"><code>numpy.ndarray</code></a> and a mask. A mask is either <a class="reference internal" href="maskedarray.baseclass#numpy.ma.nomask" title="numpy.ma.nomask"><code>nomask</code></a>, indicating that no value of the associated array is invalid, or an array of booleans that determines for each element of the associated array whether the value is valid or not. When an element of the mask is <code>False</code>, the corresponding element of the associated array is valid and is said to be unmasked. When an element of the mask is <code>True</code>, the corresponding element of the associated array is said to be masked (invalid).</p> <p>The package ensures that masked entries are not used in computations.</p> <p>As an illustration, letâ€™s consider the following dataset:</p> <pre data-language="python">&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import numpy.ma as ma
&gt;&gt;&gt; x = np.array([1, 2, 3, -1, 5])
</pre> <p>We wish to mark the fourth entry as invalid. The easiest is to create a masked array:</p> <pre data-language="python">&gt;&gt;&gt; mx = ma.masked_array(x, mask=[0, 0, 0, 1, 0])
</pre> <p>We can now compute the mean of the dataset, without taking the invalid data into account:</p> <pre data-language="python">&gt;&gt;&gt; mx.mean()
2.75
</pre> </section> <section id="id1"> <h2>The numpy.ma module</h2> <p>The main feature of the <a class="reference internal" href="#module-numpy.ma" title="numpy.ma"><code>numpy.ma</code></a> module is the <a class="reference internal" href="maskedarray.baseclass#numpy.ma.MaskedArray" title="numpy.ma.MaskedArray"><code>MaskedArray</code></a> class, which is a subclass of <a class="reference internal" href="generated/numpy.ndarray#numpy.ndarray" title="numpy.ndarray"><code>numpy.ndarray</code></a>. The class, its attributes and methods are described in more details in the <a class="reference internal" href="maskedarray.baseclass#maskedarray-baseclass"><span class="std std-ref">MaskedArray class</span></a> section.</p> <p>The <a class="reference internal" href="#module-numpy.ma" title="numpy.ma"><code>numpy.ma</code></a> module can be used as an addition to <a class="reference internal" href="index#module-numpy" title="numpy"><code>numpy</code></a>:</p> <pre data-language="python">&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import numpy.ma as ma
</pre> <p>To create an array with the second element invalid, we would do:</p> <pre data-language="python">&gt;&gt;&gt; y = ma.array([1, 2, 3], mask = [0, 1, 0])
</pre> <p>To create a masked array where all values close to 1.e20 are invalid, we would do:</p> <pre data-language="python">&gt;&gt;&gt; z = ma.masked_values([1.0, 1.e20, 3.0, 4.0], 1.e20)
</pre> <p>For a complete discussion of creation methods for masked arrays please see section <a class="reference internal" href="#maskedarray-generic-constructing"><span class="std std-ref">Constructing masked arrays</span></a>.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2021 NumPy Developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://numpy.org/doc/1.22/reference/maskedarray.generic.html" class="_attribution-link">https://numpy.org/doc/1.22/reference/maskedarray.generic.html</a>
  </p>
</div>
