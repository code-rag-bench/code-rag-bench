<h1 id="geographic-database-functions">Geographic Database Functions</h1> <p id="s-module-django.contrib.gis.db.models.functions">The functions documented on this page allow users to access geographic database functions to be used in annotations, aggregations, or filters in Django.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.gis.db.models.functions import Length
&gt;&gt;&gt; Track.objects.annotate(length=Length('line')).filter(length__gt=100)
</pre> <p>Not all backends support all functions, so refer to the documentation of each function to see if your database backend supports the function you want to use. If you call a geographic function on a backend that doesn’t support it, you’ll get a <code>NotImplementedError</code> exception.</p> <p>Function’s summary:</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Measurement</th> <th class="head">Relationships</th> <th class="head">Operations</th> <th class="head">Editors</th> <th class="head">Output format</th> <th class="head">Miscellaneous</th> </tr> </thead>  <tr>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Area" title="django.contrib.gis.db.models.functions.Area"><code>Area</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Azimuth" title="django.contrib.gis.db.models.functions.Azimuth"><code>Azimuth</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Difference" title="django.contrib.gis.db.models.functions.Difference"><code>Difference</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.ForcePolygonCW" title="django.contrib.gis.db.models.functions.ForcePolygonCW"><code>ForcePolygonCW</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsGeoJSON" title="django.contrib.gis.db.models.functions.AsGeoJSON"><code>AsGeoJSON</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code>IsValid</code></a></td> </tr> <tr>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Distance" title="django.contrib.gis.db.models.functions.Distance"><code>Distance</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.BoundingCircle" title="django.contrib.gis.db.models.functions.BoundingCircle"><code>BoundingCircle</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Intersection" title="django.contrib.gis.db.models.functions.Intersection"><code>Intersection</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.MakeValid" title="django.contrib.gis.db.models.functions.MakeValid"><code>MakeValid</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsGML" title="django.contrib.gis.db.models.functions.AsGML"><code>AsGML</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.MemSize" title="django.contrib.gis.db.models.functions.MemSize"><code>MemSize</code></a></td> </tr> <tr>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.GeometryDistance" title="django.contrib.gis.db.models.functions.GeometryDistance"><code>GeometryDistance</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Centroid" title="django.contrib.gis.db.models.functions.Centroid"><code>Centroid</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.SymDifference" title="django.contrib.gis.db.models.functions.SymDifference"><code>SymDifference</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Reverse" title="django.contrib.gis.db.models.functions.Reverse"><code>Reverse</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsKML" title="django.contrib.gis.db.models.functions.AsKML"><code>AsKML</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.NumGeometries" title="django.contrib.gis.db.models.functions.NumGeometries"><code>NumGeometries</code></a></td> </tr> <tr>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Length" title="django.contrib.gis.db.models.functions.Length"><code>Length</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Envelope" title="django.contrib.gis.db.models.functions.Envelope"><code>Envelope</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Union" title="django.contrib.gis.db.models.functions.Union"><code>Union</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Scale" title="django.contrib.gis.db.models.functions.Scale"><code>Scale</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsSVG" title="django.contrib.gis.db.models.functions.AsSVG"><code>AsSVG</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.NumPoints" title="django.contrib.gis.db.models.functions.NumPoints"><code>NumPoints</code></a></td> </tr> <tr>
<td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Perimeter" title="django.contrib.gis.db.models.functions.Perimeter"><code>Perimeter</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.LineLocatePoint" title="django.contrib.gis.db.models.functions.LineLocatePoint"><code>LineLocatePoint</code></a></td> <td> </td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.SnapToGrid" title="django.contrib.gis.db.models.functions.SnapToGrid"><code>SnapToGrid</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsWKB" title="django.contrib.gis.db.models.functions.AsWKB"><code>AsWKB</code></a></td> <td> </td> </tr> <tr>
<td></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.PointOnSurface" title="django.contrib.gis.db.models.functions.PointOnSurface"><code>PointOnSurface</code></a></td> <td> </td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Transform" title="django.contrib.gis.db.models.functions.Transform"><code>Transform</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.AsWKT" title="django.contrib.gis.db.models.functions.AsWKT"><code>AsWKT</code></a></td> <td> </td> </tr> <tr>
<td></td> <td> </td> <td> </td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.Translate" title="django.contrib.gis.db.models.functions.Translate"><code>Translate</code></a></td> <td><a class="reference internal" href="#django.contrib.gis.db.models.functions.GeoHash" title="django.contrib.gis.db.models.functions.GeoHash"><code>GeoHash</code></a></td> <td> </td> </tr>  </table>  <h2 id="area"><code>Area</code></h2> <dl class="class" id="s-area"> <dt id="django.contrib.gis.db.models.functions.Area">
<code>class Area(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-polygon-property-functions.html#function_st-area">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_Area.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the area of the field as an <a class="reference internal" href="measure#django.contrib.gis.measure.Area" title="django.contrib.gis.measure.Area"><code>Area</code></a> measure.</p> <p>MySQL and SpatiaLite without LWGEOM/RTTOPO don’t support area calculations on geographic SRSes.</p>   <h2 id="asgeojson"><code>AsGeoJSON</code></h2> <dl class="class" id="s-asgeojson"> <dt id="django.contrib.gis.db.models.functions.AsGeoJSON">
<code>class AsGeoJSON(expression, bbox=False, crs=False, precision=8, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB (≥ 10.2.4), <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-geojson-functions.html#function_st-asgeojson">MySQL</a> (≥ 5.7.5), Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsGeoJSON.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://geojson.org/">GeoJSON</a> representation of the geometry. Note that the result is not a complete GeoJSON structure but only the <code>geometry</code> key content of a GeoJSON structure. See also <a class="reference internal" href="serializers"><span class="doc">GeoJSON Serializer</span></a>.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; City.objects.annotate(json=AsGeoJSON('point')).get(name='Chicago').json
{"type":"Point","coordinates":[-87.65018,41.85039]}
</pre> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Keyword Argument</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><code>bbox</code></td> <td>Set this to <code>True</code> if you want the bounding box to be included in the returned GeoJSON. Ignored on Oracle.</td> </tr> <tr>
<td><code>crs</code></td> <td>Set this to <code>True</code> if you want the coordinate reference system to be included in the returned GeoJSON. Ignored on MySQL and Oracle.</td> </tr> <tr>
<td><code>precision</code></td> <td>It may be used to specify the number of significant digits for the coordinates in the GeoJSON representation – the default value is 8. Ignored on Oracle.</td> </tr>  </table>   <h2 id="asgml"><code>AsGML</code></h2> <dl class="class" id="s-asgml"> <dt id="django.contrib.gis.db.models.functions.AsGML">
<code>class AsGML(expression, version=2, precision=8, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsGML.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://en.wikipedia.org/wiki/Geography_Markup_Language">Geographic Markup Language (GML)</a> representation of the geometry.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; qs = Zipcode.objects.annotate(gml=AsGML('poly'))
&gt;&gt;&gt; print(qs[0].gml)
&lt;gml:Polygon srsName="EPSG:4326"&gt;&lt;gml:OuterBoundaryIs&gt;-147.78711,70.245363 ...
-147.78711,70.245363&lt;/gml:OuterBoundaryIs&gt;&lt;/gml:Polygon&gt;
</pre> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Keyword Argument</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><code>precision</code></td> <td>Specifies the number of significant digits for the coordinates in the GML representation – the default value is 8. Ignored on Oracle.</td> </tr> <tr>
<td><code>version</code></td> <td>Specifies the GML version to use: 2 (default) or 3.</td> </tr>  </table>   <h2 id="askml"><code>AsKML</code></h2> <dl class="class" id="s-askml"> <dt id="django.contrib.gis.db.models.functions.AsKML">
<code>class AsKML(expression, precision=8, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_AsKML.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://developers.google.com/kml/documentation/">Keyhole Markup Language (KML)</a> representation of the geometry.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; qs = Zipcode.objects.annotate(kml=AsKML('poly'))
&gt;&gt;&gt; print(qs[0].kml)
&lt;Polygon&gt;&lt;outerBoundaryIs&gt;&lt;LinearRing&gt;&lt;coordinates&gt;-103.04135,36.217596,0 ...
-103.04135,36.217596,0&lt;/coordinates&gt;&lt;/LinearRing&gt;&lt;/outerBoundaryIs&gt;&lt;/Polygon&gt;
</pre> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Keyword Argument</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><code>precision</code></td> <td>This keyword may be used to specify the number of significant digits for the coordinates in the KML representation – the default value is 8.</td> </tr>  </table>   <h2 id="assvg"><code>AsSVG</code></h2> <dl class="class" id="s-assvg"> <dt id="django.contrib.gis.db.models.functions.AsSVG">
<code>class AsSVG(expression, relative=False, precision=8, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_AsSVG.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://www.w3.org/Graphics/SVG/">Scalable Vector Graphics (SVG)</a> representation of the geometry.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Keyword Argument</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><code>relative</code></td> <td>If set to <code>True</code>, the path data will be implemented in terms of relative moves. Defaults to <code>False</code>, meaning that absolute moves are used instead.</td> </tr> <tr>
<td><code>precision</code></td> <td>This keyword may be used to specify the number of significant digits for the coordinates in the SVG representation – the default value is 8.</td> </tr>  </table>   <h2 id="aswkb"><code>AsWKB</code></h2> <dl class="class" id="s-aswkb"> <dt id="django.contrib.gis.db.models.functions.AsWKB">
<code>class AsWKB(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-format-conversion-functions.html#function_st-asbinary">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsBinary.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry#Well-known_binary">Well-known binary (WKB)</a> representation of the geometry.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; bytes(City.objects.annotate(wkb=AsWKB('point')).get(name='Chelyabinsk').wkb)
b'\x01\x01\x00\x00\x00]3\xf9f\x9b\x91K@\x00X\x1d9\xd2\xb9N@'
</pre>   <h2 id="aswkt"><code>AsWKT</code></h2> <dl class="class" id="s-aswkt"> <dt id="django.contrib.gis.db.models.functions.AsWKT">
<code>class AsWKT(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-format-conversion-functions.html#function_st-astext">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_AsText.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry">Well-known text (WKT)</a> representation of the geometry.</p> <p>Example:</p> <pre data-language="python">&gt;&gt;&gt; City.objects.annotate(wkt=AsWKT('point')).get(name='Chelyabinsk').wkt
'POINT (55.137555 61.451728)'
</pre>   <h2 id="azimuth"><code>Azimuth</code></h2> <dl class="class" id="s-azimuth"> <dt id="django.contrib.gis.db.models.functions.Azimuth">
<code>class Azimuth(point_a, point_b, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Azimuth.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p> <p>Returns the azimuth in radians of the segment defined by the given point geometries, or <code>None</code> if the two points are coincident. The azimuth is angle referenced from north and is positive clockwise: north = <code>0</code>; east = <code>π/2</code>; south = <code>π</code>; west = <code>3π/2</code>.</p>   <h2 id="boundingcircle"><code>BoundingCircle</code></h2> <dl class="class" id="s-boundingcircle"> <dt id="django.contrib.gis.db.models.functions.BoundingCircle">
<code>class BoundingCircle(expression, num_seg=48, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_MinimumBoundingCircle.html">PostGIS</a>, <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/18/spatl/SDO_GEOM-reference.html#GUID-82A61626-BB64-4793-B53D-A0DBEC91831A">Oracle</a></p> <p>Accepts a single geographic field or expression and returns the smallest circle polygon that can fully contain the geometry.</p> <p>The <code>num_seg</code> parameter is used only on PostGIS.</p>   <h2 id="centroid"><code>Centroid</code></h2> <dl class="class" id="s-centroid"> <dt id="django.contrib.gis.db.models.functions.Centroid">
<code>class Centroid(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-polygon-property-functions.html#function_st-centroid">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Centroid.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the <code>centroid</code> value of the geometry.</p>   <h2 id="difference"><code>Difference</code></h2> <dl class="class" id="s-difference"> <dt id="django.contrib.gis.db.models.functions.Difference">
<code>class Difference(expr1, expr2, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-difference">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Difference.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts two geographic fields or expressions and returns the geometric difference, that is the part of geometry A that does not intersect with geometry B.</p>   <h2 id="distance"><code>Distance</code></h2> <dl class="class" id="s-distance"> <dt id="django.contrib.gis.db.models.functions.Distance">
<code>class Distance(expr1, expr2, spheroid=None, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-relation-functions-object-shapes.html#function_st-distance">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Distance.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts two geographic fields or expressions and returns the distance between them, as a <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> object. On MySQL, a raw float value is returned when the coordinates are geodetic.</p> <p>On backends that support distance calculation on geodetic coordinates, the proper backend function is automatically chosen depending on the SRID value of the geometries (e.g. <a class="reference external" href="https://postgis.net/docs/ST_DistanceSphere.html">ST_DistanceSphere</a> on PostGIS).</p> <p>When distances are calculated with geodetic (angular) coordinates, as is the case with the default WGS84 (4326) SRID, you can set the <code>spheroid</code> keyword argument to decide if the calculation should be based on a simple sphere (less accurate, less resource-intensive) or on a spheroid (more accurate, more resource-intensive).</p> <p>In the following example, the distance from the city of Hobart to every other <a class="reference internal" href="model-api#django.contrib.gis.db.models.PointField" title="django.contrib.gis.db.models.PointField"><code>PointField</code></a> in the <code>AustraliaCity</code> queryset is calculated:</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.gis.db.models.functions import Distance
&gt;&gt;&gt; pnt = AustraliaCity.objects.get(name='Hobart').point
&gt;&gt;&gt; for city in AustraliaCity.objects.annotate(distance=Distance('point', pnt)):
...     print(city.name, city.distance)
Wollongong 990071.220408 m
Shellharbour 972804.613941 m
Thirroul 1002334.36351 m
...
</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Because the <code>distance</code> attribute is a <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> object, you can easily express the value in the units of your choice. For example, <code>city.distance.mi</code> is the distance value in miles and <code>city.distance.km</code> is the distance value in kilometers. See <a class="reference internal" href="measure"><span class="doc">Measurement Objects</span></a> for usage details and the list of <a class="reference internal" href="measure#supported-units"><span class="std std-ref">Supported units</span></a>.</p> </div>   <h2 id="envelope"><code>Envelope</code></h2> <dl class="class" id="s-envelope"> <dt id="django.contrib.gis.db.models.functions.Envelope">
<code>class Envelope(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-general-property-functions.html#function_st-envelope">MySQL</a>, <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/18/spatl/SDO_GEOM-reference.html#GUID-646638D0-2C5F-490A-AF63-DE9B7A4C97C1__CHDJCEIH">Oracle</a>, <a class="reference external" href="https://postgis.net/docs/ST_Envelope.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the geometry representing the bounding box of the geometry.</p>   <h2 id="forcepolygoncw"><code>ForcePolygonCW</code></h2> <dl class="class" id="s-forcepolygoncw"> <dt id="django.contrib.gis.db.models.functions.ForcePolygonCW">
<code>class ForcePolygonCW(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_ForcePolygonCW.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a modified version of the polygon/multipolygon in which all exterior rings are oriented clockwise and all interior rings are oriented counterclockwise. Non-polygonal geometries are returned unchanged.</p>   <h2 id="geohash"><code>GeoHash</code></h2> <dl class="class" id="s-geohash"> <dt id="django.contrib.gis.db.models.functions.GeoHash">
<code>class GeoHash(expression, precision=None, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-geohash-functions.html#function_st-geohash">MySQL</a> (≥ 5.7.5), <a class="reference external" href="https://postgis.net/docs/ST_GeoHash.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p> <p>Accepts a single geographic field or expression and returns a <a class="reference external" href="https://en.wikipedia.org/wiki/Geohash">GeoHash</a> representation of the geometry.</p> <p>The <code>precision</code> keyword argument controls the number of characters in the result.</p>   <h2 id="geometrydistance"><code>GeometryDistance</code></h2> <dl class="class" id="s-geometrydistance"> <dt id="django.contrib.gis.db.models.functions.GeometryDistance">
<code>class GeometryDistance(expr1, expr2, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/geometry_distance_knn.html">PostGIS</a></p> <p>Accepts two geographic fields or expressions and returns the distance between them. When used in an <a class="reference internal" href="../../models/querysets#django.db.models.query.QuerySet.order_by" title="django.db.models.query.QuerySet.order_by"><code>order_by()</code></a> clause, it provides index-assisted nearest-neighbor result sets.</p>   <h2 id="intersection"><code>Intersection</code></h2> <dl class="class" id="s-intersection"> <dt id="django.contrib.gis.db.models.functions.Intersection">
<code>class Intersection(expr1, expr2, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-intersection">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Intersection.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts two geographic fields or expressions and returns the geometric intersection between them.</p>   <h2 id="isvalid"><code>IsValid</code></h2> <dl class="class" id="s-isvalid"> <dt id="django.contrib.gis.db.models.functions.IsValid">
<code>class IsValid(expr)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-convenience-functions.html#function_st-isvalid">MySQL</a> (≥ 5.7.5), <a class="reference external" href="https://postgis.net/docs/ST_IsValid.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a geographic field or expression and tests if the value is well formed. Returns <code>True</code> if its value is a valid geometry and <code>False</code> otherwise.</p>   <h2 id="length"><code>Length</code></h2> <dl class="class" id="s-length"> <dt id="django.contrib.gis.db.models.functions.Length">
<code>class Length(expression, spheroid=True, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-linestring-property-functions.html#function_st-length">MySQL</a>, Oracle, <a class="reference external" href="https://postgis.net/docs/ST_Length.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic linestring or multilinestring field or expression and returns its length as a <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> measure.</p> <p>On PostGIS and SpatiaLite, when the coordinates are geodetic (angular), you can specify if the calculation should be based on a simple sphere (less accurate, less resource-intensive) or on a spheroid (more accurate, more resource-intensive) with the <code>spheroid</code> keyword argument.</p> <p>MySQL doesn’t support length calculations on geographic SRSes.</p>   <h2 id="linelocatepoint"><code>LineLocatePoint</code></h2> <dl class="class" id="s-linelocatepoint"> <dt id="django.contrib.gis.db.models.functions.LineLocatePoint">
<code>class LineLocatePoint(linestring, point, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_LineLocatePoint.html">PostGIS</a>, SpatiaLite</p> <p>Returns a float between 0 and 1 representing the location of the closest point on <code>linestring</code> to the given <code>point</code>, as a fraction of the 2D line length.</p>   <h2 id="makevalid"><code>MakeValid</code></h2> <dl class="class" id="s-makevalid"> <dt id="django.contrib.gis.db.models.functions.MakeValid">
<code>class MakeValid(expr)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_MakeValid.html">PostGIS</a>, SpatiaLite (LWGEOM/RTTOPO)</p> <p>Accepts a geographic field or expression and attempts to convert the value into a valid geometry without losing any of the input vertices. Geometries that are already valid are returned without changes. Simple polygons might become a multipolygon and the result might be of lower dimension than the input.</p>   <h2 id="memsize"><code>MemSize</code></h2> <dl class="class" id="s-memsize"> <dt id="django.contrib.gis.db.models.functions.MemSize">
<code>class MemSize(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_MemSize.html">PostGIS</a></p> <p>Accepts a single geographic field or expression and returns the memory size (number of bytes) that the geometry field takes.</p>   <h2 id="numgeometries"><code>NumGeometries</code></h2> <dl class="class" id="s-numgeometries"> <dt id="django.contrib.gis.db.models.functions.NumGeometries">
<code>class NumGeometries(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-geometrycollection-property-functions.html#function_st-numgeometries">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_NumGeometries.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the number of geometries if the geometry field is a collection (e.g., a <code>GEOMETRYCOLLECTION</code> or <code>MULTI*</code> field). Returns 1 for single geometries.</p> <p>On MySQL, returns <code>None</code> for single geometries.</p>   <h2 id="numpoints"><code>NumPoints</code></h2> <dl class="class" id="s-numpoints"> <dt id="django.contrib.gis.db.models.functions.NumPoints">
<code>class NumPoints(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/gis-linestring-property-functions.html#function_st-numpoints">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_NPoints.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the number of points in a geometry.</p> <p>On MySQL, returns <code>None</code> for any non-<code>LINESTRING</code> geometry.</p>   <h2 id="perimeter"><code>Perimeter</code></h2> <dl class="class" id="s-perimeter"> <dt id="django.contrib.gis.db.models.functions.Perimeter">
<code>class Perimeter(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Perimeter.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns the perimeter of the geometry field as a <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> object.</p>   <h2 id="pointonsurface"><code>PointOnSurface</code></h2> <dl class="class" id="s-pointonsurface"> <dt id="django.contrib.gis.db.models.functions.PointOnSurface">
<code>class PointOnSurface(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_PointOnSurface.html">PostGIS</a>, MariaDB, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a <code>Point</code> geometry guaranteed to lie on the surface of the field; otherwise returns <code>None</code>.</p>   <h2 id="reverse"><code>Reverse</code></h2> <dl class="class" id="s-reverse"> <dt id="django.contrib.gis.db.models.functions.Reverse">
<code>class Reverse(expression, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Reverse.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a geometry with reversed coordinates.</p>   <h2 id="scale"><code>Scale</code></h2> <dl class="class" id="s-scale"> <dt id="django.contrib.gis.db.models.functions.Scale">
<code>class Scale(expression, x, y, z=0.0, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Scale.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a geometry with scaled coordinates by multiplying them with the <code>x</code>, <code>y</code>, and optionally <code>z</code> parameters.</p>   <h2 id="snaptogrid"><code>SnapToGrid</code></h2> <dl class="class" id="s-snaptogrid"> <dt id="django.contrib.gis.db.models.functions.SnapToGrid">
<code>class SnapToGrid(expression, *args, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_SnapToGrid.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a geometry with all points snapped to the given grid. How the geometry is snapped to the grid depends on how many numeric (either float, integer, or long) arguments are given.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Number of Arguments</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td>1</td> <td>A single size to snap both the X and Y grids to.</td> </tr> <tr>
<td>2</td> <td>X and Y sizes to snap the grid to.</td> </tr> <tr>
<td>4</td> <td>X, Y sizes and the corresponding X, Y origins.</td> </tr>  </table>   <h2 id="symdifference"><code>SymDifference</code></h2> <dl class="class" id="s-symdifference"> <dt id="django.contrib.gis.db.models.functions.SymDifference">
<code>class SymDifference(expr1, expr2, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-symdifference">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_SymDifference.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts two geographic fields or expressions and returns the geometric symmetric difference (union without the intersection) between the given parameters.</p>   <h2 id="transform"><code>Transform</code></h2> <dl class="class" id="s-transform"> <dt id="django.contrib.gis.db.models.functions.Transform">
<code>class Transform(expression, srid, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Transform.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts a geographic field or expression and a SRID integer code, and returns the transformed geometry to the spatial reference system specified by the <code>srid</code> parameter.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">What spatial reference system an integer SRID corresponds to may depend on the spatial database used. In other words, the SRID numbers used for Oracle are not necessarily the same as those used by PostGIS.</p> </div>   <h2 id="translate"><code>Translate</code></h2> <dl class="class" id="s-translate"> <dt id="django.contrib.gis.db.models.functions.Translate">
<code>class Translate(expression, x, y, z=0.0, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: <a class="reference external" href="https://postgis.net/docs/ST_Translate.html">PostGIS</a>, SpatiaLite</p> <p>Accepts a single geographic field or expression and returns a geometry with its coordinates offset by the <code>x</code>, <code>y</code>, and optionally <code>z</code> numeric parameters.</p>   <h2 id="union"><code>Union</code></h2> <dl class="class" id="s-union"> <dt id="django.contrib.gis.db.models.functions.Union">
<code>class Union(expr1, expr2, **extra)</code> </dt> 
</dl> <p><em>Availability</em>: MariaDB, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/spatial-operator-functions.html#function_st-union">MySQL</a>, <a class="reference external" href="https://postgis.net/docs/ST_Union.html">PostGIS</a>, Oracle, SpatiaLite</p> <p>Accepts two geographic fields or expressions and returns the union of both geometries.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/4.0/ref/contrib/gis/functions/" class="_attribution-link">https://docs.djangoproject.com/en/4.0/ref/contrib/gis/functions/</a>
  </p>
</div>
