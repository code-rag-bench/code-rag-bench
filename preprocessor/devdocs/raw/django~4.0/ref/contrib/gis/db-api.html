<h1 id="geodjango-database-api">GeoDjango Database API</h1>  <h2 id="spatial-backends">Spatial Backends</h2> <p id="s-geodjango-database-api">GeoDjango currently provides the following spatial database backends:</p> <ul class="simple"> <li><code>django.contrib.gis.db.backends.postgis</code></li> <li><code>django.contrib.gis.db.backends.mysql</code></li> <li><code>django.contrib.gis.db.backends.oracle</code></li> <li><code>django.contrib.gis.db.backends.spatialite</code></li> </ul>  <h3 id="id2">MySQL Spatial Limitations</h3> <p id="s-mysql-spatial-limitations">Before MySQL 5.6.1, spatial extensions only support bounding box operations (what MySQL calls minimum bounding rectangles, or MBR). Specifically, MySQL did not conform to the OGC standard. Django supports spatial functions operating on real geometries available in modern MySQL versions. However, the spatial functions are not as rich as other backends like PostGIS.</p>   <h3 id="raster-support">Raster Support</h3> <p id="s-raster-support"><code>RasterField</code> is currently only implemented for the PostGIS backend. Spatial lookups are available for raster fields, but spatial database functions and aggregates aren’t implemented for raster fields.</p>    <h2 id="creating-and-saving-models-with-geometry-fields">Creating and Saving Models with Geometry Fields</h2> <p id="s-creating-and-saving-models-with-geometry-fields">Here is an example of how to create a geometry object (assuming the <code>Zipcode</code> model):</p> <pre data-language="python">&gt;&gt;&gt; from zipcode.models import Zipcode
&gt;&gt;&gt; z = Zipcode(code=77096, poly='POLYGON(( 10 10, 10 20, 20 20, 20 15, 10 10))')
&gt;&gt;&gt; z.save()
</pre> <p><a class="reference internal" href="geos#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code>GEOSGeometry</code></a> objects may also be used to save geometric models:</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.gis.geos import GEOSGeometry
&gt;&gt;&gt; poly = GEOSGeometry('POLYGON(( 10 10, 10 20, 20 20, 20 15, 10 10))')
&gt;&gt;&gt; z = Zipcode(code=77096, poly=poly)
&gt;&gt;&gt; z.save()
</pre> <p>Moreover, if the <code>GEOSGeometry</code> is in a different coordinate system (has a different SRID value) than that of the field, then it will be implicitly transformed into the SRID of the model’s field, using the spatial database’s transform procedure:</p> <pre data-language="python">&gt;&gt;&gt; poly_3084 = GEOSGeometry('POLYGON(( 10 10, 10 20, 20 20, 20 15, 10 10))', srid=3084)  # SRID 3084 is 'NAD83(HARN) / Texas Centric Lambert Conformal'
&gt;&gt;&gt; z = Zipcode(code=78212, poly=poly_3084)
&gt;&gt;&gt; z.save()
&gt;&gt;&gt; from django.db import connection
&gt;&gt;&gt; print(connection.queries[-1]['sql']) # printing the last SQL statement executed (requires DEBUG=True)
INSERT INTO "geoapp_zipcode" ("code", "poly") VALUES (78212, ST_Transform(ST_GeomFromWKB('\\001 ... ', 3084), 4326))
</pre> <p>Thus, geometry parameters may be passed in using the <code>GEOSGeometry</code> object, WKT (Well Known Text <a class="footnote-reference" href="#fnwkt" id="id3">[1]</a>), HEXEWKB (PostGIS specific – a WKB geometry in hexadecimal <a class="footnote-reference" href="#fnewkb" id="id4">[2]</a>), and GeoJSON (see <a class="rfc reference external" href="https://tools.ietf.org/html/rfc7946.html" id="index-0"><strong>RFC 7946</strong></a>). Essentially, if the input is not a <code>GEOSGeometry</code> object, the geometry field will attempt to create a <code>GEOSGeometry</code> instance from the input.</p> <p>For more information creating <a class="reference internal" href="geos#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code>GEOSGeometry</code></a> objects, refer to the <a class="reference internal" href="geos#geos-tutorial"><span class="std std-ref">GEOS tutorial</span></a>.</p>   <h2 id="creating-and-saving-raster-models">Creating and Saving Models with Raster Fields</h2> <p id="s-creating-and-saving-models-with-raster-fields">When creating raster models, the raster field will implicitly convert the input into a <a class="reference internal" href="gdal#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code>GDALRaster</code></a> using lazy-evaluation. The raster field will therefore accept any input that is accepted by the <a class="reference internal" href="gdal#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code>GDALRaster</code></a> constructor.</p> <p>Here is an example of how to create a raster object from a raster file <code>volcano.tif</code> (assuming the <code>Elevation</code> model):</p> <pre data-language="python">&gt;&gt;&gt; from elevation.models import Elevation
&gt;&gt;&gt; dem = Elevation(name='Volcano', rast='/path/to/raster/volcano.tif')
&gt;&gt;&gt; dem.save()
</pre> <p><a class="reference internal" href="gdal#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code>GDALRaster</code></a> objects may also be used to save raster models:</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.gis.gdal import GDALRaster
&gt;&gt;&gt; rast = GDALRaster({'width': 10, 'height': 10, 'name': 'Canyon', 'srid': 4326,
...                    'scale': [0.1, -0.1], 'bands': [{"data": range(100)}]})
&gt;&gt;&gt; dem = Elevation(name='Canyon', rast=rast)
&gt;&gt;&gt; dem.save()
</pre> <p>Note that this equivalent to:</p> <pre data-language="python">&gt;&gt;&gt; dem = Elevation.objects.create(
...     name='Canyon',
...     rast={'width': 10, 'height': 10, 'name': 'Canyon', 'srid': 4326,
...           'scale': [0.1, -0.1], 'bands': [{"data": range(100)}]},
... )
</pre>   <h2 id="spatial-lookups-intro">Spatial Lookups</h2> <p id="s-spatial-lookups">GeoDjango’s lookup types may be used with any manager method like <code>filter()</code>, <code>exclude()</code>, etc. However, the lookup types unique to GeoDjango are only available on spatial fields.</p> <p>Filters on ‘normal’ fields (e.g. <a class="reference internal" href="../../models/fields#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a>) may be chained with those on geographic fields. Geographic lookups accept geometry and raster input on both sides and input types can be mixed freely.</p> <p>The general structure of geographic lookups is described below. A complete reference can be found in the <a class="reference internal" href="geoquerysets#spatial-lookups"><span class="std std-ref">spatial lookup reference</span></a>.</p>  <h3 id="geometry-lookups">Geometry Lookups</h3> <p id="s-geometry-lookups">Geographic queries with geometries take the following general form (assuming the <code>Zipcode</code> model used in the <a class="reference internal" href="model-api"><span class="doc">GeoDjango Model API</span></a>):</p> <pre data-language="python">&gt;&gt;&gt; qs = Zipcode.objects.filter(&lt;field&gt;__&lt;lookup_type&gt;=&lt;parameter&gt;)
&gt;&gt;&gt; qs = Zipcode.objects.exclude(...)
</pre> <p>For example:</p> <pre data-language="python">&gt;&gt;&gt; qs = Zipcode.objects.filter(poly__contains=pnt)
&gt;&gt;&gt; qs = Elevation.objects.filter(poly__contains=rst)
</pre> <p>In this case, <code>poly</code> is the geographic field, <a class="reference internal" href="geoquerysets#std:fieldlookup-gis-contains"><code>contains</code></a> is the spatial lookup type, <code>pnt</code> is the parameter (which may be a <a class="reference internal" href="geos#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code>GEOSGeometry</code></a> object or a string of GeoJSON , WKT, or HEXEWKB), and <code>rst</code> is a <a class="reference internal" href="gdal#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code>GDALRaster</code></a> object.</p>   <h3 id="spatial-lookup-raster">Raster Lookups</h3> <p id="s-raster-lookups">The raster lookup syntax is similar to the syntax for geometries. The only difference is that a band index can be specified as additional input. If no band index is specified, the first band is used by default (index <code>0</code>). In that case the syntax is identical to the syntax for geometry lookups.</p> <p>To specify the band index, an additional parameter can be specified on both sides of the lookup. On the left hand side, the double underscore syntax is used to pass a band index. On the right hand side, a tuple of the raster and band index can be specified.</p> <p>This results in the following general form for lookups involving rasters (assuming the <code>Elevation</code> model used in the <a class="reference internal" href="model-api"><span class="doc">GeoDjango Model API</span></a>):</p> <pre data-language="python">&gt;&gt;&gt; qs = Elevation.objects.filter(&lt;field&gt;__&lt;lookup_type&gt;=&lt;parameter&gt;)
&gt;&gt;&gt; qs = Elevation.objects.filter(&lt;field&gt;__&lt;band_index&gt;__&lt;lookup_type&gt;=&lt;parameter&gt;)
&gt;&gt;&gt; qs = Elevation.objects.filter(&lt;field&gt;__&lt;lookup_type&gt;=(&lt;raster_input, &lt;band_index&gt;)
</pre> <p>For example:</p> <pre data-language="python">&gt;&gt;&gt; qs = Elevation.objects.filter(rast__contains=geom)
&gt;&gt;&gt; qs = Elevation.objects.filter(rast__contains=rst)
&gt;&gt;&gt; qs = Elevation.objects.filter(rast__1__contains=geom)
&gt;&gt;&gt; qs = Elevation.objects.filter(rast__contains=(rst, 1))
&gt;&gt;&gt; qs = Elevation.objects.filter(rast__1__contains=(rst, 1))
</pre> <p>On the left hand side of the example, <code>rast</code> is the geographic raster field and <a class="reference internal" href="geoquerysets#std:fieldlookup-gis-contains"><code>contains</code></a> is the spatial lookup type. On the right hand side, <code>geom</code> is a geometry input and <code>rst</code> is a <a class="reference internal" href="gdal#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code>GDALRaster</code></a> object. The band index defaults to <code>0</code> in the first two queries and is set to <code>1</code> on the others.</p> <p>While all spatial lookups can be used with raster objects on both sides, not all underlying operators natively accept raster input. For cases where the operator expects geometry input, the raster is automatically converted to a geometry. It’s important to keep this in mind when interpreting the lookup results.</p> <p>The type of raster support is listed for all lookups in the <a class="reference internal" href="#spatial-lookup-compatibility"><span class="std std-ref">compatibility table</span></a>. Lookups involving rasters are currently only available for the PostGIS backend.</p>    <h2 id="id5">Distance Queries</h2>  <h3 id="introduction">Introduction</h3> <p id="s-distance-queries">Distance calculations with spatial data is tricky because, unfortunately, the Earth is not flat. Some distance queries with fields in a geographic coordinate system may have to be expressed differently because of limitations in PostGIS. Please see the <a class="reference internal" href="model-api#selecting-an-srid"><span class="std std-ref">Selecting an SRID</span></a> section in the <a class="reference internal" href="model-api"><span class="doc">GeoDjango Model API</span></a> documentation for more details.</p>   <h3 id="distance-lookups-intro">Distance Lookups</h3> <p id="s-distance-lookups"><em>Availability</em>: PostGIS, MariaDB, MySQL, Oracle, SpatiaLite, PGRaster (Native)</p> <p>The following distance lookups are available:</p> <ul class="simple"> <li><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_lt"><code>distance_lt</code></a></li> <li><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_lte"><code>distance_lte</code></a></li> <li><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_gt"><code>distance_gt</code></a></li> <li><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_gte"><code>distance_gte</code></a></li> <li>
<a class="reference internal" href="geoquerysets#std:fieldlookup-dwithin"><code>dwithin</code></a> (except MariaDB and MySQL)</li> </ul> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For <em>measuring</em>, rather than querying on distances, use the <a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Distance" title="django.contrib.gis.db.models.functions.Distance"><code>Distance</code></a> function.</p> </div> <p>Distance lookups take a tuple parameter comprising:</p> <ol class="arabic simple"> <li>A geometry or raster to base calculations from; and</li> <li>A number or <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> object containing the distance.</li> </ol> <p>If a <a class="reference internal" href="measure#django.contrib.gis.measure.Distance" title="django.contrib.gis.measure.Distance"><code>Distance</code></a> object is used, it may be expressed in any units (the SQL generated will use units converted to those of the field); otherwise, numeric parameters are assumed to be in the units of the field.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>In PostGIS, <code>ST_Distance_Sphere</code> does <em>not</em> limit the geometry types geographic distance queries are performed with. <a class="footnote-reference" href="#fndistsphere15" id="id6">[3]</a> However, these queries may take a long time, as great-circle distances must be calculated on the fly for <em>every</em> row in the query. This is because the spatial index on traditional geometry fields cannot be used.</p> <p class="last">For much better performance on WGS84 distance queries, consider using <a class="reference internal" href="model-api#geography-type"><span class="std std-ref">geography columns</span></a> in your database instead because they are able to use their spatial index in distance queries. You can tell GeoDjango to use a geography column by setting <code>geography=True</code> in your field definition.</p> </div> <p>For example, let’s say we have a <code>SouthTexasCity</code> model (from the <a class="reference external" href="https://github.com/django/django/blob/main/tests/gis_tests/distapp/models.py">GeoDjango distance tests</a> ) on a <em>projected</em> coordinate system valid for cities in southern Texas:</p> <pre data-language="python">from django.contrib.gis.db import models

class SouthTexasCity(models.Model):
    name = models.CharField(max_length=30)
    # A projected coordinate system (only valid for South Texas!)
    # is used, units are in meters.
    point = models.PointField(srid=32140)
</pre> <p>Then distance queries may be performed as follows:</p> <pre data-language="python">&gt;&gt;&gt; from django.contrib.gis.geos import GEOSGeometry
&gt;&gt;&gt; from django.contrib.gis.measure import D # ``D`` is a shortcut for ``Distance``
&gt;&gt;&gt; from geoapp.models import SouthTexasCity
# Distances will be calculated from this point, which does not have to be projected.
&gt;&gt;&gt; pnt = GEOSGeometry('POINT(-96.876369 29.905320)', srid=4326)
# If numeric parameter, units of field (meters in this case) are assumed.
&gt;&gt;&gt; qs = SouthTexasCity.objects.filter(point__distance_lte=(pnt, 7000))
# Find all Cities within 7 km, &gt; 20 miles away, and &gt; 100 chains away (an obscure unit)
&gt;&gt;&gt; qs = SouthTexasCity.objects.filter(point__distance_lte=(pnt, D(km=7)))
&gt;&gt;&gt; qs = SouthTexasCity.objects.filter(point__distance_gte=(pnt, D(mi=20)))
&gt;&gt;&gt; qs = SouthTexasCity.objects.filter(point__distance_gte=(pnt, D(chain=100)))
</pre> <p>Raster queries work the same way by replacing the geometry field <code>point</code> with a raster field, or the <code>pnt</code> object with a raster object, or both. To specify the band index of a raster input on the right hand side, a 3-tuple can be passed to the lookup as follows:</p> <pre data-language="python">&gt;&gt;&gt; qs = SouthTexasCity.objects.filter(point__distance_gte=(rst, 2, D(km=7)))
</pre> <p>Where the band with index 2 (the third band) of the raster <code>rst</code> would be used for the lookup.</p>    <h2 id="compatibility-table">Compatibility Tables</h2>  <h3 id="id7">Spatial Lookups</h3> <p id="s-compatibility-tables">The following table provides a summary of what spatial lookups are available for each spatial database backend. The PostGIS Raster (PGRaster) lookups are divided into the three categories described in the <a class="reference internal" href="#spatial-lookup-raster"><span class="std std-ref">raster lookup details</span></a>: native support <code>N</code>, bilateral native support <code>B</code>, and geometry conversion support <code>C</code>.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Lookup Type</th> <th class="head">PostGIS</th> <th class="head">Oracle</th> <th class="head">MariaDB</th> <th class="head">MySQL <a class="footnote-reference" href="#id9" id="id8">[4]</a>
</th> <th class="head">SpatiaLite</th> <th class="head">PGRaster</th> </tr> </thead>  <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-bbcontains"><code>bbcontains</code></a></td> <td>X</td> <td> </td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-bboverlaps"><code>bboverlaps</code></a></td> <td>X</td> <td> </td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-contained"><code>contained</code></a></td> <td>X</td> <td> </td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-gis-contains"><code>contains</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-contains_properly"><code>contains_properly</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-coveredby"><code>coveredby</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-covers"><code>covers</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-crosses"><code>crosses</code></a></td> <td>X</td> <td> </td> <td>X</td> <td>X</td> <td>X</td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-disjoint"><code>disjoint</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_gt"><code>distance_gt</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_gte"><code>distance_gte</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_lt"><code>distance_lt</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-distance_lte"><code>distance_lte</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>N</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-dwithin"><code>dwithin</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-equals"><code>equals</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-same_as"><code>exact</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-intersects"><code>intersects</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-isvalid"><code>isvalid</code></a></td> <td>X</td> <td>X</td> <td> </td> <td>X (≥ 5.7.5)</td> <td>X</td> <td> </td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-overlaps"><code>overlaps</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-relate"><code>relate</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td> </td> <td>X</td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-same_as"><code>same_as</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-touches"><code>touches</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-within"><code>within</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-left"><code>left</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-right"><code>right</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-overlaps_left"><code>overlaps_left</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-overlaps_right"><code>overlaps_right</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>B</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-overlaps_above"><code>overlaps_above</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-overlaps_below"><code>overlaps_below</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-strictly_above"><code>strictly_above</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#std:fieldlookup-strictly_below"><code>strictly_below</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> <td>C</td> </tr>  </table>   <h3 id="database-functions-compatibility">Database functions</h3> <p id="s-database-functions">The following table provides a summary of what geography-specific database functions are available on each spatial backend.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Function</th> <th class="head">PostGIS</th> <th class="head">Oracle</th> <th class="head">MariaDB</th> <th class="head">MySQL</th> <th class="head">SpatiaLite</th> </tr> </thead>  <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Area" title="django.contrib.gis.db.models.functions.Area"><code>Area</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsGeoJSON" title="django.contrib.gis.db.models.functions.AsGeoJSON"><code>AsGeoJSON</code></a></td> <td>X</td> <td>X</td> <td>X (≥ 10.2.4)</td> <td>X (≥ 5.7.5)</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsGML" title="django.contrib.gis.db.models.functions.AsGML"><code>AsGML</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsKML" title="django.contrib.gis.db.models.functions.AsKML"><code>AsKML</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsSVG" title="django.contrib.gis.db.models.functions.AsSVG"><code>AsSVG</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsWKB" title="django.contrib.gis.db.models.functions.AsWKB"><code>AsWKB</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.AsWKT" title="django.contrib.gis.db.models.functions.AsWKT"><code>AsWKT</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Azimuth" title="django.contrib.gis.db.models.functions.Azimuth"><code>Azimuth</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X (LWGEOM/RTTOPO)</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.BoundingCircle" title="django.contrib.gis.db.models.functions.BoundingCircle"><code>BoundingCircle</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td> </td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Centroid" title="django.contrib.gis.db.models.functions.Centroid"><code>Centroid</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Difference" title="django.contrib.gis.db.models.functions.Difference"><code>Difference</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Distance" title="django.contrib.gis.db.models.functions.Distance"><code>Distance</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Envelope" title="django.contrib.gis.db.models.functions.Envelope"><code>Envelope</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.ForcePolygonCW" title="django.contrib.gis.db.models.functions.ForcePolygonCW"><code>ForcePolygonCW</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.GeoHash" title="django.contrib.gis.db.models.functions.GeoHash"><code>GeoHash</code></a></td> <td>X</td> <td> </td> <td> </td> <td>X (≥ 5.7.5)</td> <td>X (LWGEOM/RTTOPO)</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Intersection" title="django.contrib.gis.db.models.functions.Intersection"><code>Intersection</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code>IsValid</code></a></td> <td>X</td> <td>X</td> <td> </td> <td>X (≥ 5.7.5)</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Length" title="django.contrib.gis.db.models.functions.Length"><code>Length</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.LineLocatePoint" title="django.contrib.gis.db.models.functions.LineLocatePoint"><code>LineLocatePoint</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.MakeValid" title="django.contrib.gis.db.models.functions.MakeValid"><code>MakeValid</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X (LWGEOM/RTTOPO)</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.MemSize" title="django.contrib.gis.db.models.functions.MemSize"><code>MemSize</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.NumGeometries" title="django.contrib.gis.db.models.functions.NumGeometries"><code>NumGeometries</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.NumPoints" title="django.contrib.gis.db.models.functions.NumPoints"><code>NumPoints</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Perimeter" title="django.contrib.gis.db.models.functions.Perimeter"><code>Perimeter</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.PointOnSurface" title="django.contrib.gis.db.models.functions.PointOnSurface"><code>PointOnSurface</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Reverse" title="django.contrib.gis.db.models.functions.Reverse"><code>Reverse</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Scale" title="django.contrib.gis.db.models.functions.Scale"><code>Scale</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.SnapToGrid" title="django.contrib.gis.db.models.functions.SnapToGrid"><code>SnapToGrid</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.SymDifference" title="django.contrib.gis.db.models.functions.SymDifference"><code>SymDifference</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Transform" title="django.contrib.gis.db.models.functions.Transform"><code>Transform</code></a></td> <td>X</td> <td>X</td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Translate" title="django.contrib.gis.db.models.functions.Translate"><code>Translate</code></a></td> <td>X</td> <td> </td> <td> </td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="functions#django.contrib.gis.db.models.functions.Union" title="django.contrib.gis.db.models.functions.Union"><code>Union</code></a></td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> <td>X</td> </tr>  </table>   <h3 id="aggregate-functions">Aggregate Functions</h3> <p id="s-aggregate-functions">The following table provides a summary of what GIS-specific aggregate functions are available on each spatial backend. Please note that MySQL does not support any of these aggregates, and is thus excluded from the table.</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Aggregate</th> <th class="head">PostGIS</th> <th class="head">Oracle</th> <th class="head">SpatiaLite</th> </tr> </thead>  <tr>
<td><a class="reference internal" href="geoquerysets#django.contrib.gis.db.models.Collect" title="django.contrib.gis.db.models.Collect"><code>Collect</code></a></td> <td>X</td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#django.contrib.gis.db.models.Extent" title="django.contrib.gis.db.models.Extent"><code>Extent</code></a></td> <td>X</td> <td>X</td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#django.contrib.gis.db.models.Extent3D" title="django.contrib.gis.db.models.Extent3D"><code>Extent3D</code></a></td> <td>X</td> <td> </td> <td> </td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#django.contrib.gis.db.models.MakeLine" title="django.contrib.gis.db.models.MakeLine"><code>MakeLine</code></a></td> <td>X</td> <td> </td> <td>X</td> </tr> <tr>
<td><a class="reference internal" href="geoquerysets#django.contrib.gis.db.models.Union" title="django.contrib.gis.db.models.Union"><code>Union</code></a></td> <td>X</td> <td>X</td> <td>X</td> </tr>  </table> <h4 class="rubric">Footnotes</h4> <table class="docutils footnote" frame="void" id="fnwkt" rules="none">   <tr>
<td class="label"><a class="fn-backref" href="#id3">[1]</a></td>
<td>
<em>See</em> Open Geospatial Consortium, Inc., <a class="reference external" href="https://portal.ogc.org/files/?artifact_id=829">OpenGIS Simple Feature Specification For SQL</a>, Document 99-049 (May 5, 1999), at Ch. 3.2.5, p. 3-11 (SQL Textual Representation of Geometry).</td>
</tr>  </table> <table class="docutils footnote" frame="void" id="fnewkb" rules="none">   <tr>
<td class="label"><a class="fn-backref" href="#id4">[2]</a></td>
<td>
<em>See</em> <a class="reference external" href="https://postgis.net/docs/using_postgis_dbmanagement.html#EWKB_EWKT">PostGIS EWKB, EWKT and Canonical Forms</a>, PostGIS documentation at Ch. 4.1.2.</td>
</tr>  </table> <table class="docutils footnote" frame="void" id="fndistsphere15" rules="none">   <tr>
<td class="label"><a class="fn-backref" href="#id6">[3]</a></td>
<td>
<em>See</em> <a class="reference external" href="https://postgis.net/docs/ST_DistanceSphere.html">PostGIS documentation</a> on <code>ST_DistanceSphere</code>.</td>
</tr>  </table> <table class="docutils footnote" frame="void" id="id9" rules="none">   <tr>
<td class="label"><a class="fn-backref" href="#id8">[4]</a></td>
<td>Refer <a class="reference internal" href="#mysql-spatial-limitations"><span class="std std-ref">MySQL Spatial Limitations</span></a> section for more details.</td>
</tr>  </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/4.0/ref/contrib/gis/db-api/" class="_attribution-link">https://docs.djangoproject.com/en/4.0/ref/contrib/gis/db-api/</a>
  </p>
</div>
