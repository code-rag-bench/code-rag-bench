<h1 id="model-field-reference">Model field reference</h1> <p id="s-module-django.db.models.fields">This document contains all the API references of <a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a> including the <a class="reference internal" href="#field-options">field options</a> and <a class="reference internal" href="#field-types">field types</a> Django offers.</p> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p>If the built-in fields don’t do the trick, you can try <a class="reference external" href="https://github.com/django/django-localflavor">django-localflavor</a> (<a class="reference external" href="https://django-localflavor.readthedocs.io/">documentation</a>), which contains assorted pieces of code that are useful for particular countries and cultures.</p> <p class="last">Also, you can easily <a class="reference internal" href="../../howto/custom-model-fields"><span class="doc">write your own custom model fields</span></a>.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Technically, these models are defined in <a class="reference internal" href="#module-django.db.models.fields" title="django.db.models.fields: Built-in field types."><code>django.db.models.fields</code></a>, but for convenience they’re imported into <a class="reference internal" href="../../topics/db/models#module-django.db.models" title="django.db.models"><code>django.db.models</code></a>; the standard convention is to use <code>from django.db import models</code> and refer to fields as <code>models.&lt;Foo&gt;Field</code>.</p> </div>  <h2 id="common-model-field-options">Field options</h2> <p id="s-field-options">The following arguments are available to all field types. All are optional.</p>  <h3 id="null"><code>null</code></h3> <dl class="attribute" id="s-null"> <dt id="django.db.models.Field.null">
<code>Field.null</code> </dt> 
</dl> <p>If <code>True</code>, Django will store empty values as <code>NULL</code> in the database. Default is <code>False</code>.</p> <p>Avoid using <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> on string-based fields such as <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> and <a class="reference internal" href="#django.db.models.TextField" title="django.db.models.TextField"><code>TextField</code></a>. If a string-based field has <code>null=True</code>, that means it has two possible values for “no data”: <code>NULL</code>, and the empty string. In most cases, it’s redundant to have two possible values for “no data;” the Django convention is to use the empty string, not <code>NULL</code>. One exception is when a <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> has both <code>unique=True</code> and <code>blank=True</code> set. In this situation, <code>null=True</code> is required to avoid unique constraint violations when saving multiple objects with blank values.</p> <p>For both string-based and non-string-based fields, you will also need to set <code>blank=True</code> if you wish to permit empty values in forms, as the <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> parameter only affects database storage (see <a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank</code></a>).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">When using the Oracle database backend, the value <code>NULL</code> will be stored to denote the empty string regardless of this attribute.</p> </div>   <h3 id="blank"><code>blank</code></h3> <dl class="attribute" id="s-blank"> <dt id="django.db.models.Field.blank">
<code>Field.blank</code> </dt> 
</dl> <p>If <code>True</code>, the field is allowed to be blank. Default is <code>False</code>.</p> <p>Note that this is different than <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a>. <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> is purely database-related, whereas <a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank</code></a> is validation-related. If a field has <code>blank=True</code>, form validation will allow entry of an empty value. If a field has <code>blank=False</code>, the field will be required.</p> <div class="admonition-supplying-missing-values admonition"> <p class="first admonition-title">Supplying missing values</p> <p class="last"><code>blank=True</code> can be used with fields having <code>null=False</code>, but this will require implementing <a class="reference internal" href="instances#django.db.models.Model.clean" title="django.db.models.Model.clean"><code>clean()</code></a> on the model in order to programmatically supply any missing values.</p> </div>   <h3 id="field-choices"><code>choices</code></h3> <dl class="attribute" id="s-choices"> <dt id="django.db.models.Field.choices">
<code>Field.choices</code> </dt> 
</dl> <p>A <a class="reference external" href="https://docs.python.org/3/glossary.html#term-sequence" title="(in Python v3.10)"><span class="xref std std-term">sequence</span></a> consisting itself of iterables of exactly two items (e.g. <code>[(A, B), (A, B) ...]</code>) to use as choices for this field. If choices are given, they’re enforced by <a class="reference internal" href="instances#validating-objects"><span class="std std-ref">model validation</span></a> and the default form widget will be a select box with these choices instead of the standard text field.</p> <p>The first element in each tuple is the actual value to be set on the model, and the second element is the human-readable name. For example:</p> <pre data-language="python">YEAR_IN_SCHOOL_CHOICES = [
    ('FR', 'Freshman'),
    ('SO', 'Sophomore'),
    ('JR', 'Junior'),
    ('SR', 'Senior'),
    ('GR', 'Graduate'),
]
</pre> <p>Generally, it’s best to define choices inside a model class, and to define a suitably-named constant for each value:</p> <pre data-language="python">from django.db import models

class Student(models.Model):
    FRESHMAN = 'FR'
    SOPHOMORE = 'SO'
    JUNIOR = 'JR'
    SENIOR = 'SR'
    GRADUATE = 'GR'
    YEAR_IN_SCHOOL_CHOICES = [
        (FRESHMAN, 'Freshman'),
        (SOPHOMORE, 'Sophomore'),
        (JUNIOR, 'Junior'),
        (SENIOR, 'Senior'),
        (GRADUATE, 'Graduate'),
    ]
    year_in_school = models.CharField(
        max_length=2,
        choices=YEAR_IN_SCHOOL_CHOICES,
        default=FRESHMAN,
    )

    def is_upperclass(self):
        return self.year_in_school in {self.JUNIOR, self.SENIOR}
</pre> <p>Though you can define a choices list outside of a model class and then refer to it, defining the choices and names for each choice inside the model class keeps all of that information with the class that uses it, and helps reference the choices (e.g, <code>Student.SOPHOMORE</code> will work anywhere that the <code>Student</code> model has been imported).</p> <p id="field-choices-named-groups">You can also collect your available choices into named groups that can be used for organizational purposes:</p> <pre data-language="python">MEDIA_CHOICES = [
    ('Audio', (
            ('vinyl', 'Vinyl'),
            ('cd', 'CD'),
        )
    ),
    ('Video', (
            ('vhs', 'VHS Tape'),
            ('dvd', 'DVD'),
        )
    ),
    ('unknown', 'Unknown'),
]
</pre> <p>The first element in each tuple is the name to apply to the group. The second element is an iterable of 2-tuples, with each 2-tuple containing a value and a human-readable name for an option. Grouped options may be combined with ungrouped options within a single list (such as the <code>'unknown'</code> option in this example).</p> <p>For each model field that has <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a> set, Django will add a method to retrieve the human-readable name for the field’s current value. See <a class="reference internal" href="instances#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><code>get_FOO_display()</code></a> in the database API documentation.</p> <p>Note that choices can be any sequence object – not necessarily a list or tuple. This lets you construct choices dynamically. But if you find yourself hacking <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a> to be dynamic, you’re probably better off using a proper database table with a <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>. <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a> is meant for static data that doesn’t change much, if ever.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">A new migration is created each time the order of <code>choices</code> changes.</p> </div> <p id="field-choices-blank-label">Unless <a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=False</code></a> is set on the field along with a <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code>default</code></a> then a label containing <code>"---------"</code> will be rendered with the select box. To override this behavior, add a tuple to <code>choices</code> containing <code>None</code>; e.g. <code>(None, 'Your String For Display')</code>. Alternatively, you can use an empty string instead of <code>None</code> where this makes sense - such as on a <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a>.</p>  <h4 id="field-choices-enum-types">Enumeration types</h4> <p id="s-enumeration-types">In addition, Django provides enumeration types that you can subclass to define choices in a concise way:</p> <pre data-language="python">from django.utils.translation import gettext_lazy as _

class Student(models.Model):

    class YearInSchool(models.TextChoices):
        FRESHMAN = 'FR', _('Freshman')
        SOPHOMORE = 'SO', _('Sophomore')
        JUNIOR = 'JR', _('Junior')
        SENIOR = 'SR', _('Senior')
        GRADUATE = 'GR', _('Graduate')

    year_in_school = models.CharField(
        max_length=2,
        choices=YearInSchool.choices,
        default=YearInSchool.FRESHMAN,
    )

    def is_upperclass(self):
        return self.year_in_school in {
            self.YearInSchool.JUNIOR,
            self.YearInSchool.SENIOR,
        }
</pre> <p>These work similar to <a class="reference external" href="https://docs.python.org/3/library/enum.html#module-enum" title="(in Python v3.10)"><code>enum</code></a> from Python’s standard library, but with some modifications:</p> <ul> <li>Enum member values are a tuple of arguments to use when constructing the concrete data type. Django supports adding an extra string value to the end of this tuple to be used as the human-readable name, or <code>label</code>. The <code>label</code> can be a lazy translatable string. Thus, in most cases, the member value will be a <code>(value, label)</code> two-tuple. See below for <a class="reference internal" href="#field-choices-enum-subclassing"><span class="std std-ref">an example of subclassing choices</span></a> using a more complex data type. If a tuple is not provided, or the last item is not a (lazy) string, the <code>label</code> is <a class="reference internal" href="#field-choices-enum-auto-label"><span class="std std-ref">automatically generated</span></a> from the member name. </li> <li>A <code>.label</code> property is added on values, to return the human-readable name. </li> <li>
<p class="first">A number of custom properties are added to the enumeration classes – <code>.choices</code>, <code>.labels</code>, <code>.values</code>, and <code>.names</code> – to make it easier to access lists of those separate parts of the enumeration. Use <code>.choices</code> as a suitable value to pass to <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a> in a field definition.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">These property names cannot be used as member names as they would conflict.</p> </div> </li> <li>The use of <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.unique" title="(in Python v3.10)"><code>enum.unique()</code></a> is enforced to ensure that values cannot be defined multiple times. This is unlikely to be expected in choices for a field. </li> </ul> <p>Note that using <code>YearInSchool.SENIOR</code>, <code>YearInSchool['SENIOR']</code>, or <code>YearInSchool('SR')</code> to access or lookup enum members work as expected, as do the <code>.name</code> and <code>.value</code> properties on the members.</p> <p id="field-choices-enum-auto-label">If you don’t need to have the human-readable names translated, you can have them inferred from the member name (replacing underscores with spaces and using title-case):</p> <pre data-language="python">&gt;&gt;&gt; class Vehicle(models.TextChoices):
...     CAR = 'C'
...     TRUCK = 'T'
...     JET_SKI = 'J'
...
&gt;&gt;&gt; Vehicle.JET_SKI.label
'Jet Ski'
</pre> <p>Since the case where the enum values need to be integers is extremely common, Django provides an <code>IntegerChoices</code> class. For example:</p> <pre data-language="python">class Card(models.Model):

    class Suit(models.IntegerChoices):
        DIAMOND = 1
        SPADE = 2
        HEART = 3
        CLUB = 4

    suit = models.IntegerField(choices=Suit.choices)
</pre> <p>It is also possible to make use of the <a class="reference external" href="https://docs.python.org/3/library/enum.html#functional-api">Enum Functional API</a> with the caveat that labels are automatically generated as highlighted above:</p> <pre data-language="python">&gt;&gt;&gt; MedalType = models.TextChoices('MedalType', 'GOLD SILVER BRONZE')
&gt;&gt;&gt; MedalType.choices
[('GOLD', 'Gold'), ('SILVER', 'Silver'), ('BRONZE', 'Bronze')]
&gt;&gt;&gt; Place = models.IntegerChoices('Place', 'FIRST SECOND THIRD')
&gt;&gt;&gt; Place.choices
[(1, 'First'), (2, 'Second'), (3, 'Third')]
</pre> <p id="field-choices-enum-subclassing">If you require support for a concrete data type other than <code>int</code> or <code>str</code>, you can subclass <code>Choices</code> and the required concrete data type, e.g. <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.date" title="(in Python v3.10)"><code>date</code></a> for use with <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code>DateField</code></a>:</p> <pre data-language="python">class MoonLandings(datetime.date, models.Choices):
    APOLLO_11 = 1969, 7, 20, 'Apollo 11 (Eagle)'
    APOLLO_12 = 1969, 11, 19, 'Apollo 12 (Intrepid)'
    APOLLO_14 = 1971, 2, 5, 'Apollo 14 (Antares)'
    APOLLO_15 = 1971, 7, 30, 'Apollo 15 (Falcon)'
    APOLLO_16 = 1972, 4, 21, 'Apollo 16 (Orion)'
    APOLLO_17 = 1972, 12, 11, 'Apollo 17 (Challenger)'
</pre> <p>There are some additional caveats to be aware of:</p> <ul> <li>Enumeration types do not support <a class="reference internal" href="#field-choices-named-groups"><span class="std std-ref">named groups</span></a>. </li> <li>
<p class="first">Because an enumeration with a concrete data type requires all values to match the type, overriding the <a class="reference internal" href="#field-choices-blank-label"><span class="std std-ref">blank label</span></a> cannot be achieved by creating a member with a value of <code>None</code>. Instead, set the <code>__empty__</code> attribute on the class:</p> <pre data-language="python">class Answer(models.IntegerChoices):
    NO = 0, _('No')
    YES = 1, _('Yes')

    __empty__ = _('(Unknown)')
</pre> </li> </ul>    <h3 id="db-column"><code>db_column</code></h3> <dl class="attribute" id="s-db-column"> <dt id="django.db.models.Field.db_column">
<code>Field.db_column</code> </dt> 
</dl> <p>The name of the database column to use for this field. If this isn’t given, Django will use the field’s name.</p> <p>If your database column name is an SQL reserved word, or contains characters that aren’t allowed in Python variable names – notably, the hyphen – that’s OK. Django quotes column and table names behind the scenes.</p>   <h3 id="db-index"><code>db_index</code></h3> <dl class="attribute" id="s-db-index"> <dt id="django.db.models.Field.db_index">
<code>Field.db_index</code> </dt> 
</dl> <p>If <code>True</code>, a database index will be created for this field.</p>   <h3 id="db-tablespace"><code>db_tablespace</code></h3> <dl class="attribute" id="s-db-tablespace"> <dt id="django.db.models.Field.db_tablespace">
<code>Field.db_tablespace</code> </dt> 
</dl> <p>The name of the <a class="reference internal" href="../../topics/db/tablespaces"><span class="doc">database tablespace</span></a> to use for this field’s index, if this field is indexed. The default is the project’s <a class="reference internal" href="../settings#std:setting-DEFAULT_INDEX_TABLESPACE"><code>DEFAULT_INDEX_TABLESPACE</code></a> setting, if set, or the <a class="reference internal" href="options#django.db.models.Options.db_tablespace" title="django.db.models.Options.db_tablespace"><code>db_tablespace</code></a> of the model, if any. If the backend doesn’t support tablespaces for indexes, this option is ignored.</p>   <h3 id="default"><code>default</code></h3> <dl class="attribute" id="s-default"> <dt id="django.db.models.Field.default">
<code>Field.default</code> </dt> 
</dl> <p>The default value for the field. This can be a value or a callable object. If callable it will be called every time a new object is created.</p> <p>The default can’t be a mutable object (model instance, <code>list</code>, <code>set</code>, etc.), as a reference to the same instance of that object would be used as the default value in all new model instances. Instead, wrap the desired default in a callable. For example, if you want to specify a default <code>dict</code> for <a class="reference internal" href="#django.db.models.JSONField" title="django.db.models.JSONField"><code>JSONField</code></a>, use a function:</p> <pre data-language="python">def contact_default():
    return {"email": "to1@example.com"}

contact_info = JSONField("ContactInfo", default=contact_default)
</pre> <p><code>lambda</code>s can’t be used for field options like <code>default</code> because they can’t be <a class="reference internal" href="../../topics/migrations#migration-serializing"><span class="std std-ref">serialized by migrations</span></a>. See that documentation for other caveats.</p> <p>For fields like <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> that map to model instances, defaults should be the value of the field they reference (<code>pk</code> unless <a class="reference internal" href="#django.db.models.ForeignKey.to_field" title="django.db.models.ForeignKey.to_field"><code>to_field</code></a> is set) instead of model instances.</p> <p>The default value is used when new model instances are created and a value isn’t provided for the field. When the field is a primary key, the default is also used when the field is set to <code>None</code>.</p>   <h3 id="editable"><code>editable</code></h3> <dl class="attribute" id="s-editable"> <dt id="django.db.models.Field.editable">
<code>Field.editable</code> </dt> 
</dl> <p>If <code>False</code>, the field will not be displayed in the admin or any other <a class="reference internal" href="../../topics/forms/modelforms#django.forms.ModelForm" title="django.forms.ModelForm"><code>ModelForm</code></a>. They are also skipped during <a class="reference internal" href="instances#validating-objects"><span class="std std-ref">model validation</span></a>. Default is <code>True</code>.</p>   <h3 id="error-messages"><code>error_messages</code></h3> <dl class="attribute" id="s-error-messages"> <dt id="django.db.models.Field.error_messages">
<code>Field.error_messages</code> </dt> 
</dl> <p>The <code>error_messages</code> argument lets you override the default messages that the field will raise. Pass in a dictionary with keys matching the error messages you want to override.</p> <p>Error message keys include <code>null</code>, <code>blank</code>, <code>invalid</code>, <code>invalid_choice</code>, <code>unique</code>, and <code>unique_for_date</code>. Additional error message keys are specified for each field in the <a class="reference internal" href="#field-types">Field types</a> section below.</p> <p>These error messages often don’t propagate to forms. See <a class="reference internal" href="../../topics/forms/modelforms#considerations-regarding-model-errormessages"><span class="std std-ref">Considerations regarding model’s error_messages</span></a>.</p>   <h3 id="help-text"><code>help_text</code></h3> <dl class="attribute" id="s-help-text"> <dt id="django.db.models.Field.help_text">
<code>Field.help_text</code> </dt> 
</dl> <p>Extra “help” text to be displayed with the form widget. It’s useful for documentation even if your field isn’t used on a form.</p> <p>Note that this value is <em>not</em> HTML-escaped in automatically-generated forms. This lets you include HTML in <a class="reference internal" href="#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><code>help_text</code></a> if you so desire. For example:</p> <pre data-language="python">help_text="Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;."
</pre> <p>Alternatively you can use plain text and <a class="reference internal" href="../utils#django.utils.html.escape" title="django.utils.html.escape"><code>django.utils.html.escape()</code></a> to escape any HTML special characters. Ensure that you escape any help text that may come from untrusted users to avoid a cross-site scripting attack.</p>   <h3 id="primary-key"><code>primary_key</code></h3> <dl class="attribute" id="s-primary-key"> <dt id="django.db.models.Field.primary_key">
<code>Field.primary_key</code> </dt> 
</dl> <p>If <code>True</code>, this field is the primary key for the model.</p> <p>If you don’t specify <code>primary_key=True</code> for any field in your model, Django will automatically add a field to hold the primary key, so you don’t need to set <code>primary_key=True</code> on any of your fields unless you want to override the default primary-key behavior. The type of auto-created primary key fields can be specified per app in <a class="reference internal" href="../applications#django.apps.AppConfig.default_auto_field" title="django.apps.AppConfig.default_auto_field"><code>AppConfig.default_auto_field</code></a> or globally in the <a class="reference internal" href="../settings#std:setting-DEFAULT_AUTO_FIELD"><code>DEFAULT_AUTO_FIELD</code></a> setting. For more, see <a class="reference internal" href="../../topics/db/models#automatic-primary-key-fields"><span class="std std-ref">Automatic primary key fields</span></a>.</p> <p><code>primary_key=True</code> implies <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null=False</code></a> and <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code>unique=True</code></a>. Only one primary key is allowed on an object.</p> <p>The primary key field is read-only. If you change the value of the primary key on an existing object and then save it, a new object will be created alongside the old one.</p> <div class="versionchanged"> <span class="title">Changed in Django 3.2:</span> <p>In older versions, auto-created primary key fields were always <a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a>s.</p> </div>   <h3 id="unique"><code>unique</code></h3> <dl class="attribute" id="s-unique"> <dt id="django.db.models.Field.unique">
<code>Field.unique</code> </dt> 
</dl> <p>If <code>True</code>, this field must be unique throughout the table.</p> <p>This is enforced at the database level and by model validation. If you try to save a model with a duplicate value in a <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code>unique</code></a> field, a <a class="reference internal" href="../exceptions#django.db.IntegrityError" title="django.db.IntegrityError"><code>django.db.IntegrityError</code></a> will be raised by the model’s <a class="reference internal" href="instances#django.db.models.Model.save" title="django.db.models.Model.save"><code>save()</code></a> method.</p> <p>This option is valid on all field types except <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> and <a class="reference internal" href="#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>.</p> <p>Note that when <code>unique</code> is <code>True</code>, you don’t need to specify <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code>db_index</code></a>, because <code>unique</code> implies the creation of an index.</p>   <h3 id="unique-for-date"><code>unique_for_date</code></h3> <dl class="attribute" id="s-unique-for-date"> <dt id="django.db.models.Field.unique_for_date">
<code>Field.unique_for_date</code> </dt> 
</dl> <p>Set this to the name of a <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code>DateField</code></a> or <a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code>DateTimeField</code></a> to require that this field be unique for the value of the date field.</p> <p>For example, if you have a field <code>title</code> that has <code>unique_for_date="pub_date"</code>, then Django wouldn’t allow the entry of two records with the same <code>title</code> and <code>pub_date</code>.</p> <p>Note that if you set this to point to a <a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code>DateTimeField</code></a>, only the date portion of the field will be considered. Besides, when <a class="reference internal" href="../settings#std:setting-USE_TZ"><code>USE_TZ</code></a> is <code>True</code>, the check will be performed in the <a class="reference internal" href="../../topics/i18n/timezones#default-current-time-zone"><span class="std std-ref">current time zone</span></a> at the time the object gets saved.</p> <p>This is enforced by <a class="reference internal" href="instances#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code>Model.validate_unique()</code></a> during model validation but not at the database level. If any <a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code>unique_for_date</code></a> constraint involves fields that are not part of a <a class="reference internal" href="../../topics/forms/modelforms#django.forms.ModelForm" title="django.forms.ModelForm"><code>ModelForm</code></a> (for example, if one of the fields is listed in <code>exclude</code> or has <a class="reference internal" href="#django.db.models.Field.editable" title="django.db.models.Field.editable"><code>editable=False</code></a>), <a class="reference internal" href="instances#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code>Model.validate_unique()</code></a> will skip validation for that particular constraint.</p>   <h3 id="unique-for-month"><code>unique_for_month</code></h3> <dl class="attribute" id="s-unique-for-month"> <dt id="django.db.models.Field.unique_for_month">
<code>Field.unique_for_month</code> </dt> 
</dl> <p>Like <a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code>unique_for_date</code></a>, but requires the field to be unique with respect to the month.</p>   <h3 id="unique-for-year"><code>unique_for_year</code></h3> <dl class="attribute" id="s-unique-for-year"> <dt id="django.db.models.Field.unique_for_year">
<code>Field.unique_for_year</code> </dt> 
</dl> <p>Like <a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code>unique_for_date</code></a> and <a class="reference internal" href="#django.db.models.Field.unique_for_month" title="django.db.models.Field.unique_for_month"><code>unique_for_month</code></a>.</p>   <h3 id="verbose-name"><code>verbose_name</code></h3> <dl class="attribute" id="s-verbose-name"> <dt id="django.db.models.Field.verbose_name">
<code>Field.verbose_name</code> </dt> 
</dl> <p>A human-readable name for the field. If the verbose name isn’t given, Django will automatically create it using the field’s attribute name, converting underscores to spaces. See <a class="reference internal" href="../../topics/db/models#verbose-field-names"><span class="std std-ref">Verbose field names</span></a>.</p>   <h3 id="validators"><code>validators</code></h3> <dl class="attribute" id="s-validators"> <dt id="django.db.models.Field.validators">
<code>Field.validators</code> </dt> 
</dl> <p>A list of validators to run for this field. See the <a class="reference internal" href="../validators"><span class="doc">validators documentation</span></a> for more information.</p>  <h4 id="registering-and-fetching-lookups">Registering and fetching lookups</h4> <p id="s-registering-and-fetching-lookups"><code>Field</code> implements the <a class="reference internal" href="lookups#lookup-registration-api"><span class="std std-ref">lookup registration API</span></a>. The API can be used to customize which lookups are available for a field class, and how lookups are fetched from a field.</p>     <h2 id="model-field-types">Field types</h2>  <h3 id="autofield"><code>AutoField</code></h3> <dl class="class" id="s-field-types"> <dt id="django.db.models.AutoField">
<code>class AutoField(**options)</code> </dt> 
</dl> <p>An <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code>IntegerField</code></a> that automatically increments according to available IDs. You usually won’t need to use this directly; a primary key field will automatically be added to your model if you don’t specify otherwise. See <a class="reference internal" href="../../topics/db/models#automatic-primary-key-fields"><span class="std std-ref">Automatic primary key fields</span></a>.</p>   <h3 id="bigautofield"><code>BigAutoField</code></h3> <dl class="class" id="s-bigautofield"> <dt id="django.db.models.BigAutoField">
<code>class BigAutoField(**options)</code> </dt> 
</dl> <p>A 64-bit integer, much like an <a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a> except that it is guaranteed to fit numbers from <code>1</code> to <code>9223372036854775807</code>.</p>   <h3 id="bigintegerfield"><code>BigIntegerField</code></h3> <dl class="class" id="s-bigintegerfield"> <dt id="django.db.models.BigIntegerField">
<code>class BigIntegerField(**options)</code> </dt> 
</dl> <p>A 64-bit integer, much like an <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code>IntegerField</code></a> except that it is guaranteed to fit numbers from <code>-9223372036854775808</code> to <code>9223372036854775807</code>. The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.NumberInput" title="django.forms.NumberInput"><code>NumberInput</code></a>.</p>   <h3 id="binaryfield"><code>BinaryField</code></h3> <dl class="class" id="s-binaryfield"> <dt id="django.db.models.BinaryField">
<code>class BinaryField(max_length=None, **options)</code> </dt> 
</dl> <p>A field to store raw binary data. It can be assigned <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><code>bytes</code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.10)"><code>bytearray</code></a>, or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.10)"><code>memoryview</code></a>.</p> <p>By default, <code>BinaryField</code> sets <a class="reference internal" href="#django.db.models.Field.editable" title="django.db.models.Field.editable"><code>editable</code></a> to <code>False</code>, in which case it can’t be included in a <a class="reference internal" href="../../topics/forms/modelforms#django.forms.ModelForm" title="django.forms.ModelForm"><code>ModelForm</code></a>.</p> <p><code>BinaryField</code> has one extra optional argument:</p> <dl class="attribute"> <dt id="django.db.models.BinaryField.max_length">
<code>BinaryField.max_length</code> </dt> <dd>
<p>The maximum length (in bytes) of the field. The maximum length is enforced in Django’s validation using <a class="reference internal" href="../validators#django.core.validators.MaxLengthValidator" title="django.core.validators.MaxLengthValidator"><code>MaxLengthValidator</code></a>.</p> </dd>
</dl> <div class="admonition-abusing-binaryfield admonition"> <p class="first admonition-title">Abusing <code>BinaryField</code></p> <p class="last">Although you might think about storing files in the database, consider that it is bad design in 99% of the cases. This field is <em>not</em> a replacement for proper <a class="reference internal" href="../../howto/static-files/index"><span class="doc">static files</span></a> handling.</p> </div>   <h3 id="booleanfield"><code>BooleanField</code></h3> <dl class="class" id="s-booleanfield"> <dt id="django.db.models.BooleanField">
<code>class BooleanField(**options)</code> </dt> 
</dl> <p>A true/false field.</p> <p>The default form widget for this field is <a class="reference internal" href="../forms/widgets#django.forms.CheckboxInput" title="django.forms.CheckboxInput"><code>CheckboxInput</code></a>, or <a class="reference internal" href="../forms/widgets#django.forms.NullBooleanSelect" title="django.forms.NullBooleanSelect"><code>NullBooleanSelect</code></a> if <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null=True</code></a>.</p> <p>The default value of <code>BooleanField</code> is <code>None</code> when <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code>Field.default</code></a> isn’t defined.</p>   <h3 id="charfield"><code>CharField</code></h3> <dl class="class" id="s-charfield"> <dt id="django.db.models.CharField">
<code>class CharField(max_length=None, **options)</code> </dt> 
</dl> <p>A string field, for small- to large-sized strings.</p> <p>For large amounts of text, use <a class="reference internal" href="#django.db.models.TextField" title="django.db.models.TextField"><code>TextField</code></a>.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a>.</p> <p><a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> has two extra arguments:</p> <dl class="attribute"> <dt id="django.db.models.CharField.max_length">
<code>CharField.max_length</code> </dt> <dd>
<p>Required. The maximum length (in characters) of the field. The max_length is enforced at the database level and in Django’s validation using <a class="reference internal" href="../validators#django.core.validators.MaxLengthValidator" title="django.core.validators.MaxLengthValidator"><code>MaxLengthValidator</code></a>.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If you are writing an application that must be portable to multiple database backends, you should be aware that there are restrictions on <code>max_length</code> for some backends. Refer to the <a class="reference internal" href="../databases"><span class="doc">database backend notes</span></a> for details.</p> </div> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.CharField.db_collation">
<code>CharField.db_collation</code> </dt> <dd>
<div class="versionadded"> <span class="title">New in Django 3.2.</span> </div> <p>Optional. The database collation name of the field.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Collation names are not standardized. As such, this will not be portable across multiple database backends.</p> </div> <div class="admonition-oracle admonition"> <p class="first admonition-title">Oracle</p> <p class="last">Oracle supports collations only when the <code>MAX_STRING_SIZE</code> database initialization parameter is set to <code>EXTENDED</code>.</p> </div> </dd>
</dl>   <h3 id="datefield"><code>DateField</code></h3> <dl class="class" id="s-datefield"> <dt id="django.db.models.DateField">
<code>class DateField(auto_now=False, auto_now_add=False, **options)</code> </dt> 
</dl> <p>A date, represented in Python by a <code>datetime.date</code> instance. Has a few extra, optional arguments:</p> <dl class="attribute"> <dt id="django.db.models.DateField.auto_now">
<code>DateField.auto_now</code> </dt> <dd>
<p>Automatically set the field to now every time the object is saved. Useful for “last-modified” timestamps. Note that the current date is <em>always</em> used; it’s not just a default value that you can override.</p> <p>The field is only automatically updated when calling <a class="reference internal" href="instances#django.db.models.Model.save" title="django.db.models.Model.save"><code>Model.save()</code></a>. The field isn’t updated when making updates to other fields in other ways such as <a class="reference internal" href="querysets#django.db.models.query.QuerySet.update" title="django.db.models.query.QuerySet.update"><code>QuerySet.update()</code></a>, though you can specify a custom value for the field in an update like that.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.DateField.auto_now_add">
<code>DateField.auto_now_add</code> </dt> <dd>
<p>Automatically set the field to now when the object is first created. Useful for creation of timestamps. Note that the current date is <em>always</em> used; it’s not just a default value that you can override. So even if you set a value for this field when creating the object, it will be ignored. If you want to be able to modify this field, set the following instead of <code>auto_now_add=True</code>:</p> <ul class="simple"> <li>For <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code>DateField</code></a>: <code>default=date.today</code> - from <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.date.today" title="(in Python v3.10)"><code>datetime.date.today()</code></a>
</li> <li>For <a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code>DateTimeField</code></a>: <code>default=timezone.now</code> - from <a class="reference internal" href="../utils#django.utils.timezone.now" title="django.utils.timezone.now"><code>django.utils.timezone.now()</code></a>
</li> </ul> </dd>
</dl> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.DateInput" title="django.forms.DateInput"><code>DateInput</code></a>. The admin adds a JavaScript calendar, and a shortcut for “Today”. Includes an additional <code>invalid_date</code> error message key.</p> <p>The options <code>auto_now_add</code>, <code>auto_now</code>, and <code>default</code> are mutually exclusive. Any combination of these options will result in an error.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">As currently implemented, setting <code>auto_now</code> or <code>auto_now_add</code> to <code>True</code> will cause the field to have <code>editable=False</code> and <code>blank=True</code> set.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The <code>auto_now</code> and <code>auto_now_add</code> options will always use the date in the <a class="reference internal" href="../../topics/i18n/timezones#default-current-time-zone"><span class="std std-ref">default timezone</span></a> at the moment of creation or update. If you need something different, you may want to consider using your own callable default or overriding <code>save()</code> instead of using <code>auto_now</code> or <code>auto_now_add</code>; or using a <code>DateTimeField</code> instead of a <code>DateField</code> and deciding how to handle the conversion from datetime to date at display time.</p> </div>   <h3 id="datetimefield"><code>DateTimeField</code></h3> <dl class="class" id="s-datetimefield"> <dt id="django.db.models.DateTimeField">
<code>class DateTimeField(auto_now=False, auto_now_add=False, **options)</code> </dt> 
</dl> <p>A date and time, represented in Python by a <code>datetime.datetime</code> instance. Takes the same extra arguments as <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code>DateField</code></a>.</p> <p>The default form widget for this field is a single <a class="reference internal" href="../forms/widgets#django.forms.DateTimeInput" title="django.forms.DateTimeInput"><code>DateTimeInput</code></a>. The admin uses two separate <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a> widgets with JavaScript shortcuts.</p>   <h3 id="decimalfield"><code>DecimalField</code></h3> <dl class="class" id="s-decimalfield"> <dt id="django.db.models.DecimalField">
<code>class DecimalField(max_digits=None, decimal_places=None, **options)</code> </dt> 
</dl> <p>A fixed-precision decimal number, represented in Python by a <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.10)"><code>Decimal</code></a> instance. It validates the input using <a class="reference internal" href="../validators#django.core.validators.DecimalValidator" title="django.core.validators.DecimalValidator"><code>DecimalValidator</code></a>.</p> <p>Has two <strong>required</strong> arguments:</p> <dl class="attribute"> <dt id="django.db.models.DecimalField.max_digits">
<code>DecimalField.max_digits</code> </dt> <dd>
<p>The maximum number of digits allowed in the number. Note that this number must be greater than or equal to <code>decimal_places</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.DecimalField.decimal_places">
<code>DecimalField.decimal_places</code> </dt> <dd>
<p>The number of decimal places to store with the number.</p> </dd>
</dl> <p>For example, to store numbers up to <code>999</code> with a resolution of 2 decimal places, you’d use:</p> <pre data-language="python">models.DecimalField(..., max_digits=5, decimal_places=2)
</pre> <p>And to store numbers up to approximately one billion with a resolution of 10 decimal places:</p> <pre data-language="python">models.DecimalField(..., max_digits=19, decimal_places=10)
</pre> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.NumberInput" title="django.forms.NumberInput"><code>NumberInput</code></a> when <a class="reference internal" href="../forms/fields#django.forms.Field.localize" title="django.forms.Field.localize"><code>localize</code></a> is <code>False</code> or <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a> otherwise.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For more information about the differences between the <a class="reference internal" href="#django.db.models.FloatField" title="django.db.models.FloatField"><code>FloatField</code></a> and <a class="reference internal" href="#django.db.models.DecimalField" title="django.db.models.DecimalField"><code>DecimalField</code></a> classes, please see <a class="reference internal" href="#floatfield-vs-decimalfield"><span class="std std-ref">FloatField vs. DecimalField</span></a>. You should also be aware of <a class="reference internal" href="../databases#sqlite-decimal-handling"><span class="std std-ref">SQLite limitations</span></a> of decimal fields.</p> </div>   <h3 id="durationfield"><code>DurationField</code></h3> <dl class="class" id="s-durationfield"> <dt id="django.db.models.DurationField">
<code>class DurationField(**options)</code> </dt> 
</dl> <p>A field for storing periods of time - modeled in Python by <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.10)"><code>timedelta</code></a>. When used on PostgreSQL, the data type used is an <code>interval</code> and on Oracle the data type is <code>INTERVAL DAY(9) TO
SECOND(6)</code>. Otherwise a <code>bigint</code> of microseconds is used.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Arithmetic with <code>DurationField</code> works in most cases. However on all databases other than PostgreSQL, comparing the value of a <code>DurationField</code> to arithmetic on <code>DateTimeField</code> instances will not work as expected.</p> </div>   <h3 id="emailfield"><code>EmailField</code></h3> <dl class="class" id="s-emailfield"> <dt id="django.db.models.EmailField">
<code>class EmailField(max_length=254, **options)</code> </dt> 
</dl> <p>A <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> that checks that the value is a valid email address using <a class="reference internal" href="../validators#django.core.validators.EmailValidator" title="django.core.validators.EmailValidator"><code>EmailValidator</code></a>.</p>   <h3 id="filefield"><code>FileField</code></h3> <dl class="class" id="s-filefield"> <dt id="django.db.models.FileField">
<code>class FileField(upload_to=None, max_length=100, **options)</code> </dt> 
</dl> <p>A file-upload field.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The <code>primary_key</code> argument isn’t supported and will raise an error if used.</p> </div> <p>Has two optional arguments:</p> <dl class="attribute"> <dt id="django.db.models.FileField.upload_to">
<code>FileField.upload_to</code> </dt> <dd>
<p>This attribute provides a way of setting the upload directory and file name, and can be set in two ways. In both cases, the value is passed to the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.save" title="django.core.files.storage.Storage.save"><code>Storage.save()</code></a> method.</p> <p>If you specify a string value or a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code>Path</code></a>, it may contain <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.10)"><code>strftime()</code></a> formatting, which will be replaced by the date/time of the file upload (so that uploaded files don’t fill up the given directory). For example:</p> <pre data-language="python">class MyModel(models.Model):
    # file will be uploaded to MEDIA_ROOT/uploads
    upload = models.FileField(upload_to='uploads/')
    # or...
    # file will be saved to MEDIA_ROOT/uploads/2015/01/30
    upload = models.FileField(upload_to='uploads/%Y/%m/%d/')
</pre> <p>If you are using the default <a class="reference internal" href="../files/storage#django.core.files.storage.FileSystemStorage" title="django.core.files.storage.FileSystemStorage"><code>FileSystemStorage</code></a>, the string value will be appended to your <a class="reference internal" href="../settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a> path to form the location on the local filesystem where uploaded files will be stored. If you are using a different storage, check that storage’s documentation to see how it handles <code>upload_to</code>.</p> <p><code>upload_to</code> may also be a callable, such as a function. This will be called to obtain the upload path, including the filename. This callable must accept two arguments and return a Unix-style path (with forward slashes) to be passed along to the storage system. The two arguments are:</p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Argument</th> <th class="head">Description</th> </tr> </thead>  <tr>
<td><code>instance</code></td> <td>
<p class="first">An instance of the model where the <code>FileField</code> is defined. More specifically, this is the particular instance where the current file is being attached.</p> <p class="last">In most cases, this object will not have been saved to the database yet, so if it uses the default <code>AutoField</code>, <em>it might not yet have a value for its primary key field</em>.</p> </td> </tr> <tr>
<td><code>filename</code></td> <td>The filename that was originally given to the file. This may or may not be taken into account when determining the final destination path.</td> </tr>  </table> <p>For example:</p> <pre data-language="python">def user_directory_path(instance, filename):
    # file will be uploaded to MEDIA_ROOT/user_&lt;id&gt;/&lt;filename&gt;
    return 'user_{0}/{1}'.format(instance.user.id, filename)

class MyModel(models.Model):
    upload = models.FileField(upload_to=user_directory_path)
</pre> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.FileField.storage">
<code>FileField.storage</code> </dt> <dd>
<p>A storage object, or a callable which returns a storage object. This handles the storage and retrieval of your files. See <a class="reference internal" href="../../topics/files"><span class="doc">Managing files</span></a> for details on how to provide this object.</p> </dd>
</dl> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><code>ClearableFileInput</code></a>.</p> <p>Using a <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a> or an <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> (see below) in a model takes a few steps:</p> <ol class="arabic simple"> <li>In your settings file, you’ll need to define <a class="reference internal" href="../settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a> as the full path to a directory where you’d like Django to store uploaded files. (For performance, these files are not stored in the database.) Define <a class="reference internal" href="../settings#std:setting-MEDIA_URL"><code>MEDIA_URL</code></a> as the base public URL of that directory. Make sure that this directory is writable by the web server’s user account.</li> <li>Add the <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a> or <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> to your model, defining the <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code>upload_to</code></a> option to specify a subdirectory of <a class="reference internal" href="../settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a> to use for uploaded files.</li> <li>All that will be stored in your database is a path to the file (relative to <a class="reference internal" href="../settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a>). You’ll most likely want to use the convenience <a class="reference internal" href="#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><code>url</code></a> attribute provided by Django. For example, if your <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> is called <code>mug_shot</code>, you can get the absolute path to your image in a template with <code>{{ object.mug_shot.url }}</code>.</li> </ol> <p>For example, say your <a class="reference internal" href="../settings#std:setting-MEDIA_ROOT"><code>MEDIA_ROOT</code></a> is set to <code>'/home/media'</code>, and <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code>upload_to</code></a> is set to <code>'photos/%Y/%m/%d'</code>. The <code>'%Y/%m/%d'</code> part of <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code>upload_to</code></a> is <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.10)"><code>strftime()</code></a> formatting; <code>'%Y'</code> is the four-digit year, <code>'%m'</code> is the two-digit month and <code>'%d'</code> is the two-digit day. If you upload a file on Jan. 15, 2007, it will be saved in the directory <code>/home/media/photos/2007/01/15</code>.</p> <p>If you wanted to retrieve the uploaded file’s on-disk filename, or the file’s size, you could use the <a class="reference internal" href="../files/file#django.core.files.File.name" title="django.core.files.File.name"><code>name</code></a> and <a class="reference internal" href="../files/file#django.core.files.File.size" title="django.core.files.File.size"><code>size</code></a> attributes respectively; for more information on the available attributes and methods, see the <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a> class reference and the <a class="reference internal" href="../../topics/files"><span class="doc">Managing files</span></a> topic guide.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The file is saved as part of saving the model in the database, so the actual file name used on disk cannot be relied on until after the model has been saved.</p> </div> <p>The uploaded file’s relative URL can be obtained using the <a class="reference internal" href="#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><code>url</code></a> attribute. Internally, this calls the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><code>url()</code></a> method of the underlying <a class="reference internal" href="../files/storage#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code>Storage</code></a> class.</p> <p id="file-upload-security">Note that whenever you deal with uploaded files, you should pay close attention to where you’re uploading them and what type of files they are, to avoid security holes. <em>Validate all uploaded files</em> so that you’re sure the files are what you think they are. For example, if you blindly let somebody upload files, without validation, to a directory that’s within your web server’s document root, then somebody could upload a CGI or PHP script and execute that script by visiting its URL on your site. Don’t allow that.</p> <p>Also note that even an uploaded HTML file, since it can be executed by the browser (though not by the server), can pose security threats that are equivalent to XSS or CSRF attacks.</p> <p><a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a> instances are created in your database as <code>varchar</code> columns with a default max length of 100 characters. As with other fields, you can change the maximum length using the <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> argument.</p>  <h4 id="filefield-and-fieldfile">
<code>FileField</code> and <code>FieldFile</code>
</h4> <dl class="class" id="s-filefield-and-fieldfile"> <dt id="django.db.models.fields.files.FieldFile">
<code>class FieldFile</code> </dt> 
</dl> <p>When you access a <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a> on a model, you are given an instance of <a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code>FieldFile</code></a> as a proxy for accessing the underlying file.</p> <p>The API of <a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code>FieldFile</code></a> mirrors that of <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a>, with one key difference: <em>The object wrapped by the class is not necessarily a wrapper around Python’s built-in file object.</em> Instead, it is a wrapper around the result of the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.open" title="django.core.files.storage.Storage.open"><code>Storage.open()</code></a> method, which may be a <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a> object, or it may be a custom storage’s implementation of the <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a> API.</p> <p>In addition to the API inherited from <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a> such as <code>read()</code> and <code>write()</code>, <a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code>FieldFile</code></a> includes several methods that can be used to interact with the underlying file:</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last">Two methods of this class, <a class="reference internal" href="#django.db.models.fields.files.FieldFile.save" title="django.db.models.fields.files.FieldFile.save"><code>save()</code></a> and <a class="reference internal" href="#django.db.models.fields.files.FieldFile.delete" title="django.db.models.fields.files.FieldFile.delete"><code>delete()</code></a>, default to saving the model object of the associated <code>FieldFile</code> in the database.</p> </div> <dl class="attribute"> <dt id="django.db.models.fields.files.FieldFile.name">
<code>FieldFile.name</code> </dt> 
</dl> <p>The name of the file including the relative path from the root of the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code>Storage</code></a> of the associated <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a>.</p> <dl class="attribute"> <dt id="django.db.models.fields.files.FieldFile.path">
<code>FieldFile.path</code> </dt> 
</dl> <p>A read-only property to access the file’s local filesystem path by calling the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.path" title="django.core.files.storage.Storage.path"><code>path()</code></a> method of the underlying <a class="reference internal" href="../files/storage#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code>Storage</code></a> class.</p> <dl class="attribute"> <dt id="django.db.models.fields.files.FieldFile.size">
<code>FieldFile.size</code> </dt> 
</dl> <p>The result of the underlying <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.size" title="django.core.files.storage.Storage.size"><code>Storage.size()</code></a> method.</p> <dl class="attribute"> <dt id="django.db.models.fields.files.FieldFile.url">
<code>FieldFile.url</code> </dt> 
</dl> <p>A read-only property to access the file’s relative URL by calling the <a class="reference internal" href="../files/storage#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><code>url()</code></a> method of the underlying <a class="reference internal" href="../files/storage#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code>Storage</code></a> class.</p> <dl class="method"> <dt id="django.db.models.fields.files.FieldFile.open">
<code>FieldFile.open(mode='rb')</code> </dt> 
</dl> <p>Opens or reopens the file associated with this instance in the specified <code>mode</code>. Unlike the standard Python <code>open()</code> method, it doesn’t return a file descriptor.</p> <p>Since the underlying file is opened implicitly when accessing it, it may be unnecessary to call this method except to reset the pointer to the underlying file or to change the <code>mode</code>.</p> <dl class="method"> <dt id="django.db.models.fields.files.FieldFile.close">
<code>FieldFile.close()</code> </dt> 
</dl> <p>Behaves like the standard Python <code>file.close()</code> method and closes the file associated with this instance.</p> <dl class="method"> <dt id="django.db.models.fields.files.FieldFile.save">
<code>FieldFile.save(name, content, save=True)</code> </dt> 
</dl> <p>This method takes a filename and file contents and passes them to the storage class for the field, then associates the stored file with the model field. If you want to manually associate file data with <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a> instances on your model, the <code>save()</code> method is used to persist that file data.</p> <p>Takes two required arguments: <code>name</code> which is the name of the file, and <code>content</code> which is an object containing the file’s contents. The optional <code>save</code> argument controls whether or not the model instance is saved after the file associated with this field has been altered. Defaults to <code>True</code>.</p> <p>Note that the <code>content</code> argument should be an instance of <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>django.core.files.File</code></a>, not Python’s built-in file object. You can construct a <a class="reference internal" href="../files/file#django.core.files.File" title="django.core.files.File"><code>File</code></a> from an existing Python file object like this:</p> <pre data-language="python">from django.core.files import File
# Open an existing file using Python's built-in open()
f = open('/path/to/hello.world')
myfile = File(f)
</pre> <p>Or you can construct one from a Python string like this:</p> <pre data-language="python">from django.core.files.base import ContentFile
myfile = ContentFile("hello world")
</pre> <p>For more information, see <a class="reference internal" href="../../topics/files"><span class="doc">Managing files</span></a>.</p> <dl class="method"> <dt id="django.db.models.fields.files.FieldFile.delete">
<code>FieldFile.delete(save=True)</code> </dt> 
</dl> <p>Deletes the file associated with this instance and clears all attributes on the field. Note: This method will close the file if it happens to be open when <code>delete()</code> is called.</p> <p>The optional <code>save</code> argument controls whether or not the model instance is saved after the file associated with this field has been deleted. Defaults to <code>True</code>.</p> <p>Note that when a model is deleted, related files are not deleted. If you need to cleanup orphaned files, you’ll need to handle it yourself (for instance, with a custom management command that can be run manually or scheduled to run periodically via e.g. cron).</p>    <h3 id="filepathfield"><code>FilePathField</code></h3> <dl class="class" id="s-filepathfield"> <dt id="django.db.models.FilePathField">
<code>class FilePathField(path='', match=None, recursive=False, allow_files=True, allow_folders=False, max_length=100, **options)</code> </dt> 
</dl> <p>A <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> whose choices are limited to the filenames in a certain directory on the filesystem. Has some special arguments, of which the first is <strong>required</strong>:</p> <dl class="attribute"> <dt id="django.db.models.FilePathField.path">
<code>FilePathField.path</code> </dt> <dd>
<p>Required. The absolute filesystem path to a directory from which this <a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code>FilePathField</code></a> should get its choices. Example: <code>"/home/images"</code>.</p> <p><code>path</code> may also be a callable, such as a function to dynamically set the path at runtime. Example:</p> <pre data-language="python">import os
from django.conf import settings
from django.db import models

def images_path():
    return os.path.join(settings.LOCAL_FILE_DIR, 'images')

class MyModel(models.Model):
    file = models.FilePathField(path=images_path)
</pre> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.FilePathField.match">
<code>FilePathField.match</code> </dt> <dd>
<p>Optional. A regular expression, as a string, that <a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code>FilePathField</code></a> will use to filter filenames. Note that the regex will be applied to the base filename, not the full path. Example: <code>"foo.*\.txt$"</code>, which will match a file called <code>foo23.txt</code> but not <code>bar.txt</code> or <code>foo23.png</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.FilePathField.recursive">
<code>FilePathField.recursive</code> </dt> <dd>
<p>Optional. Either <code>True</code> or <code>False</code>. Default is <code>False</code>. Specifies whether all subdirectories of <a class="reference internal" href="#django.db.models.FilePathField.path" title="django.db.models.FilePathField.path"><code>path</code></a> should be included</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.FilePathField.allow_files">
<code>FilePathField.allow_files</code> </dt> <dd>
<p>Optional. Either <code>True</code> or <code>False</code>. Default is <code>True</code>. Specifies whether files in the specified location should be included. Either this or <a class="reference internal" href="#django.db.models.FilePathField.allow_folders" title="django.db.models.FilePathField.allow_folders"><code>allow_folders</code></a> must be <code>True</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.FilePathField.allow_folders">
<code>FilePathField.allow_folders</code> </dt> <dd>
<p>Optional. Either <code>True</code> or <code>False</code>. Default is <code>False</code>. Specifies whether folders in the specified location should be included. Either this or <a class="reference internal" href="#django.db.models.FilePathField.allow_files" title="django.db.models.FilePathField.allow_files"><code>allow_files</code></a> must be <code>True</code>.</p> </dd>
</dl> <p>The one potential gotcha is that <a class="reference internal" href="#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><code>match</code></a> applies to the base filename, not the full path. So, this example:</p> <pre data-language="python">FilePathField(path="/home/images", match="foo.*", recursive=True)
</pre> <p>…will match <code>/home/images/foo.png</code> but not <code>/home/images/foo/bar.png</code> because the <a class="reference internal" href="#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><code>match</code></a> applies to the base filename (<code>foo.png</code> and <code>bar.png</code>).</p> <p><a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code>FilePathField</code></a> instances are created in your database as <code>varchar</code> columns with a default max length of 100 characters. As with other fields, you can change the maximum length using the <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> argument.</p>   <h3 id="floatfield"><code>FloatField</code></h3> <dl class="class" id="s-floatfield"> <dt id="django.db.models.FloatField">
<code>class FloatField(**options)</code> </dt> 
</dl> <p>A floating-point number represented in Python by a <code>float</code> instance.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.NumberInput" title="django.forms.NumberInput"><code>NumberInput</code></a> when <a class="reference internal" href="../forms/fields#django.forms.Field.localize" title="django.forms.Field.localize"><code>localize</code></a> is <code>False</code> or <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a> otherwise.</p> <div class="admonition-floatfield-vs-decimalfield admonition" id="floatfield-vs-decimalfield"> <p class="first admonition-title"><code>FloatField</code> vs. <code>DecimalField</code></p> <p class="last">The <a class="reference internal" href="#django.db.models.FloatField" title="django.db.models.FloatField"><code>FloatField</code></a> class is sometimes mixed up with the <a class="reference internal" href="#django.db.models.DecimalField" title="django.db.models.DecimalField"><code>DecimalField</code></a> class. Although they both represent real numbers, they represent those numbers differently. <code>FloatField</code> uses Python’s <code>float</code> type internally, while <code>DecimalField</code> uses Python’s <code>Decimal</code> type. For information on the difference between the two, see Python’s documentation for the <a class="reference external" href="https://docs.python.org/3/library/decimal.html#module-decimal" title="(in Python v3.10)"><code>decimal</code></a> module.</p> </div>   <h3 id="genericipaddressfield"><code>GenericIPAddressField</code></h3> <dl class="class" id="s-genericipaddressfield"> <dt id="django.db.models.GenericIPAddressField">
<code>class GenericIPAddressField(protocol='both', unpack_ipv4=False, **options)</code> </dt> 
</dl> <p>An IPv4 or IPv6 address, in string format (e.g. <code>192.0.2.30</code> or <code>2a02:42fe::4</code>). The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a>.</p> <p>The IPv6 address normalization follows <a class="rfc reference external" href="https://tools.ietf.org/html/rfc4291.html#section-2.2" id="index-0"><strong>RFC 4291#section-2.2</strong></a> section 2.2, including using the IPv4 format suggested in paragraph 3 of that section, like <code>::ffff:192.0.2.0</code>. For example, <code>2001:0::0:01</code> would be normalized to <code>2001::1</code>, and <code>::ffff:0a0a:0a0a</code> to <code>::ffff:10.10.10.10</code>. All characters are converted to lowercase.</p> <dl class="attribute"> <dt id="django.db.models.GenericIPAddressField.protocol">
<code>GenericIPAddressField.protocol</code> </dt> <dd>
<p>Limits valid inputs to the specified protocol. Accepted values are <code>'both'</code> (default), <code>'IPv4'</code> or <code>'IPv6'</code>. Matching is case insensitive.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.GenericIPAddressField.unpack_ipv4">
<code>GenericIPAddressField.unpack_ipv4</code> </dt> <dd>
<p>Unpacks IPv4 mapped addresses like <code>::ffff:192.0.2.1</code>. If this option is enabled that address would be unpacked to <code>192.0.2.1</code>. Default is disabled. Can only be used when <code>protocol</code> is set to <code>'both'</code>.</p> </dd>
</dl> <p>If you allow for blank values, you have to allow for null values since blank values are stored as null.</p>   <h3 id="imagefield"><code>ImageField</code></h3> <dl class="class" id="s-imagefield"> <dt id="django.db.models.ImageField">
<code>class ImageField(upload_to=None, height_field=None, width_field=None, max_length=100, **options)</code> </dt> 
</dl> <p>Inherits all attributes and methods from <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a>, but also validates that the uploaded object is a valid image.</p> <p>In addition to the special attributes that are available for <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code>FileField</code></a>, an <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> also has <code>height</code> and <code>width</code> attributes.</p> <p>To facilitate querying on those attributes, <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> has two extra optional arguments:</p> <dl class="attribute"> <dt id="django.db.models.ImageField.height_field">
<code>ImageField.height_field</code> </dt> <dd>
<p>Name of a model field which will be auto-populated with the height of the image each time the model instance is saved.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ImageField.width_field">
<code>ImageField.width_field</code> </dt> <dd>
<p>Name of a model field which will be auto-populated with the width of the image each time the model instance is saved.</p> </dd>
</dl> <p>Requires the <a class="reference external" href="https://pillow.readthedocs.io/en/latest/">Pillow</a> library.</p> <p><a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code>ImageField</code></a> instances are created in your database as <code>varchar</code> columns with a default max length of 100 characters. As with other fields, you can change the maximum length using the <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> argument.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><code>ClearableFileInput</code></a>.</p>   <h3 id="integerfield"><code>IntegerField</code></h3> <dl class="class" id="s-integerfield"> <dt id="django.db.models.IntegerField">
<code>class IntegerField(**options)</code> </dt> 
</dl> <p>An integer. Values from <code>-2147483648</code> to <code>2147483647</code> are safe in all databases supported by Django.</p> <p>It uses <a class="reference internal" href="../validators#django.core.validators.MinValueValidator" title="django.core.validators.MinValueValidator"><code>MinValueValidator</code></a> and <a class="reference internal" href="../validators#django.core.validators.MaxValueValidator" title="django.core.validators.MaxValueValidator"><code>MaxValueValidator</code></a> to validate the input based on the values that the default database supports.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.NumberInput" title="django.forms.NumberInput"><code>NumberInput</code></a> when <a class="reference internal" href="../forms/fields#django.forms.Field.localize" title="django.forms.Field.localize"><code>localize</code></a> is <code>False</code> or <a class="reference internal" href="../forms/widgets#django.forms.TextInput" title="django.forms.TextInput"><code>TextInput</code></a> otherwise.</p>   <h3 id="jsonfield"><code>JSONField</code></h3> <dl class="class" id="s-jsonfield"> <dt id="django.db.models.JSONField">
<code>class JSONField(encoder=None, decoder=None, **options)</code> </dt> 
</dl> <p>A field for storing JSON encoded data. In Python the data is represented in its Python native format: dictionaries, lists, strings, numbers, booleans and <code>None</code>.</p> <p><code>JSONField</code> is supported on MariaDB 10.2.7+, MySQL 5.7.8+, Oracle, PostgreSQL, and SQLite (with the <a class="reference internal" href="../databases#sqlite-json1"><span class="std std-ref">JSON1 extension enabled</span></a>).</p> <dl class="attribute"> <dt id="django.db.models.JSONField.encoder">
<code>JSONField.encoder</code> </dt> <dd>
<p>An optional <a class="reference external" href="https://docs.python.org/3/library/json.html#json.JSONEncoder" title="(in Python v3.10)"><code>json.JSONEncoder</code></a> subclass to serialize data types not supported by the standard JSON serializer (e.g. <code>datetime.datetime</code> or <a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.10)"><code>UUID</code></a>). For example, you can use the <a class="reference internal" href="../../topics/serialization#django.core.serializers.json.DjangoJSONEncoder" title="django.core.serializers.json.DjangoJSONEncoder"><code>DjangoJSONEncoder</code></a> class.</p> <p>Defaults to <code>json.JSONEncoder</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.JSONField.decoder">
<code>JSONField.decoder</code> </dt> <dd>
<p>An optional <a class="reference external" href="https://docs.python.org/3/library/json.html#json.JSONDecoder" title="(in Python v3.10)"><code>json.JSONDecoder</code></a> subclass to deserialize the value retrieved from the database. The value will be in the format chosen by the custom encoder (most often a string). Your deserialization may need to account for the fact that you can’t be certain of the input type. For example, you run the risk of returning a <code>datetime</code> that was actually a string that just happened to be in the same format chosen for <code>datetime</code>s.</p> <p>Defaults to <code>json.JSONDecoder</code>.</p> </dd>
</dl> <p>If you give the field a <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code>default</code></a>, ensure it’s an immutable object, such as a <code>str</code>, or a callable object that returns a fresh mutable object each time, such as <code>dict</code> or a function. Providing a mutable default object like <code>default={}</code> or <code>default=[]</code> shares the one object between all model instances.</p> <p>To query <code>JSONField</code> in the database, see <a class="reference internal" href="../../topics/db/queries#querying-jsonfield"><span class="std std-ref">Querying JSONField</span></a>.</p> <div class="admonition-indexing admonition"> <p class="first admonition-title">Indexing</p> <p class="last"><a class="reference internal" href="indexes#django.db.models.Index" title="django.db.models.Index"><code>Index</code></a> and <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code>Field.db_index</code></a> both create a B-tree index, which isn’t particularly helpful when querying <code>JSONField</code>. On PostgreSQL only, you can use <a class="reference internal" href="../contrib/postgres/indexes#django.contrib.postgres.indexes.GinIndex" title="django.contrib.postgres.indexes.GinIndex"><code>GinIndex</code></a> that is better suited.</p> </div> <div class="admonition-postgresql-users admonition"> <p class="first admonition-title">PostgreSQL users</p> <p class="last">PostgreSQL has two native JSON based data types: <code>json</code> and <code>jsonb</code>. The main difference between them is how they are stored and how they can be queried. PostgreSQL’s <code>json</code> field is stored as the original string representation of the JSON and must be decoded on the fly when queried based on keys. The <code>jsonb</code> field is stored based on the actual structure of the JSON which allows indexing. The trade-off is a small additional cost on writing to the <code>jsonb</code> field. <code>JSONField</code> uses <code>jsonb</code>.</p> </div> <div class="admonition-oracle-users admonition"> <p class="first admonition-title">Oracle users</p> <p class="last">Oracle Database does not support storing JSON scalar values. Only JSON objects and arrays (represented in Python using <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code>dict</code></a> and <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code>list</code></a>) are supported.</p> </div>   <h3 id="positivebigintegerfield"><code>PositiveBigIntegerField</code></h3> <dl class="class" id="s-positivebigintegerfield"> <dt id="django.db.models.PositiveBigIntegerField">
<code>class PositiveBigIntegerField(**options)</code> </dt> 
</dl> <p>Like a <a class="reference internal" href="#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><code>PositiveIntegerField</code></a>, but only allows values under a certain (database-dependent) point. Values from <code>0</code> to <code>9223372036854775807</code> are safe in all databases supported by Django.</p>   <h3 id="positiveintegerfield"><code>PositiveIntegerField</code></h3> <dl class="class" id="s-positiveintegerfield"> <dt id="django.db.models.PositiveIntegerField">
<code>class PositiveIntegerField(**options)</code> </dt> 
</dl> <p>Like an <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code>IntegerField</code></a>, but must be either positive or zero (<code>0</code>). Values from <code>0</code> to <code>2147483647</code> are safe in all databases supported by Django. The value <code>0</code> is accepted for backward compatibility reasons.</p>   <h3 id="positivesmallintegerfield"><code>PositiveSmallIntegerField</code></h3> <dl class="class" id="s-positivesmallintegerfield"> <dt id="django.db.models.PositiveSmallIntegerField">
<code>class PositiveSmallIntegerField(**options)</code> </dt> 
</dl> <p>Like a <a class="reference internal" href="#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><code>PositiveIntegerField</code></a>, but only allows values under a certain (database-dependent) point. Values from <code>0</code> to <code>32767</code> are safe in all databases supported by Django.</p>   <h3 id="slugfield"><code>SlugField</code></h3> <dl class="class" id="s-slugfield"> <dt id="django.db.models.SlugField">
<code>class SlugField(max_length=50, **options)</code> </dt> 
</dl> <p><a class="reference internal" href="https://docs.djangoproject.com/en/4.0/glossary/#term-slug"><span class="xref std std-term">Slug</span></a> is a newspaper term. A slug is a short label for something, containing only letters, numbers, underscores or hyphens. They’re generally used in URLs.</p> <p>Like a CharField, you can specify <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> (read the note about database portability and <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> in that section, too). If <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> is not specified, Django will use a default length of 50.</p> <p>Implies setting <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code>Field.db_index</code></a> to <code>True</code>.</p> <p>It is often useful to automatically prepopulate a SlugField based on the value of some other value. You can do this automatically in the admin using <a class="reference internal" href="../contrib/admin/index#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><code>prepopulated_fields</code></a>.</p> <p>It uses <a class="reference internal" href="../validators#django.core.validators.validate_slug" title="django.core.validators.validate_slug"><code>validate_slug</code></a> or <a class="reference internal" href="../validators#django.core.validators.validate_unicode_slug" title="django.core.validators.validate_unicode_slug"><code>validate_unicode_slug</code></a> for validation.</p> <dl class="attribute"> <dt id="django.db.models.SlugField.allow_unicode">
<code>SlugField.allow_unicode</code> </dt> <dd>
<p>If <code>True</code>, the field accepts Unicode letters in addition to ASCII letters. Defaults to <code>False</code>.</p> </dd>
</dl>   <h3 id="smallautofield"><code>SmallAutoField</code></h3> <dl class="class" id="s-smallautofield"> <dt id="django.db.models.SmallAutoField">
<code>class SmallAutoField(**options)</code> </dt> 
</dl> <p>Like an <a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a>, but only allows values under a certain (database-dependent) limit. Values from <code>1</code> to <code>32767</code> are safe in all databases supported by Django.</p>   <h3 id="smallintegerfield"><code>SmallIntegerField</code></h3> <dl class="class" id="s-smallintegerfield"> <dt id="django.db.models.SmallIntegerField">
<code>class SmallIntegerField(**options)</code> </dt> 
</dl> <p>Like an <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code>IntegerField</code></a>, but only allows values under a certain (database-dependent) point. Values from <code>-32768</code> to <code>32767</code> are safe in all databases supported by Django.</p>   <h3 id="textfield"><code>TextField</code></h3> <dl class="class" id="s-textfield"> <dt id="django.db.models.TextField">
<code>class TextField(**options)</code> </dt> 
</dl> <p>A large text field. The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.Textarea" title="django.forms.Textarea"><code>Textarea</code></a>.</p> <p>If you specify a <code>max_length</code> attribute, it will be reflected in the <a class="reference internal" href="../forms/widgets#django.forms.Textarea" title="django.forms.Textarea"><code>Textarea</code></a> widget of the auto-generated form field. However it is not enforced at the model or database level. Use a <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> for that.</p> <dl class="attribute"> <dt id="django.db.models.TextField.db_collation">
<code>TextField.db_collation</code> </dt> <dd>
<div class="versionadded"> <span class="title">New in Django 3.2.</span> </div> <p>The database collation name of the field.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Collation names are not standardized. As such, this will not be portable across multiple database backends.</p> </div> <div class="admonition-oracle admonition"> <p class="first admonition-title">Oracle</p> <p class="last">Oracle does not support collations for a <code>TextField</code>.</p> </div> </dd>
</dl>   <h3 id="timefield"><code>TimeField</code></h3> <dl class="class" id="s-timefield"> <dt id="django.db.models.TimeField">
<code>class TimeField(auto_now=False, auto_now_add=False, **options)</code> </dt> 
</dl> <p>A time, represented in Python by a <code>datetime.time</code> instance. Accepts the same auto-population options as <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code>DateField</code></a>.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.TimeInput" title="django.forms.TimeInput"><code>TimeInput</code></a>. The admin adds some JavaScript shortcuts.</p>   <h3 id="urlfield"><code>URLField</code></h3> <dl class="class" id="s-urlfield"> <dt id="django.db.models.URLField">
<code>class URLField(max_length=200, **options)</code> </dt> 
</dl> <p>A <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> for a URL, validated by <a class="reference internal" href="../validators#django.core.validators.URLValidator" title="django.core.validators.URLValidator"><code>URLValidator</code></a>.</p> <p>The default form widget for this field is a <a class="reference internal" href="../forms/widgets#django.forms.URLInput" title="django.forms.URLInput"><code>URLInput</code></a>.</p> <p>Like all <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a> subclasses, <a class="reference internal" href="#django.db.models.URLField" title="django.db.models.URLField"><code>URLField</code></a> takes the optional <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> argument. If you don’t specify <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a>, a default of 200 is used.</p>   <h3 id="uuidfield"><code>UUIDField</code></h3> <dl class="class" id="s-uuidfield"> <dt id="django.db.models.UUIDField">
<code>class UUIDField(**options)</code> </dt> 
</dl> <p>A field for storing universally unique identifiers. Uses Python’s <a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.10)"><code>UUID</code></a> class. When used on PostgreSQL, this stores in a <code>uuid</code> datatype, otherwise in a <code>char(32)</code>.</p> <p>Universally unique identifiers are a good alternative to <a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a> for <a class="reference internal" href="#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key</code></a>. The database will not generate the UUID for you, so it is recommended to use <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code>default</code></a>:</p> <pre data-language="python">import uuid
from django.db import models

class MyUUIDModel(models.Model):
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    # other fields
</pre> <p>Note that a callable (with the parentheses omitted) is passed to <code>default</code>, not an instance of <code>UUID</code>.</p> <div class="admonition-lookups-on-postgresql admonition"> <p class="first admonition-title">Lookups on PostgreSQL</p> <p class="last">Using <a class="reference internal" href="querysets#std:fieldlookup-iexact"><code>iexact</code></a>, <a class="reference internal" href="querysets#std:fieldlookup-contains"><code>contains</code></a>, <a class="reference internal" href="querysets#std:fieldlookup-icontains"><code>icontains</code></a>, <a class="reference internal" href="querysets#std:fieldlookup-startswith"><code>startswith</code></a>, <a class="reference internal" href="querysets#std:fieldlookup-istartswith"><code>istartswith</code></a>, <a class="reference internal" href="querysets#std:fieldlookup-endswith"><code>endswith</code></a>, or <a class="reference internal" href="querysets#std:fieldlookup-iendswith"><code>iendswith</code></a> lookups on PostgreSQL don’t work for values without hyphens, because PostgreSQL stores them in a hyphenated uuid datatype type.</p> </div>    <h2 id="relationship-fields">Relationship fields</h2> <p id="s-module-django.db.models.fields.related">Django also defines a set of fields that represent relations.</p>  <h3 id="ref-foreignkey"><code>ForeignKey</code></h3> <dl class="class" id="s-foreignkey"> <dt id="django.db.models.ForeignKey">
<code>class ForeignKey(to, on_delete, **options)</code> </dt> 
</dl> <p>A many-to-one relationship. Requires two positional arguments: the class to which the model is related and the <a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code>on_delete</code></a> option.</p> <p id="recursive-relationships">To create a recursive relationship – an object that has a many-to-one relationship with itself – use <code>models.ForeignKey('self',
on_delete=models.CASCADE)</code>.</p> <p id="lazy-relationships">If you need to create a relationship on a model that has not yet been defined, you can use the name of the model, rather than the model object itself:</p> <pre data-language="python">from django.db import models

class Car(models.Model):
    manufacturer = models.ForeignKey(
        'Manufacturer',
        on_delete=models.CASCADE,
    )
    # ...

class Manufacturer(models.Model):
    # ...
    pass
</pre> <p>Relationships defined this way on <a class="reference internal" href="../../topics/db/models#abstract-base-classes"><span class="std std-ref">abstract models</span></a> are resolved when the model is subclassed as a concrete model and are not relative to the abstract model’s <code>app_label</code>:</p> <div class="literal-block-wrapper docutils container" id="id3"> <div class="code-block-caption"><span class="caption-text">products/models.py</span></div> <pre data-language="python">from django.db import models

class AbstractCar(models.Model):
    manufacturer = models.ForeignKey('Manufacturer', on_delete=models.CASCADE)

    class Meta:
        abstract = True
</pre> </div> <div class="literal-block-wrapper docutils container" id="id4"> <div class="code-block-caption"><span class="caption-text">production/models.py</span></div> <pre data-language="python">from django.db import models
from products.models import AbstractCar

class Manufacturer(models.Model):
    pass

class Car(AbstractCar):
    pass

# Car.manufacturer will point to `production.Manufacturer` here.
</pre> </div> <p>To refer to models defined in another application, you can explicitly specify a model with the full application label. For example, if the <code>Manufacturer</code> model above is defined in another application called <code>production</code>, you’d need to use:</p> <pre data-language="python">class Car(models.Model):
    manufacturer = models.ForeignKey(
        'production.Manufacturer',
        on_delete=models.CASCADE,
    )
</pre> <p>This sort of reference, called a lazy relationship, can be useful when resolving circular import dependencies between two applications.</p> <p>A database index is automatically created on the <code>ForeignKey</code>. You can disable this by setting <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code>db_index</code></a> to <code>False</code>. You may want to avoid the overhead of an index if you are creating a foreign key for consistency rather than joins, or if you will be creating an alternative index like a partial or multiple column index.</p>  <h4 id="database-representation">Database Representation</h4> <p id="s-database-representation">Behind the scenes, Django appends <code>"_id"</code> to the field name to create its database column name. In the above example, the database table for the <code>Car</code> model will have a <code>manufacturer_id</code> column. (You can change this explicitly by specifying <a class="reference internal" href="#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><code>db_column</code></a>) However, your code should never have to deal with the database column name, unless you write custom SQL. You’ll always deal with the field names of your model object.</p>   <h4 id="foreign-key-arguments">Arguments</h4> <p id="s-arguments"><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> accepts other arguments that define the details of how the relation works.</p> <dl class="attribute"> <dt id="django.db.models.ForeignKey.on_delete">
<code>ForeignKey.on_delete</code> </dt> <dd>
<p>When an object referenced by a <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> is deleted, Django will emulate the behavior of the SQL constraint specified by the <a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code>on_delete</code></a> argument. For example, if you have a nullable <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> and you want it to be set null when the referenced object is deleted:</p> <pre data-language="python">user = models.ForeignKey(
    User,
    models.SET_NULL,
    blank=True,
    null=True,
)
</pre> <p><code>on_delete</code> doesn’t create an SQL constraint in the database. Support for database-level cascade options <a class="reference external" href="https://code.djangoproject.com/ticket/21961">may be implemented later</a>.</p> </dd>
</dl> <p>The possible values for <a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code>on_delete</code></a> are found in <a class="reference internal" href="../../topics/db/models#module-django.db.models" title="django.db.models"><code>django.db.models</code></a>:</p> <ul> <li>
<dl class="attribute"> <dt id="django.db.models.CASCADE">
<code>CASCADE</code> </dt> <dd>
<p>Cascade deletes. Django emulates the behavior of the SQL constraint ON DELETE CASCADE and also deletes the object containing the ForeignKey.</p> <p><a class="reference internal" href="instances#django.db.models.Model.delete" title="django.db.models.Model.delete"><code>Model.delete()</code></a> isn’t called on related models, but the <a class="reference internal" href="../signals#django.db.models.signals.pre_delete" title="django.db.models.signals.pre_delete"><code>pre_delete</code></a> and <a class="reference internal" href="../signals#django.db.models.signals.post_delete" title="django.db.models.signals.post_delete"><code>post_delete</code></a> signals are sent for all deleted objects.</p> </dd>
</dl> </li> <li>
<dl class="attribute"> <dt id="django.db.models.PROTECT">
<code>PROTECT</code> </dt> <dd>
<p>Prevent deletion of the referenced object by raising <a class="reference internal" href="../exceptions#django.db.models.ProtectedError" title="django.db.models.ProtectedError"><code>ProtectedError</code></a>, a subclass of <a class="reference internal" href="../exceptions#django.db.IntegrityError" title="django.db.IntegrityError"><code>django.db.IntegrityError</code></a>.</p> </dd>
</dl> </li> <li>
<dl class="attribute"> <dt id="django.db.models.RESTRICT">
<code>RESTRICT</code> </dt> <dd>
<p>Prevent deletion of the referenced object by raising <a class="reference internal" href="../exceptions#django.db.models.RestrictedError" title="django.db.models.RestrictedError"><code>RestrictedError</code></a> (a subclass of <a class="reference internal" href="../exceptions#django.db.IntegrityError" title="django.db.IntegrityError"><code>django.db.IntegrityError</code></a>). Unlike <a class="reference internal" href="#django.db.models.PROTECT" title="django.db.models.PROTECT"><code>PROTECT</code></a>, deletion of the referenced object is allowed if it also references a different object that is being deleted in the same operation, but via a <a class="reference internal" href="#django.db.models.CASCADE" title="django.db.models.CASCADE"><code>CASCADE</code></a> relationship.</p> <p>Consider this set of models:</p> <pre data-language="python">class Artist(models.Model):
    name = models.CharField(max_length=10)

class Album(models.Model):
    artist = models.ForeignKey(Artist, on_delete=models.CASCADE)

class Song(models.Model):
    artist = models.ForeignKey(Artist, on_delete=models.CASCADE)
    album = models.ForeignKey(Album, on_delete=models.RESTRICT)
</pre> <p><code>Artist</code> can be deleted even if that implies deleting an <code>Album</code> which is referenced by a <code>Song</code>, because <code>Song</code> also references <code>Artist</code> itself through a cascading relationship. For example:</p> <pre data-language="python">&gt;&gt;&gt; artist_one = Artist.objects.create(name='artist one')
&gt;&gt;&gt; artist_two = Artist.objects.create(name='artist two')
&gt;&gt;&gt; album_one = Album.objects.create(artist=artist_one)
&gt;&gt;&gt; album_two = Album.objects.create(artist=artist_two)
&gt;&gt;&gt; song_one = Song.objects.create(artist=artist_one, album=album_one)
&gt;&gt;&gt; song_two = Song.objects.create(artist=artist_one, album=album_two)
&gt;&gt;&gt; album_one.delete()
# Raises RestrictedError.
&gt;&gt;&gt; artist_two.delete()
# Raises RestrictedError.
&gt;&gt;&gt; artist_one.delete()
(4, {'Song': 2, 'Album': 1, 'Artist': 1})
</pre> </dd>
</dl> </li> <li>
<dl class="attribute"> <dt id="django.db.models.SET_NULL">
<code>SET_NULL</code> </dt> <dd>
<p>Set the <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> null; this is only possible if <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> is <code>True</code>.</p> </dd>
</dl> </li> <li>
<dl class="attribute"> <dt id="django.db.models.SET_DEFAULT">
<code>SET_DEFAULT</code> </dt> <dd>
<p>Set the <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> to its default value; a default for the <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> must be set.</p> </dd>
</dl> </li> <li>
<dl class="function"> <dt id="django.db.models.SET">
<code>SET()</code> </dt> <dd>
<p>Set the <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> to the value passed to <a class="reference internal" href="#django.db.models.SET" title="django.db.models.SET"><code>SET()</code></a>, or if a callable is passed in, the result of calling it. In most cases, passing a callable will be necessary to avoid executing queries at the time your models.py is imported:</p> <pre data-language="python">from django.conf import settings
from django.contrib.auth import get_user_model
from django.db import models

def get_sentinel_user():
    return get_user_model().objects.get_or_create(username='deleted')[0]

class MyModel(models.Model):
    user = models.ForeignKey(
        settings.AUTH_USER_MODEL,
        on_delete=models.SET(get_sentinel_user),
    )
</pre> </dd>
</dl> </li> <li>
<dl class="attribute"> <dt id="django.db.models.DO_NOTHING">
<code>DO_NOTHING</code> </dt> <dd>
<p>Take no action. If your database backend enforces referential integrity, this will cause an <a class="reference internal" href="../exceptions#django.db.IntegrityError" title="django.db.IntegrityError"><code>IntegrityError</code></a> unless you manually add an SQL <code>ON DELETE</code> constraint to the database field.</p> </dd>
</dl> </li> </ul> <dl class="attribute"> <dt id="django.db.models.ForeignKey.limit_choices_to">
<code>ForeignKey.limit_choices_to</code> </dt> <dd>
<p>Sets a limit to the available choices for this field when this field is rendered using a <code>ModelForm</code> or the admin (by default, all objects in the queryset are available to choose). Either a dictionary, a <a class="reference internal" href="querysets#django.db.models.Q" title="django.db.models.Q"><code>Q</code></a> object, or a callable returning a dictionary or <a class="reference internal" href="querysets#django.db.models.Q" title="django.db.models.Q"><code>Q</code></a> object can be used.</p> <p>For example:</p> <pre data-language="python">staff_member = models.ForeignKey(
    User,
    on_delete=models.CASCADE,
    limit_choices_to={'is_staff': True},
)
</pre> <p>causes the corresponding field on the <code>ModelForm</code> to list only <code>Users</code> that have <code>is_staff=True</code>. This may be helpful in the Django admin.</p> <p>The callable form can be helpful, for instance, when used in conjunction with the Python <code>datetime</code> module to limit selections by date range. For example:</p> <pre data-language="python">def limit_pub_date_choices():
    return {'pub_date__lte': datetime.date.today()}

limit_choices_to = limit_pub_date_choices
</pre> <p>If <code>limit_choices_to</code> is or returns a <a class="reference internal" href="querysets#django.db.models.Q" title="django.db.models.Q"><code>Q object</code></a>, which is useful for <a class="reference internal" href="../../topics/db/queries#complex-lookups-with-q"><span class="std std-ref">complex queries</span></a>, then it will only have an effect on the choices available in the admin when the field is not listed in <a class="reference internal" href="../contrib/admin/index#django.contrib.admin.ModelAdmin.raw_id_fields" title="django.contrib.admin.ModelAdmin.raw_id_fields"><code>raw_id_fields</code></a> in the <code>ModelAdmin</code> for the model.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If a callable is used for <code>limit_choices_to</code>, it will be invoked every time a new form is instantiated. It may also be invoked when a model is validated, for example by management commands or the admin. The admin constructs querysets to validate its form inputs in various edge cases multiple times, so there is a possibility your callable may be invoked several times.</p> </div> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ForeignKey.related_name">
<code>ForeignKey.related_name</code> </dt> <dd>
<p>The name to use for the relation from the related object back to this one. It’s also the default value for <a class="reference internal" href="#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code>related_query_name</code></a> (the name to use for the reverse filter name from the target model). See the <a class="reference internal" href="../../topics/db/queries#backwards-related-objects"><span class="std std-ref">related objects documentation</span></a> for a full explanation and example. Note that you must set this value when defining relations on <a class="reference internal" href="../../topics/db/models#abstract-base-classes"><span class="std std-ref">abstract models</span></a>; and when you do so <a class="reference internal" href="../../topics/db/models#abstract-related-name"><span class="std std-ref">some special syntax</span></a> is available.</p> <p>If you’d prefer Django not to create a backwards relation, set <code>related_name</code> to <code>'+'</code> or end it with <code>'+'</code>. For example, this will ensure that the <code>User</code> model won’t have a backwards relation to this model:</p> <pre data-language="python">user = models.ForeignKey(
    User,
    on_delete=models.CASCADE,
    related_name='+',
)
</pre> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ForeignKey.related_query_name">
<code>ForeignKey.related_query_name</code> </dt> <dd>
<p>The name to use for the reverse filter name from the target model. It defaults to the value of <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a> or <a class="reference internal" href="options#django.db.models.Options.default_related_name" title="django.db.models.Options.default_related_name"><code>default_related_name</code></a> if set, otherwise it defaults to the name of the model:</p> <pre data-language="python"># Declare the ForeignKey with related_query_name
class Tag(models.Model):
    article = models.ForeignKey(
        Article,
        on_delete=models.CASCADE,
        related_name="tags",
        related_query_name="tag",
    )
    name = models.CharField(max_length=255)

# That's now the name of the reverse filter
Article.objects.filter(tag__name="important")
</pre> <p>Like <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>, <code>related_query_name</code> supports app label and class interpolation via <a class="reference internal" href="../../topics/db/models#abstract-related-name"><span class="std std-ref">some special syntax</span></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ForeignKey.to_field">
<code>ForeignKey.to_field</code> </dt> <dd>
<p>The field on the related object that the relation is to. By default, Django uses the primary key of the related object. If you reference a different field, that field must have <code>unique=True</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ForeignKey.db_constraint">
<code>ForeignKey.db_constraint</code> </dt> <dd>
<p>Controls whether or not a constraint should be created in the database for this foreign key. The default is <code>True</code>, and that’s almost certainly what you want; setting this to <code>False</code> can be very bad for data integrity. That said, here are some scenarios where you might want to do this:</p> <ul class="simple"> <li>You have legacy data that is not valid.</li> <li>You’re sharding your database.</li> </ul> <p>If this is set to <code>False</code>, accessing a related object that doesn’t exist will raise its <code>DoesNotExist</code> exception.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ForeignKey.swappable">
<code>ForeignKey.swappable</code> </dt> <dd>
<p>Controls the migration framework’s reaction if this <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> is pointing at a swappable model. If it is <code>True</code> - the default - then if the <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> is pointing at a model which matches the current value of <code>settings.AUTH_USER_MODEL</code> (or another swappable model setting) the relationship will be stored in the migration using a reference to the setting, not to the model directly.</p> <p>You only want to override this to be <code>False</code> if you are sure your model should always point toward the swapped-in model - for example, if it is a profile model designed specifically for your custom user model.</p> <p>Setting it to <code>False</code> does not mean you can reference a swappable model even if it is swapped out - <code>False</code> means that the migrations made with this ForeignKey will always reference the exact model you specify (so it will fail hard if the user tries to run with a User model you don’t support, for example).</p> <p>If in doubt, leave it to its default of <code>True</code>.</p> </dd>
</dl>    <h3 id="manytomanyfield"><code>ManyToManyField</code></h3> <dl class="class" id="s-manytomanyfield"> <dt id="django.db.models.ManyToManyField">
<code>class ManyToManyField(to, **options)</code> </dt> 
</dl> <p>A many-to-many relationship. Requires a positional argument: the class to which the model is related, which works exactly the same as it does for <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>, including <a class="reference internal" href="#recursive-relationships"><span class="std std-ref">recursive</span></a> and <a class="reference internal" href="#lazy-relationships"><span class="std std-ref">lazy</span></a> relationships.</p> <p>Related objects can be added, removed, or created with the field’s <a class="reference internal" href="relations#django.db.models.fields.related.RelatedManager" title="django.db.models.fields.related.RelatedManager"><code>RelatedManager</code></a>.</p>  <h4 id="id1">Database Representation</h4> <p id="s-id1">Behind the scenes, Django creates an intermediary join table to represent the many-to-many relationship. By default, this table name is generated using the name of the many-to-many field and the name of the table for the model that contains it. Since some databases don’t support table names above a certain length, these table names will be automatically truncated and a uniqueness hash will be used, e.g. <code>author_books_9cdf</code>. You can manually provide the name of the join table using the <a class="reference internal" href="#django.db.models.ManyToManyField.db_table" title="django.db.models.ManyToManyField.db_table"><code>db_table</code></a> option.</p>   <h4 id="id2">Arguments</h4> <p id="s-manytomany-arguments"><a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> accepts an extra set of arguments – all optional – that control how the relationship functions.</p> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.related_name">
<code>ManyToManyField.related_name</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>ForeignKey.related_name</code></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.related_query_name">
<code>ManyToManyField.related_query_name</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code>ForeignKey.related_query_name</code></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.limit_choices_to">
<code>ManyToManyField.limit_choices_to</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><code>ForeignKey.limit_choices_to</code></a>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.symmetrical">
<code>ManyToManyField.symmetrical</code> </dt> <dd>
<p>Only used in the definition of ManyToManyFields on self. Consider the following model:</p> <pre data-language="python">from django.db import models

class Person(models.Model):
    friends = models.ManyToManyField("self")
</pre> <p>When Django processes this model, it identifies that it has a <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> on itself, and as a result, it doesn’t add a <code>person_set</code> attribute to the <code>Person</code> class. Instead, the <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> is assumed to be symmetrical – that is, if I am your friend, then you are my friend.</p> <p>If you do not want symmetry in many-to-many relationships with <code>self</code>, set <a class="reference internal" href="#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><code>symmetrical</code></a> to <code>False</code>. This will force Django to add the descriptor for the reverse relationship, allowing <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> relationships to be non-symmetrical.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.through">
<code>ManyToManyField.through</code> </dt> <dd>
<p>Django will automatically generate a table to manage many-to-many relationships. However, if you want to manually specify the intermediary table, you can use the <a class="reference internal" href="#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code>through</code></a> option to specify the Django model that represents the intermediate table that you want to use.</p> <p>The most common use for this option is when you want to associate <a class="reference internal" href="../../topics/db/models#intermediary-manytomany"><span class="std std-ref">extra data with a many-to-many relationship</span></a>.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If you don’t want multiple associations between the same instances, add a <a class="reference internal" href="constraints#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code>UniqueConstraint</code></a> including the from and to fields. Django’s automatically generated many-to-many tables include such a constraint.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Recursive relationships using an intermediary model can’t determine the reverse accessors names, as they would be the same. You need to set a <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a> to at least one of them. If you’d prefer Django not to create a backwards relation, set <code>related_name</code> to <code>'+'</code>.</p> </div> <p>If you don’t specify an explicit <code>through</code> model, there is still an implicit <code>through</code> model class you can use to directly access the table created to hold the association. It has three fields to link the models.</p> <p>If the source and target models differ, the following fields are generated:</p> <ul class="simple"> <li>
<code>id</code>: the primary key of the relation.</li> <li>
<code>&lt;containing_model&gt;_id</code>: the <code>id</code> of the model that declares the <code>ManyToManyField</code>.</li> <li>
<code>&lt;other_model&gt;_id</code>: the <code>id</code> of the model that the <code>ManyToManyField</code> points to.</li> </ul> <p>If the <code>ManyToManyField</code> points from and to the same model, the following fields are generated:</p> <ul class="simple"> <li>
<code>id</code>: the primary key of the relation.</li> <li>
<code>from_&lt;model&gt;_id</code>: the <code>id</code> of the instance which points at the model (i.e. the source instance).</li> <li>
<code>to_&lt;model&gt;_id</code>: the <code>id</code> of the instance to which the relationship points (i.e. the target model instance).</li> </ul> <p>This class can be used to query associated records for a given model instance like a normal model:</p> <pre data-language="python">Model.m2mfield.through.objects.all()
</pre> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.through_fields">
<code>ManyToManyField.through_fields</code> </dt> <dd>
<p>Only used when a custom intermediary model is specified. Django will normally determine which fields of the intermediary model to use in order to establish a many-to-many relationship automatically. However, consider the following models:</p> <pre data-language="python">from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=50)

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(
        Person,
        through='Membership',
        through_fields=('group', 'person'),
    )

class Membership(models.Model):
    group = models.ForeignKey(Group, on_delete=models.CASCADE)
    person = models.ForeignKey(Person, on_delete=models.CASCADE)
    inviter = models.ForeignKey(
        Person,
        on_delete=models.CASCADE,
        related_name="membership_invites",
    )
    invite_reason = models.CharField(max_length=64)
</pre> <p><code>Membership</code> has <em>two</em> foreign keys to <code>Person</code> (<code>person</code> and <code>inviter</code>), which makes the relationship ambiguous and Django can’t know which one to use. In this case, you must explicitly specify which foreign keys Django should use using <code>through_fields</code>, as in the example above.</p> <p><code>through_fields</code> accepts a 2-tuple <code>('field1', 'field2')</code>, where <code>field1</code> is the name of the foreign key to the model the <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> is defined on (<code>group</code> in this case), and <code>field2</code> the name of the foreign key to the target model (<code>person</code> in this case).</p> <p>When you have more than one foreign key on an intermediary model to any (or even both) of the models participating in a many-to-many relationship, you <em>must</em> specify <code>through_fields</code>. This also applies to <a class="reference internal" href="#recursive-relationships"><span class="std std-ref">recursive relationships</span></a> when an intermediary model is used and there are more than two foreign keys to the model, or you want to explicitly specify which two Django should use.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.db_table">
<code>ManyToManyField.db_table</code> </dt> <dd>
<p>The name of the table to create for storing the many-to-many data. If this is not provided, Django will assume a default name based upon the names of: the table for the model defining the relationship and the name of the field itself.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.db_constraint">
<code>ManyToManyField.db_constraint</code> </dt> <dd>
<p>Controls whether or not constraints should be created in the database for the foreign keys in the intermediary table. The default is <code>True</code>, and that’s almost certainly what you want; setting this to <code>False</code> can be very bad for data integrity. That said, here are some scenarios where you might want to do this:</p> <ul class="simple"> <li>You have legacy data that is not valid.</li> <li>You’re sharding your database.</li> </ul> <p>It is an error to pass both <code>db_constraint</code> and <code>through</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.ManyToManyField.swappable">
<code>ManyToManyField.swappable</code> </dt> <dd>
<p>Controls the migration framework’s reaction if this <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> is pointing at a swappable model. If it is <code>True</code> - the default - then if the <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> is pointing at a model which matches the current value of <code>settings.AUTH_USER_MODEL</code> (or another swappable model setting) the relationship will be stored in the migration using a reference to the setting, not to the model directly.</p> <p>You only want to override this to be <code>False</code> if you are sure your model should always point toward the swapped-in model - for example, if it is a profile model designed specifically for your custom user model.</p> <p>If in doubt, leave it to its default of <code>True</code>.</p> </dd>
</dl> <p><a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> does not support <a class="reference internal" href="#django.db.models.Field.validators" title="django.db.models.Field.validators"><code>validators</code></a>.</p> <p><a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> has no effect since there is no way to require a relationship at the database level.</p>    <h3 id="onetoonefield"><code>OneToOneField</code></h3> <dl class="class" id="s-onetoonefield"> <dt id="django.db.models.OneToOneField">
<code>class OneToOneField(to, on_delete, parent_link=False, **options)</code> </dt> 
</dl> <p>A one-to-one relationship. Conceptually, this is similar to a <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> with <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code>unique=True</code></a>, but the “reverse” side of the relation will directly return a single object.</p> <p>This is most useful as the primary key of a model which “extends” another model in some way; <a class="reference internal" href="../../topics/db/models#multi-table-inheritance"><span class="std std-ref">Multi-table inheritance</span></a> is implemented by adding an implicit one-to-one relation from the child model to the parent model, for example.</p> <p>One positional argument is required: the class to which the model will be related. This works exactly the same as it does for <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>, including all the options regarding <a class="reference internal" href="#recursive-relationships"><span class="std std-ref">recursive</span></a> and <a class="reference internal" href="#lazy-relationships"><span class="std std-ref">lazy</span></a> relationships.</p> <p>If you do not specify the <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a> argument for the <code>OneToOneField</code>, Django will use the lowercase name of the current model as default value.</p> <p>With the following example:</p> <pre data-language="python">from django.conf import settings
from django.db import models

class MySpecialUser(models.Model):
    user = models.OneToOneField(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
    )
    supervisor = models.OneToOneField(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        related_name='supervisor_of',
    )
</pre> <p>your resulting <code>User</code> model will have the following attributes:</p> <pre data-language="python">&gt;&gt;&gt; user = User.objects.get(pk=1)
&gt;&gt;&gt; hasattr(user, 'myspecialuser')
True
&gt;&gt;&gt; hasattr(user, 'supervisor_of')
True
</pre> <p>A <code>RelatedObjectDoesNotExist</code> exception is raised when accessing the reverse relationship if an entry in the related table doesn’t exist. This is a subclass of the target model’s <a class="reference internal" href="class#django.db.models.Model.DoesNotExist" title="django.db.models.Model.DoesNotExist"><code>Model.DoesNotExist</code></a> exception. For example, if a user doesn’t have a supervisor designated by <code>MySpecialUser</code>:</p> <pre data-language="python">&gt;&gt;&gt; user.supervisor_of
Traceback (most recent call last):
    ...
RelatedObjectDoesNotExist: User has no supervisor_of.
</pre> <p id="onetoone-arguments">Additionally, <code>OneToOneField</code> accepts all of the extra arguments accepted by <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>, plus one extra argument:</p> <dl class="attribute"> <dt id="django.db.models.OneToOneField.parent_link">
<code>OneToOneField.parent_link</code> </dt> <dd>
<p>When <code>True</code> and used in a model which inherits from another <a class="reference internal" href="https://docs.djangoproject.com/en/4.0/glossary/#term-concrete-model"><span class="xref std std-term">concrete model</span></a>, indicates that this field should be used as the link back to the parent class, rather than the extra <code>OneToOneField</code> which would normally be implicitly created by subclassing.</p> </dd>
</dl> <p>See <a class="reference internal" href="../../topics/db/examples/one_to_one"><span class="doc">One-to-one relationships</span></a> for usage examples of <code>OneToOneField</code>.</p>    <h2 id="field-api-reference">Field API reference</h2> <dl class="class" id="s-field-api-reference"> <dt id="django.db.models.Field">
<code>class Field</code> </dt> <dd>
<p><code>Field</code> is an abstract class that represents a database table column. Django uses fields to create the database table (<a class="reference internal" href="#django.db.models.Field.db_type" title="django.db.models.Field.db_type"><code>db_type()</code></a>), to map Python types to database (<a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code>get_prep_value()</code></a>) and vice-versa (<a class="reference internal" href="#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><code>from_db_value()</code></a>).</p> <p>A field is thus a fundamental piece in different Django APIs, notably, <a class="reference internal" href="instances#django.db.models.Model" title="django.db.models.Model"><code>models</code></a> and <a class="reference internal" href="querysets#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><code>querysets</code></a>.</p> <p>In models, a field is instantiated as a class attribute and represents a particular table column, see <a class="reference internal" href="../../topics/db/models"><span class="doc">Models</span></a>. It has attributes such as <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a> and <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code>unique</code></a>, and methods that Django uses to map the field value to database-specific values.</p> <p>A <code>Field</code> is a subclass of <a class="reference internal" href="lookups#django.db.models.lookups.RegisterLookupMixin" title="django.db.models.lookups.RegisterLookupMixin"><code>RegisterLookupMixin</code></a> and thus both <a class="reference internal" href="lookups#django.db.models.Transform" title="django.db.models.Transform"><code>Transform</code></a> and <a class="reference internal" href="lookups#django.db.models.Lookup" title="django.db.models.Lookup"><code>Lookup</code></a> can be registered on it to be used in <code>QuerySet</code>s (e.g. <code>field_name__exact="foo"</code>). All <a class="reference internal" href="querysets#field-lookups"><span class="std std-ref">built-in lookups</span></a> are registered by default.</p> <p>All of Django’s built-in fields, such as <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a>, are particular implementations of <code>Field</code>. If you need a custom field, you can either subclass any of the built-in fields or write a <code>Field</code> from scratch. In either case, see <a class="reference internal" href="../../howto/custom-model-fields"><span class="doc">How to create custom model fields</span></a>.</p> <dl class="attribute"> <dt id="django.db.models.Field.description">
<code>description</code> </dt> <dd>
<p>A verbose description of the field, e.g. for the <a class="reference internal" href="../contrib/admin/admindocs#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><code>django.contrib.admindocs</code></a> application.</p> <p>The description can be of the form:</p> <pre data-language="python">description = _("String (up to %(max_length)s)")
</pre> <p>where the arguments are interpolated from the field’s <code>__dict__</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.descriptor_class">
<code>descriptor_class</code> </dt> <dd>
<p>A class implementing the <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#descriptors" title="(in Python v3.10)"><span class="xref std std-ref">descriptor protocol</span></a> that is instantiated and assigned to the model instance attribute. The constructor must accept a single argument, the <code>Field</code> instance. Overriding this class attribute allows for customizing the get and set behavior.</p> </dd>
</dl> <p>To map a <code>Field</code> to a database-specific type, Django exposes several methods:</p> <dl class="method"> <dt id="django.db.models.Field.get_internal_type">
<code>get_internal_type()</code> </dt> <dd>
<p>Returns a string naming this field for backend specific purposes. By default, it returns the class name.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#emulating-built-in-field-types"><span class="std std-ref">Emulating built-in field types</span></a> for usage in custom fields.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.db_type">
<code>db_type(connection)</code> </dt> <dd>
<p>Returns the database column data type for the <a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a>, taking into account the <code>connection</code>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#custom-database-types"><span class="std std-ref">Custom database types</span></a> for usage in custom fields.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.rel_db_type">
<code>rel_db_type(connection)</code> </dt> <dd>
<p>Returns the database column data type for fields such as <code>ForeignKey</code> and <code>OneToOneField</code> that point to the <a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a>, taking into account the <code>connection</code>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#custom-database-types"><span class="std std-ref">Custom database types</span></a> for usage in custom fields.</p> </dd>
</dl> <p>There are three main situations where Django needs to interact with the database backend and fields:</p> <ul class="simple"> <li>when it queries the database (Python value -&gt; database backend value)</li> <li>when it loads data from the database (database backend value -&gt; Python value)</li> <li>when it saves to the database (Python value -&gt; database backend value)</li> </ul> <p>When querying, <a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code>get_db_prep_value()</code></a> and <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code>get_prep_value()</code></a> are used:</p> <dl class="method"> <dt id="django.db.models.Field.get_prep_value">
<code>get_prep_value(value)</code> </dt> <dd>
<p><code>value</code> is the current value of the model’s attribute, and the method should return data in a format that has been prepared for use as a parameter in a query.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#converting-python-objects-to-query-values"><span class="std std-ref">Converting Python objects to query values</span></a> for usage.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.get_db_prep_value">
<code>get_db_prep_value(value, connection, prepared=False)</code> </dt> <dd>
<p>Converts <code>value</code> to a backend-specific value. By default it returns <code>value</code> if <code>prepared=True</code> and <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code>get_prep_value()</code></a> if is <code>False</code>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#converting-query-values-to-database-values"><span class="std std-ref">Converting query values to database values</span></a> for usage.</p> </dd>
</dl> <p>When loading data, <a class="reference internal" href="#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><code>from_db_value()</code></a> is used:</p> <dl class="method"> <dt id="django.db.models.Field.from_db_value">
<code>from_db_value(value, expression, connection)</code> </dt> <dd>
<p>Converts a value as returned by the database to a Python object. It is the reverse of <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code>get_prep_value()</code></a>.</p> <p>This method is not used for most built-in fields as the database backend already returns the correct Python type, or the backend itself does the conversion.</p> <p><code>expression</code> is the same as <code>self</code>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#converting-values-to-python-objects"><span class="std std-ref">Converting values to Python objects</span></a> for usage.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">For performance reasons, <code>from_db_value</code> is not implemented as a no-op on fields which do not require it (all Django fields). Consequently you may not call <code>super</code> in your definition.</p> </div> </dd>
</dl> <p>When saving, <a class="reference internal" href="#django.db.models.Field.pre_save" title="django.db.models.Field.pre_save"><code>pre_save()</code></a> and <a class="reference internal" href="#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><code>get_db_prep_save()</code></a> are used:</p> <dl class="method"> <dt id="django.db.models.Field.get_db_prep_save">
<code>get_db_prep_save(value, connection)</code> </dt> <dd>
<p>Same as the <a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code>get_db_prep_value()</code></a>, but called when the field value must be <em>saved</em> to the database. By default returns <a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code>get_db_prep_value()</code></a>.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.pre_save">
<code>pre_save(model_instance, add)</code> </dt> <dd>
<p>Method called prior to <a class="reference internal" href="#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><code>get_db_prep_save()</code></a> to prepare the value before being saved (e.g. for <a class="reference internal" href="#django.db.models.DateField.auto_now" title="django.db.models.DateField.auto_now"><code>DateField.auto_now</code></a>).</p> <p><code>model_instance</code> is the instance this field belongs to and <code>add</code> is whether the instance is being saved to the database for the first time.</p> <p>It should return the value of the appropriate attribute from <code>model_instance</code> for this field. The attribute name is in <code>self.attname</code> (this is set up by <a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a>).</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#preprocessing-values-before-saving"><span class="std std-ref">Preprocessing values before saving</span></a> for usage.</p> </dd>
</dl> <p>Fields often receive their values as a different type, either from serialization or from forms.</p> <dl class="method"> <dt id="django.db.models.Field.to_python">
<code>to_python(value)</code> </dt> <dd>
<p>Converts the value into the correct Python object. It acts as the reverse of <a class="reference internal" href="#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><code>value_to_string()</code></a>, and is also called in <a class="reference internal" href="instances#django.db.models.Model.clean" title="django.db.models.Model.clean"><code>clean()</code></a>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#converting-values-to-python-objects"><span class="std std-ref">Converting values to Python objects</span></a> for usage.</p> </dd>
</dl> <p>Besides saving to the database, the field also needs to know how to serialize its value:</p> <dl class="method"> <dt id="django.db.models.Field.value_from_object">
<code>value_from_object(obj)</code> </dt> <dd>
<p>Returns the field’s value for the given model instance.</p> <p>This method is often used by <a class="reference internal" href="#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><code>value_to_string()</code></a>.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.value_to_string">
<code>value_to_string(obj)</code> </dt> <dd>
<p>Converts <code>obj</code> to a string. Used to serialize the value of the field.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#converting-model-field-to-serialization"><span class="std std-ref">Converting field data for serialization</span></a> for usage.</p> </dd>
</dl> <p>When using <a class="reference internal" href="../../topics/forms/modelforms#django.forms.ModelForm" title="django.forms.ModelForm"><code>model forms</code></a>, the <code>Field</code> needs to know which form field it should be represented by:</p> <dl class="method"> <dt id="django.db.models.Field.formfield">
<code>formfield(form_class=None, choices_form_class=None, **kwargs)</code> </dt> <dd>
<p>Returns the default <a class="reference internal" href="../forms/fields#django.forms.Field" title="django.forms.Field"><code>django.forms.Field</code></a> of this field for <a class="reference internal" href="../../topics/forms/modelforms#django.forms.ModelForm" title="django.forms.ModelForm"><code>ModelForm</code></a>.</p> <p>By default, if both <code>form_class</code> and <code>choices_form_class</code> are <code>None</code>, it uses <a class="reference internal" href="../forms/fields#django.forms.CharField" title="django.forms.CharField"><code>CharField</code></a>. If the field has <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a> and <code>choices_form_class</code> isn’t specified, it uses <a class="reference internal" href="../forms/fields#django.forms.TypedChoiceField" title="django.forms.TypedChoiceField"><code>TypedChoiceField</code></a>.</p> <p>See <a class="reference internal" href="../../howto/custom-model-fields#specifying-form-field-for-model-field"><span class="std std-ref">Specifying the form field for a model field</span></a> for usage.</p> </dd>
</dl> <dl class="method"> <dt id="django.db.models.Field.deconstruct">
<code>deconstruct()</code> </dt> <dd>
<p>Returns a 4-tuple with enough information to recreate the field:</p> <ol class="arabic simple"> <li>The name of the field on the model.</li> <li>The import path of the field (e.g. <code>"django.db.models.IntegerField"</code>). This should be the most portable version, so less specific may be better.</li> <li>A list of positional arguments.</li> <li>A dict of keyword arguments.</li> </ol> <p>This method must be added to fields prior to 1.7 to migrate its data using <a class="reference internal" href="../../topics/migrations"><span class="doc">Migrations</span></a>.</p> </dd>
</dl> </dd>
</dl>    <h1 id="model-field-attributes">Field attribute reference</h1> <p id="s-field-attribute-reference">Every <code>Field</code> instance contains several attributes that allow introspecting its behavior. Use these attributes instead of <code>isinstance</code> checks when you need to write code that depends on a field’s functionality. These attributes can be used together with the <a class="reference internal" href="meta#model-meta-field-api"><span class="std std-ref">Model._meta API</span></a> to narrow down a search for specific field types. Custom model fields should implement these flags.</p>  <h2 id="attributes-for-fields">Attributes for fields</h2> <dl class="attribute" id="s-attributes-for-fields"> <dt id="django.db.models.Field.auto_created">
<code>Field.auto_created</code> </dt> <dd>
<p>Boolean flag that indicates if the field was automatically created, such as the <code>OneToOneField</code> used by model inheritance.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.concrete">
<code>Field.concrete</code> </dt> <dd>
<p>Boolean flag that indicates if the field has a database column associated with it.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.hidden">
<code>Field.hidden</code> </dt> <dd>
<p>Boolean flag that indicates if a field is used to back another non-hidden field’s functionality (e.g. the <code>content_type</code> and <code>object_id</code> fields that make up a <code>GenericForeignKey</code>). The <code>hidden</code> flag is used to distinguish what constitutes the public subset of fields on the model from all the fields on the model.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last"><a class="reference internal" href="meta#django.db.models.options.Options.get_fields" title="django.db.models.options.Options.get_fields"><code>Options.get_fields()</code></a> excludes hidden fields by default. Pass in <code>include_hidden=True</code> to return hidden fields in the results.</p> </div> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.is_relation">
<code>Field.is_relation</code> </dt> <dd>
<p>Boolean flag that indicates if a field contains references to one or more other models for its functionality (e.g. <code>ForeignKey</code>, <code>ManyToManyField</code>, <code>OneToOneField</code>, etc.).</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.model">
<code>Field.model</code> </dt> <dd>
<p>Returns the model on which the field is defined. If a field is defined on a superclass of a model, <code>model</code> will refer to the superclass, not the class of the instance.</p> </dd>
</dl>   <h2 id="attributes-for-fields-with-relations">Attributes for fields with relations</h2> <p id="s-attributes-for-fields-with-relations">These attributes are used to query for the cardinality and other details of a relation. These attribute are present on all fields; however, they will only have boolean values (rather than <code>None</code>) if the field is a relation type (<a class="reference internal" href="#django.db.models.Field.is_relation" title="django.db.models.Field.is_relation"><code>Field.is_relation=True</code></a>).</p> <dl class="attribute"> <dt id="django.db.models.Field.many_to_many">
<code>Field.many_to_many</code> </dt> <dd>
<p>Boolean flag that is <code>True</code> if the field has a many-to-many relation; <code>False</code> otherwise. The only field included with Django where this is <code>True</code> is <code>ManyToManyField</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.many_to_one">
<code>Field.many_to_one</code> </dt> <dd>
<p>Boolean flag that is <code>True</code> if the field has a many-to-one relation, such as a <code>ForeignKey</code>; <code>False</code> otherwise.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.one_to_many">
<code>Field.one_to_many</code> </dt> <dd>
<p>Boolean flag that is <code>True</code> if the field has a one-to-many relation, such as a <code>GenericRelation</code> or the reverse of a <code>ForeignKey</code>; <code>False</code> otherwise.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.one_to_one">
<code>Field.one_to_one</code> </dt> <dd>
<p>Boolean flag that is <code>True</code> if the field has a one-to-one relation, such as a <code>OneToOneField</code>; <code>False</code> otherwise.</p> </dd>
</dl> <dl class="attribute"> <dt id="django.db.models.Field.related_model">
<code>Field.related_model</code> </dt> <dd>
<p>Points to the model the field relates to. For example, <code>Author</code> in <code>ForeignKey(Author, on_delete=models.CASCADE)</code>. The <code>related_model</code> for a <code>GenericForeignKey</code> is always <code>None</code>.</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/4.0/ref/models/fields/" class="_attribution-link">https://docs.djangoproject.com/en/4.0/ref/models/fields/</a>
  </p>
</div>
