<h1 id="how-to-deploy-with-asgi">How to deploy with ASGI</h1> <p id="s-how-to-deploy-with-asgi">As well as WSGI, Django also supports deploying on <a class="reference external" href="https://asgi.readthedocs.io/en/latest/">ASGI</a>, the emerging Python standard for asynchronous web servers and applications.</p> <p>Django’s <a class="reference internal" href="../../../ref/django-admin#django-admin-startproject"><code>startproject</code></a> management command sets up a default ASGI configuration for you, which you can tweak as needed for your project, and direct any ASGI-compliant application server to use.</p> <p>Django includes getting-started documentation for the following ASGI servers:</p>  <ul> <li class="toctree-l1"><a class="reference internal" href="daphne">How to use Django with Daphne</a></li> <li class="toctree-l1"><a class="reference internal" href="hypercorn">How to use Django with Hypercorn</a></li> <li class="toctree-l1"><a class="reference internal" href="uvicorn">How to use Django with Uvicorn</a></li> </ul>   <h2 id="the-application-object">The <code>application</code> object</h2> <p id="s-the-application-object">Like WSGI, ASGI has you supply an <code>application</code> callable which the application server uses to communicate with your code. It’s commonly provided as an object named <code>application</code> in a Python module accessible to the server.</p> <p>The <a class="reference internal" href="../../../ref/django-admin#django-admin-startproject"><code>startproject</code></a> command creates a file <code>&lt;project_name&gt;/asgi.py</code> that contains such an <code>application</code> callable.</p> <p>It’s not used by the development server (<code>runserver</code>), but can be used by any ASGI server either in development or in production.</p> <p>ASGI servers usually take the path to the application callable as a string; for most Django projects, this will look like <code>myproject.asgi:application</code>.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>While Django’s default ASGI handler will run all your code in a synchronous thread, if you choose to run your own async handler you must be aware of async-safety.</p> <p class="last">Do not call blocking synchronous functions or libraries in any async code. Django prevents you from doing this with the parts of Django that are not async-safe, but the same may not be true of third-party apps or Python libraries.</p> </div>   <h2 id="configuring-the-settings-module">Configuring the settings module</h2> <p id="s-configuring-the-settings-module">When the ASGI server loads your application, Django needs to import the settings module — that’s where your entire application is defined.</p> <p>Django uses the <a class="reference internal" href="../../../topics/settings#envvar-DJANGO_SETTINGS_MODULE" id="index-0"><code>DJANGO_SETTINGS_MODULE</code></a> environment variable to locate the appropriate settings module. It must contain the dotted path to the settings module. You can use a different value for development and production; it all depends on how you organize your settings.</p> <p>If this variable isn’t set, the default <code>asgi.py</code> sets it to <code>mysite.settings</code>, where <code>mysite</code> is the name of your project.</p>   <h2 id="applying-asgi-middleware">Applying ASGI middleware</h2> <p id="s-applying-asgi-middleware">To apply ASGI middleware, or to embed Django in another ASGI application, you can wrap Django’s <code>application</code> object in the <code>asgi.py</code> file. For example:</p> <pre data-language="python">from some_asgi_library import AmazingMiddleware
application = AmazingMiddleware(application)
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/4.0/howto/deployment/asgi/index/" class="_attribution-link">https://docs.djangoproject.com/en/4.0/howto/deployment/asgi/index/</a>
  </p>
</div>
