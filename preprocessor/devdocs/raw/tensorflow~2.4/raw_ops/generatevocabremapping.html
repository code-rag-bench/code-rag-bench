<h1 class="devsite-page-title">tf.raw_ops.GenerateVocabRemapping</h1>       <p>Given a path to new and old vocabulary files, returns a remapping Tensor of</p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="https://www.tensorflow.org/api_docs/python/tf/raw_ops/GenerateVocabRemapping"><code translate="no" dir="ltr">tf.compat.v1.raw_ops.GenerateVocabRemapping</code></a></p> </section> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.raw_ops.GenerateVocabRemapping(
    new_vocab_file, old_vocab_file, new_vocab_offset, num_new_vocab,
    old_vocab_size=-1, name=None
)
</pre>  <p>length <code translate="no" dir="ltr">num_new_vocab</code>, where <code translate="no" dir="ltr">remapping[i]</code> contains the row number in the old vocabulary that corresponds to row <code translate="no" dir="ltr">i</code> in the new vocabulary (starting at line <code translate="no" dir="ltr">new_vocab_offset</code> and up to <code translate="no" dir="ltr">num_new_vocab</code> entities), or <code translate="no" dir="ltr">-1</code> if entry <code translate="no" dir="ltr">i</code> in the new vocabulary is not in the old vocabulary. The old vocabulary is constrained to the first <code translate="no" dir="ltr">old_vocab_size</code> entries if <code translate="no" dir="ltr">old_vocab_size</code> is not the default value of -1.</p> <p><code translate="no" dir="ltr">num_vocab_offset</code> enables use in the partitioned variable case, and should generally be set through examining partitioning info. The format of the files should be a text file, with each line containing a single entity within the vocabulary.</p> <p>For example, with <code translate="no" dir="ltr">new_vocab_file</code> a text file containing each of the following elements on a single line: <code translate="no" dir="ltr">[f0, f1, f2, f3]</code>, old_vocab_file = [f1, f0, f3], <code translate="no" dir="ltr">num_new_vocab = 3, new_vocab_offset = 1</code>, the returned remapping would be <code translate="no" dir="ltr">[0, -1, 2]</code>.</p> <p>The op also returns a count of how many entries in the new vocabulary were present in the old vocabulary, which is used to calculate the number of values to initialize in a weight matrix remapping</p> <p>This functionality can be used to remap both row vocabularies (typically, features) and column vocabularies (typically, classes) from TensorFlow checkpoints. Note that the partitioning logic relies on contiguous vocabularies corresponding to div-partitioned variables. Moreover, the underlying remapping uses an IndexTable (as opposed to an inexact CuckooTable), so client code should use the corresponding index_table_from_file() as the FeatureColumn framework does (as opposed to tf.feature_to_id(), which uses a CuckooTable).</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">new_vocab_file</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">string</code>. Path to the new vocab file. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">old_vocab_file</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">string</code>. Path to the old vocab file. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">new_vocab_offset</code> </td> <td> An <code translate="no" dir="ltr">int</code> that is <code translate="no" dir="ltr">&gt;= 0</code>. How many entries into the new vocab file to start reading. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">num_new_vocab</code> </td> <td> An <code translate="no" dir="ltr">int</code> that is <code translate="no" dir="ltr">&gt;= 0</code>. Number of entries in the new vocab file to remap. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">old_vocab_size</code> </td> <td> An optional <code translate="no" dir="ltr">int</code> that is <code translate="no" dir="ltr">&gt;= -1</code>. Defaults to <code translate="no" dir="ltr">-1</code>. Number of entries in the old vocab file to consider. If -1, use the entire old vocabulary. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> A name for the operation (optional). </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A tuple of <code translate="no" dir="ltr">Tensor</code> objects (remapping, num_present). </td> </tr> <tr> <td> <code translate="no" dir="ltr">remapping</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">int64</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">num_present</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">int32</code>. </td> </tr> </table>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2020 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.4/api_docs/python/tf/raw_ops/GenerateVocabRemapping" class="_attribution-link">https://www.tensorflow.org/versions/r2.4/api_docs/python/tf/raw_ops/GenerateVocabRemapping</a>
  </p>
</div>
