<h1 class="devsite-page-title">tf.case</h1>      <table class="tfo-notebook-buttons tfo-api nocontent" align="left">  <td> <a target="_blank" href="https://github.com/tensorflow/tensorflow/blob/v2.4.0/tensorflow/python/ops/control_flow_ops.py#L3329-L3431">  View source on GitHub </a> </td> </table> <p>Create a case operation.</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.case(
    pred_fn_pairs, default=None, exclusive=False, strict=False,
    name='case'
)
</pre>  <p>See also <a href="switch_case"><code translate="no" dir="ltr">tf.switch_case</code></a>.</p> <p>The <code translate="no" dir="ltr">pred_fn_pairs</code> parameter is a list of pairs of size N. Each pair contains a boolean scalar tensor and a python callable that creates the tensors to be returned if the boolean evaluates to True. <code translate="no" dir="ltr">default</code> is a callable generating a list of tensors. All the callables in <code translate="no" dir="ltr">pred_fn_pairs</code> as well as <code translate="no" dir="ltr">default</code> (if provided) should return the same number and types of tensors.</p> <p>If <code translate="no" dir="ltr">exclusive==True</code>, all predicates are evaluated, and an exception is thrown if more than one of the predicates evaluates to <code translate="no" dir="ltr">True</code>. If <code translate="no" dir="ltr">exclusive==False</code>, execution stops at the first predicate which evaluates to True, and the tensors generated by the corresponding function are returned immediately. If none of the predicates evaluate to True, this operation returns the tensors generated by <code translate="no" dir="ltr">default</code>.</p> <p><a href="case"><code translate="no" dir="ltr">tf.case</code></a> supports nested structures as implemented in <code translate="no" dir="ltr">tf.contrib.framework.nest</code>. All of the callables must return the same (possibly nested) value structure of lists, tuples, and/or named tuples. Singleton lists and tuples form the only exceptions to this: when returned by a callable, they are implicitly unpacked to single values. This behavior is disabled by passing <code translate="no" dir="ltr">strict=True</code>.</p> <p><strong>Example 1:</strong></p> <h4 id="pseudocode" data-text="Pseudocode:">Pseudocode:</h4> <pre class="prettyprint" translate="no" dir="ltr" data-language="cpp">if (x &lt; y) return 17;
else return 23;
</pre> <h4 id="expressions" data-text="Expressions:">Expressions:</h4> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">f1 = lambda: tf.constant(17)
f2 = lambda: tf.constant(23)
r = tf.case([(tf.less(x, y), f1)], default=f2)
</pre> <p><strong>Example 2:</strong></p> <h4 id="pseudocode_2" data-text="Pseudocode:">Pseudocode:</h4> <pre class="prettyprint" translate="no" dir="ltr" data-language="cpp">if (x &lt; y &amp;&amp; x &gt; z) raise OpError("Only one predicate may evaluate to True");
if (x &lt; y) return 17;
else if (x &gt; z) return 23;
else return -1;
</pre> <h4 id="expressions_2" data-text="Expressions:">Expressions:</h4> <pre class="prettyprint lang-python" translate="no" dir="ltr" data-language="python">def f1(): return tf.constant(17)
def f2(): return tf.constant(23)
def f3(): return tf.constant(-1)
r = tf.case([(tf.less(x, y), f1), (tf.greater(x, z), f2)],
         default=f3, exclusive=True)
</pre>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">pred_fn_pairs</code> </td> <td> List of pairs of a boolean scalar tensor and a callable which returns a list of tensors. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">default</code> </td> <td> Optional callable that returns a list of tensors. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">exclusive</code> </td> <td> True iff at most one predicate is allowed to evaluate to <code translate="no" dir="ltr">True</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">strict</code> </td> <td> A boolean that enables/disables 'strict' mode; see above. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> A name for this operation (optional). </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> The tensors returned by the first pair whose predicate evaluated to True, or those returned by <code translate="no" dir="ltr">default</code> if none does. </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If <code translate="no" dir="ltr">pred_fn_pairs</code> is not a list/tuple. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If <code translate="no" dir="ltr">pred_fn_pairs</code> is a list but does not contain 2-tuples. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If <code translate="no" dir="ltr">fns[i]</code> is not callable for any i, or <code translate="no" dir="ltr">default</code> is not callable. </td> </tr> </table> <h4 id="v2_compatibility" data-text="V2 Compatibility">V2 Compatibility</h4> <p><code translate="no" dir="ltr">pred_fn_pairs</code> could be a dictionary in v1. However, tf.Tensor and tf.Variable are no longer hashable in v2, so cannot be used as a key for a dictionary. Please use a list or a tuple instead.</p>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2020 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.4/api_docs/python/tf/case" class="_attribution-link">https://www.tensorflow.org/versions/r2.4/api_docs/python/tf/case</a>
  </p>
</div>
